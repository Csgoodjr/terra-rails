/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./app/javascript/packs/application.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./app/javascript/channels sync recursive _channel\\.js$":
/*!****************************************************!*\
  !*** ./app/javascript/channels sync _channel\.js$ ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./app/javascript/channels sync recursive _channel\\\\.js$\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9jaGFubmVscyBzeW5jIF9jaGFubmVsXFwuanMkPzAwZTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEO0FBQ0E7QUFDQSIsImZpbGUiOiIuL2FwcC9qYXZhc2NyaXB0L2NoYW5uZWxzIHN5bmMgcmVjdXJzaXZlIF9jaGFubmVsXFwuanMkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gd2VicGFja0VtcHR5Q29udGV4dChyZXEpIHtcblx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdHRocm93IGU7XG59XG53ZWJwYWNrRW1wdHlDb250ZXh0LmtleXMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFtdOyB9O1xud2VicGFja0VtcHR5Q29udGV4dC5yZXNvbHZlID0gd2VicGFja0VtcHR5Q29udGV4dDtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0VtcHR5Q29udGV4dDtcbndlYnBhY2tFbXB0eUNvbnRleHQuaWQgPSBcIi4vYXBwL2phdmFzY3JpcHQvY2hhbm5lbHMgc3luYyByZWN1cnNpdmUgX2NoYW5uZWxcXFxcLmpzJFwiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app/javascript/channels sync recursive _channel\\.js$\n");

/***/ }),

/***/ "./app/javascript/channels/index.js":
/*!******************************************!*\
  !*** ./app/javascript/channels/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Load all the channels within this directory and all subdirectories.\n// Channel files must be named *_channel.js.\nvar channels = __webpack_require__(\"./app/javascript/channels sync recursive _channel\\\\.js$\");\n\nchannels.keys().forEach(channels);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9jaGFubmVscy9pbmRleC5qcz8zMDdlIl0sIm5hbWVzIjpbImNoYW5uZWxzIiwicmVxdWlyZSIsImtleXMiLCJmb3JFYWNoIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBRUEsSUFBTUEsUUFBUSxHQUFHQyw4RUFBakI7O0FBQ0FELFFBQVEsQ0FBQ0UsSUFBVCxHQUFnQkMsT0FBaEIsQ0FBd0JILFFBQXhCIiwiZmlsZSI6Ii4vYXBwL2phdmFzY3JpcHQvY2hhbm5lbHMvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMb2FkIGFsbCB0aGUgY2hhbm5lbHMgd2l0aGluIHRoaXMgZGlyZWN0b3J5IGFuZCBhbGwgc3ViZGlyZWN0b3JpZXMuXG4vLyBDaGFubmVsIGZpbGVzIG11c3QgYmUgbmFtZWQgKl9jaGFubmVsLmpzLlxuXG5jb25zdCBjaGFubmVscyA9IHJlcXVpcmUuY29udGV4dCgnLicsIHRydWUsIC9fY2hhbm5lbFxcLmpzJC8pXG5jaGFubmVscy5rZXlzKCkuZm9yRWFjaChjaGFubmVscylcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app/javascript/channels/index.js\n");

/***/ }),

/***/ "./app/javascript/packs/application.js":
/*!*********************************************!*\
  !*** ./app/javascript/packs/application.js ***!
  \*********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _rails_ujs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rails/ujs */ \"./node_modules/@rails/ujs/lib/assets/compiled/rails-ujs.js\");\n/* harmony import */ var _rails_ujs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_rails_ujs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! turbolinks */ \"./node_modules/turbolinks/dist/turbolinks.js\");\n/* harmony import */ var turbolinks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(turbolinks__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _rails_activestorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @rails/activestorage */ \"./node_modules/@rails/activestorage/app/assets/javascripts/activestorage.js\");\n/* harmony import */ var _rails_activestorage__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_rails_activestorage__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var channels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! channels */ \"./app/javascript/channels/index.js\");\n/* harmony import */ var channels__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(channels__WEBPACK_IMPORTED_MODULE_3__);\n// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n\n\n\n\n_rails_ujs__WEBPACK_IMPORTED_MODULE_0___default.a.start();\nturbolinks__WEBPACK_IMPORTED_MODULE_1___default.a.start();\n_rails_activestorage__WEBPACK_IMPORTED_MODULE_2__[\"start\"]();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9wYWNrcy9hcHBsaWNhdGlvbi5qcz8yZTI4Il0sIm5hbWVzIjpbIlJhaWxzIiwic3RhcnQiLCJUdXJib2xpbmtzIiwiQWN0aXZlU3RvcmFnZSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBQSxpREFBSyxDQUFDQyxLQUFOO0FBQ0FDLGlEQUFVLENBQUNELEtBQVg7QUFDQUUsMERBQUEiLCJmaWxlIjoiLi9hcHAvamF2YXNjcmlwdC9wYWNrcy9hcHBsaWNhdGlvbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGNvbXBpbGVkIGJ5IFdlYnBhY2ssIGFsb25nIHdpdGggYW55IG90aGVyIGZpbGVzXG4vLyBwcmVzZW50IGluIHRoaXMgZGlyZWN0b3J5LiBZb3UncmUgZW5jb3VyYWdlZCB0byBwbGFjZSB5b3VyIGFjdHVhbCBhcHBsaWNhdGlvbiBsb2dpYyBpblxuLy8gYSByZWxldmFudCBzdHJ1Y3R1cmUgd2l0aGluIGFwcC9qYXZhc2NyaXB0IGFuZCBvbmx5IHVzZSB0aGVzZSBwYWNrIGZpbGVzIHRvIHJlZmVyZW5jZVxuLy8gdGhhdCBjb2RlIHNvIGl0J2xsIGJlIGNvbXBpbGVkLlxuXG5pbXBvcnQgUmFpbHMgZnJvbSBcIkByYWlscy91anNcIlxuaW1wb3J0IFR1cmJvbGlua3MgZnJvbSBcInR1cmJvbGlua3NcIlxuaW1wb3J0ICogYXMgQWN0aXZlU3RvcmFnZSBmcm9tIFwiQHJhaWxzL2FjdGl2ZXN0b3JhZ2VcIlxuaW1wb3J0IFwiY2hhbm5lbHNcIlxuXG5SYWlscy5zdGFydCgpXG5UdXJib2xpbmtzLnN0YXJ0KClcbkFjdGl2ZVN0b3JhZ2Uuc3RhcnQoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./app/javascript/packs/application.js\n");

/***/ }),

/***/ "./node_modules/@rails/activestorage/app/assets/javascripts/activestorage.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@rails/activestorage/app/assets/javascripts/activestorage.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("(function(global, factory) {\n   true ? factory(exports) : undefined;\n})(this, function(exports) {\n  \"use strict\";\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n  var sparkMd5 = createCommonjsModule(function(module, exports) {\n    (function(factory) {\n      {\n        module.exports = factory();\n      }\n    })(function(undefined) {\n      var hex_chr = [ \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\" ];\n      function md5cycle(x, k) {\n        var a = x[0], b = x[1], c = x[2], d = x[3];\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n      }\n      function md5blk(s) {\n        var md5blks = [], i;\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n      }\n      function md5blk_array(a) {\n        var md5blks = [], i;\n        for (i = 0; i < 64; i += 4) {\n          md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n      }\n      function md51(s) {\n        var n = s.length, state = [ 1732584193, -271733879, -1732584194, 271733878 ], i, length, tail, tmp, lo, hi;\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n        }\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n        if (i > 55) {\n          md5cycle(state, tail);\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n      function md51_array(a) {\n        var n = a.length, state = [ 1732584193, -271733879, -1732584194, 271733878 ], i, length, tail, tmp, lo, hi;\n        for (i = 64; i <= n; i += 64) {\n          md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n        a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0);\n        length = a.length;\n        tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= a[i] << (i % 4 << 3);\n        }\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n        if (i > 55) {\n          md5cycle(state, tail);\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(state, tail);\n        return state;\n      }\n      function rhex(n) {\n        var s = \"\", j;\n        for (j = 0; j < 4; j += 1) {\n          s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15];\n        }\n        return s;\n      }\n      function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n          x[i] = rhex(x[i]);\n        }\n        return x.join(\"\");\n      }\n      if (hex(md51(\"hello\")) !== \"5d41402abc4b2a76b9719d911017c592\") ;\n      if (typeof ArrayBuffer !== \"undefined\" && !ArrayBuffer.prototype.slice) {\n        (function() {\n          function clamp(val, length) {\n            val = val | 0 || 0;\n            if (val < 0) {\n              return Math.max(val + length, 0);\n            }\n            return Math.min(val, length);\n          }\n          ArrayBuffer.prototype.slice = function(from, to) {\n            var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray;\n            if (to !== undefined) {\n              end = clamp(to, length);\n            }\n            if (begin > end) {\n              return new ArrayBuffer(0);\n            }\n            num = end - begin;\n            target = new ArrayBuffer(num);\n            targetArray = new Uint8Array(target);\n            sourceArray = new Uint8Array(this, begin, num);\n            targetArray.set(sourceArray);\n            return target;\n          };\n        })();\n      }\n      function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n          str = unescape(encodeURIComponent(str));\n        }\n        return str;\n      }\n      function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i;\n        for (i = 0; i < length; i += 1) {\n          arr[i] = str.charCodeAt(i);\n        }\n        return returnUInt8Array ? arr : buff;\n      }\n      function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n      }\n      function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n        return returnUInt8Array ? result : result.buffer;\n      }\n      function hexToBinaryString(hex) {\n        var bytes = [], length = hex.length, x;\n        for (x = 0; x < length - 1; x += 2) {\n          bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n        return String.fromCharCode.apply(String, bytes);\n      }\n      function SparkMD5() {\n        this.reset();\n      }\n      SparkMD5.prototype.append = function(str) {\n        this.appendBinary(toUtf8(str));\n        return this;\n      };\n      SparkMD5.prototype.appendBinary = function(contents) {\n        this._buff += contents;\n        this._length += contents.length;\n        var length = this._buff.length, i;\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n        this._buff = this._buff.substring(i - 64);\n        return this;\n      };\n      SparkMD5.prototype.end = function(raw) {\n        var buff = this._buff, length = buff.length, i, tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], ret;\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3);\n        }\n        this._finish(tail, length);\n        ret = hex(this._hash);\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n        this.reset();\n        return ret;\n      };\n      SparkMD5.prototype.reset = function() {\n        this._buff = \"\";\n        this._length = 0;\n        this._hash = [ 1732584193, -271733879, -1732584194, 271733878 ];\n        return this;\n      };\n      SparkMD5.prototype.getState = function() {\n        return {\n          buff: this._buff,\n          length: this._length,\n          hash: this._hash\n        };\n      };\n      SparkMD5.prototype.setState = function(state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n        return this;\n      };\n      SparkMD5.prototype.destroy = function() {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n      };\n      SparkMD5.prototype._finish = function(tail, length) {\n        var i = length, tmp, lo, hi;\n        tail[i >> 2] |= 128 << (i % 4 << 3);\n        if (i > 55) {\n          md5cycle(this._hash, tail);\n          for (i = 0; i < 16; i += 1) {\n            tail[i] = 0;\n          }\n        }\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n      };\n      SparkMD5.hash = function(str, raw) {\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n      };\n      SparkMD5.hashBinary = function(content, raw) {\n        var hash = md51(content), ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n      SparkMD5.ArrayBuffer = function() {\n        this.reset();\n      };\n      SparkMD5.ArrayBuffer.prototype.append = function(arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i;\n        this._length += arr.byteLength;\n        for (i = 64; i <= length; i += 64) {\n          md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n        this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n        return this;\n      };\n      SparkMD5.ArrayBuffer.prototype.end = function(raw) {\n        var buff = this._buff, length = buff.length, tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], i, ret;\n        for (i = 0; i < length; i += 1) {\n          tail[i >> 2] |= buff[i] << (i % 4 << 3);\n        }\n        this._finish(tail, length);\n        ret = hex(this._hash);\n        if (raw) {\n          ret = hexToBinaryString(ret);\n        }\n        this.reset();\n        return ret;\n      };\n      SparkMD5.ArrayBuffer.prototype.reset = function() {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [ 1732584193, -271733879, -1732584194, 271733878 ];\n        return this;\n      };\n      SparkMD5.ArrayBuffer.prototype.getState = function() {\n        var state = SparkMD5.prototype.getState.call(this);\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n        return state;\n      };\n      SparkMD5.ArrayBuffer.prototype.setState = function(state) {\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n        return SparkMD5.prototype.setState.call(this, state);\n      };\n      SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n      SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n      SparkMD5.ArrayBuffer.hash = function(arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)), ret = hex(hash);\n        return raw ? hexToBinaryString(ret) : ret;\n      };\n      return SparkMD5;\n    });\n  });\n  var classCallCheck = function(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n  var createClass = function() {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n    return function(Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n  var fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;\n  var FileChecksum = function() {\n    createClass(FileChecksum, null, [ {\n      key: \"create\",\n      value: function create(file, callback) {\n        var instance = new FileChecksum(file);\n        instance.create(callback);\n      }\n    } ]);\n    function FileChecksum(file) {\n      classCallCheck(this, FileChecksum);\n      this.file = file;\n      this.chunkSize = 2097152;\n      this.chunkCount = Math.ceil(this.file.size / this.chunkSize);\n      this.chunkIndex = 0;\n    }\n    createClass(FileChecksum, [ {\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n        this.callback = callback;\n        this.md5Buffer = new sparkMd5.ArrayBuffer();\n        this.fileReader = new FileReader();\n        this.fileReader.addEventListener(\"load\", function(event) {\n          return _this.fileReaderDidLoad(event);\n        });\n        this.fileReader.addEventListener(\"error\", function(event) {\n          return _this.fileReaderDidError(event);\n        });\n        this.readNextChunk();\n      }\n    }, {\n      key: \"fileReaderDidLoad\",\n      value: function fileReaderDidLoad(event) {\n        this.md5Buffer.append(event.target.result);\n        if (!this.readNextChunk()) {\n          var binaryDigest = this.md5Buffer.end(true);\n          var base64digest = btoa(binaryDigest);\n          this.callback(null, base64digest);\n        }\n      }\n    }, {\n      key: \"fileReaderDidError\",\n      value: function fileReaderDidError(event) {\n        this.callback(\"Error reading \" + this.file.name);\n      }\n    }, {\n      key: \"readNextChunk\",\n      value: function readNextChunk() {\n        if (this.chunkIndex < this.chunkCount || this.chunkIndex == 0 && this.chunkCount == 0) {\n          var start = this.chunkIndex * this.chunkSize;\n          var end = Math.min(start + this.chunkSize, this.file.size);\n          var bytes = fileSlice.call(this.file, start, end);\n          this.fileReader.readAsArrayBuffer(bytes);\n          this.chunkIndex++;\n          return true;\n        } else {\n          return false;\n        }\n      }\n    } ]);\n    return FileChecksum;\n  }();\n  function getMetaValue(name) {\n    var element = findElement(document.head, 'meta[name=\"' + name + '\"]');\n    if (element) {\n      return element.getAttribute(\"content\");\n    }\n  }\n  function findElements(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n    var elements = root.querySelectorAll(selector);\n    return toArray$1(elements);\n  }\n  function findElement(root, selector) {\n    if (typeof root == \"string\") {\n      selector = root;\n      root = document;\n    }\n    return root.querySelector(selector);\n  }\n  function dispatchEvent(element, type) {\n    var eventInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var disabled = element.disabled;\n    var bubbles = eventInit.bubbles, cancelable = eventInit.cancelable, detail = eventInit.detail;\n    var event = document.createEvent(\"Event\");\n    event.initEvent(type, bubbles || true, cancelable || true);\n    event.detail = detail || {};\n    try {\n      element.disabled = false;\n      element.dispatchEvent(event);\n    } finally {\n      element.disabled = disabled;\n    }\n    return event;\n  }\n  function toArray$1(value) {\n    if (Array.isArray(value)) {\n      return value;\n    } else if (Array.from) {\n      return Array.from(value);\n    } else {\n      return [].slice.call(value);\n    }\n  }\n  var BlobRecord = function() {\n    function BlobRecord(file, checksum, url) {\n      var _this = this;\n      classCallCheck(this, BlobRecord);\n      this.file = file;\n      this.attributes = {\n        filename: file.name,\n        content_type: file.type || \"application/octet-stream\",\n        byte_size: file.size,\n        checksum: checksum\n      };\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"POST\", url, true);\n      this.xhr.responseType = \"json\";\n      this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      this.xhr.setRequestHeader(\"Accept\", \"application/json\");\n      this.xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n      var csrfToken = getMetaValue(\"csrf-token\");\n      if (csrfToken != undefined) {\n        this.xhr.setRequestHeader(\"X-CSRF-Token\", csrfToken);\n      }\n      this.xhr.addEventListener(\"load\", function(event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function(event) {\n        return _this.requestDidError(event);\n      });\n    }\n    createClass(BlobRecord, [ {\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(JSON.stringify({\n          blob: this.attributes\n        }));\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        if (this.status >= 200 && this.status < 300) {\n          var response = this.response;\n          var direct_upload = response.direct_upload;\n          delete response.direct_upload;\n          this.attributes = response;\n          this.directUploadData = direct_upload;\n          this.callback(null, this.toJSON());\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error creating Blob for \"' + this.file.name + '\". Status: ' + this.status);\n      }\n    }, {\n      key: \"toJSON\",\n      value: function toJSON() {\n        var result = {};\n        for (var key in this.attributes) {\n          result[key] = this.attributes[key];\n        }\n        return result;\n      }\n    }, {\n      key: \"status\",\n      get: function get$$1() {\n        return this.xhr.status;\n      }\n    }, {\n      key: \"response\",\n      get: function get$$1() {\n        var _xhr = this.xhr, responseType = _xhr.responseType, response = _xhr.response;\n        if (responseType == \"json\") {\n          return response;\n        } else {\n          return JSON.parse(response);\n        }\n      }\n    } ]);\n    return BlobRecord;\n  }();\n  var BlobUpload = function() {\n    function BlobUpload(blob) {\n      var _this = this;\n      classCallCheck(this, BlobUpload);\n      this.blob = blob;\n      this.file = blob.file;\n      var _blob$directUploadDat = blob.directUploadData, url = _blob$directUploadDat.url, headers = _blob$directUploadDat.headers;\n      this.xhr = new XMLHttpRequest();\n      this.xhr.open(\"PUT\", url, true);\n      this.xhr.responseType = \"text\";\n      for (var key in headers) {\n        this.xhr.setRequestHeader(key, headers[key]);\n      }\n      this.xhr.addEventListener(\"load\", function(event) {\n        return _this.requestDidLoad(event);\n      });\n      this.xhr.addEventListener(\"error\", function(event) {\n        return _this.requestDidError(event);\n      });\n    }\n    createClass(BlobUpload, [ {\n      key: \"create\",\n      value: function create(callback) {\n        this.callback = callback;\n        this.xhr.send(this.file.slice());\n      }\n    }, {\n      key: \"requestDidLoad\",\n      value: function requestDidLoad(event) {\n        var _xhr = this.xhr, status = _xhr.status, response = _xhr.response;\n        if (status >= 200 && status < 300) {\n          this.callback(null, response);\n        } else {\n          this.requestDidError(event);\n        }\n      }\n    }, {\n      key: \"requestDidError\",\n      value: function requestDidError(event) {\n        this.callback('Error storing \"' + this.file.name + '\". Status: ' + this.xhr.status);\n      }\n    } ]);\n    return BlobUpload;\n  }();\n  var id = 0;\n  var DirectUpload = function() {\n    function DirectUpload(file, url, delegate) {\n      classCallCheck(this, DirectUpload);\n      this.id = ++id;\n      this.file = file;\n      this.url = url;\n      this.delegate = delegate;\n    }\n    createClass(DirectUpload, [ {\n      key: \"create\",\n      value: function create(callback) {\n        var _this = this;\n        FileChecksum.create(this.file, function(error, checksum) {\n          if (error) {\n            callback(error);\n            return;\n          }\n          var blob = new BlobRecord(_this.file, checksum, _this.url);\n          notify(_this.delegate, \"directUploadWillCreateBlobWithXHR\", blob.xhr);\n          blob.create(function(error) {\n            if (error) {\n              callback(error);\n            } else {\n              var upload = new BlobUpload(blob);\n              notify(_this.delegate, \"directUploadWillStoreFileWithXHR\", upload.xhr);\n              upload.create(function(error) {\n                if (error) {\n                  callback(error);\n                } else {\n                  callback(null, blob.toJSON());\n                }\n              });\n            }\n          });\n        });\n      }\n    } ]);\n    return DirectUpload;\n  }();\n  function notify(object, methodName) {\n    if (object && typeof object[methodName] == \"function\") {\n      for (var _len = arguments.length, messages = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        messages[_key - 2] = arguments[_key];\n      }\n      return object[methodName].apply(object, messages);\n    }\n  }\n  var DirectUploadController = function() {\n    function DirectUploadController(input, file) {\n      classCallCheck(this, DirectUploadController);\n      this.input = input;\n      this.file = file;\n      this.directUpload = new DirectUpload(this.file, this.url, this);\n      this.dispatch(\"initialize\");\n    }\n    createClass(DirectUploadController, [ {\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n        var hiddenInput = document.createElement(\"input\");\n        hiddenInput.type = \"hidden\";\n        hiddenInput.name = this.input.name;\n        this.input.insertAdjacentElement(\"beforebegin\", hiddenInput);\n        this.dispatch(\"start\");\n        this.directUpload.create(function(error, attributes) {\n          if (error) {\n            hiddenInput.parentNode.removeChild(hiddenInput);\n            _this.dispatchError(error);\n          } else {\n            hiddenInput.value = attributes.signed_id;\n          }\n          _this.dispatch(\"end\");\n          callback(error);\n        });\n      }\n    }, {\n      key: \"uploadRequestDidProgress\",\n      value: function uploadRequestDidProgress(event) {\n        var progress = event.loaded / event.total * 100;\n        if (progress) {\n          this.dispatch(\"progress\", {\n            progress: progress\n          });\n        }\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        detail.file = this.file;\n        detail.id = this.directUpload.id;\n        return dispatchEvent(this.input, \"direct-upload:\" + name, {\n          detail: detail\n        });\n      }\n    }, {\n      key: \"dispatchError\",\n      value: function dispatchError(error) {\n        var event = this.dispatch(\"error\", {\n          error: error\n        });\n        if (!event.defaultPrevented) {\n          alert(error);\n        }\n      }\n    }, {\n      key: \"directUploadWillCreateBlobWithXHR\",\n      value: function directUploadWillCreateBlobWithXHR(xhr) {\n        this.dispatch(\"before-blob-request\", {\n          xhr: xhr\n        });\n      }\n    }, {\n      key: \"directUploadWillStoreFileWithXHR\",\n      value: function directUploadWillStoreFileWithXHR(xhr) {\n        var _this2 = this;\n        this.dispatch(\"before-storage-request\", {\n          xhr: xhr\n        });\n        xhr.upload.addEventListener(\"progress\", function(event) {\n          return _this2.uploadRequestDidProgress(event);\n        });\n      }\n    }, {\n      key: \"url\",\n      get: function get$$1() {\n        return this.input.getAttribute(\"data-direct-upload-url\");\n      }\n    } ]);\n    return DirectUploadController;\n  }();\n  var inputSelector = \"input[type=file][data-direct-upload-url]:not([disabled])\";\n  var DirectUploadsController = function() {\n    function DirectUploadsController(form) {\n      classCallCheck(this, DirectUploadsController);\n      this.form = form;\n      this.inputs = findElements(form, inputSelector).filter(function(input) {\n        return input.files.length;\n      });\n    }\n    createClass(DirectUploadsController, [ {\n      key: \"start\",\n      value: function start(callback) {\n        var _this = this;\n        var controllers = this.createDirectUploadControllers();\n        var startNextController = function startNextController() {\n          var controller = controllers.shift();\n          if (controller) {\n            controller.start(function(error) {\n              if (error) {\n                callback(error);\n                _this.dispatch(\"end\");\n              } else {\n                startNextController();\n              }\n            });\n          } else {\n            callback();\n            _this.dispatch(\"end\");\n          }\n        };\n        this.dispatch(\"start\");\n        startNextController();\n      }\n    }, {\n      key: \"createDirectUploadControllers\",\n      value: function createDirectUploadControllers() {\n        var controllers = [];\n        this.inputs.forEach(function(input) {\n          toArray$1(input.files).forEach(function(file) {\n            var controller = new DirectUploadController(input, file);\n            controllers.push(controller);\n          });\n        });\n        return controllers;\n      }\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(name) {\n        var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return dispatchEvent(this.form, \"direct-uploads:\" + name, {\n          detail: detail\n        });\n      }\n    } ]);\n    return DirectUploadsController;\n  }();\n  var processingAttribute = \"data-direct-uploads-processing\";\n  var submitButtonsByForm = new WeakMap();\n  var started = false;\n  function start() {\n    if (!started) {\n      started = true;\n      document.addEventListener(\"click\", didClick, true);\n      document.addEventListener(\"submit\", didSubmitForm);\n      document.addEventListener(\"ajax:before\", didSubmitRemoteElement);\n    }\n  }\n  function didClick(event) {\n    var target = event.target;\n    if ((target.tagName == \"INPUT\" || target.tagName == \"BUTTON\") && target.type == \"submit\" && target.form) {\n      submitButtonsByForm.set(target.form, target);\n    }\n  }\n  function didSubmitForm(event) {\n    handleFormSubmissionEvent(event);\n  }\n  function didSubmitRemoteElement(event) {\n    if (event.target.tagName == \"FORM\") {\n      handleFormSubmissionEvent(event);\n    }\n  }\n  function handleFormSubmissionEvent(event) {\n    var form = event.target;\n    if (form.hasAttribute(processingAttribute)) {\n      event.preventDefault();\n      return;\n    }\n    var controller = new DirectUploadsController(form);\n    var inputs = controller.inputs;\n    if (inputs.length) {\n      event.preventDefault();\n      form.setAttribute(processingAttribute, \"\");\n      inputs.forEach(disable);\n      controller.start(function(error) {\n        form.removeAttribute(processingAttribute);\n        if (error) {\n          inputs.forEach(enable);\n        } else {\n          submitForm(form);\n        }\n      });\n    }\n  }\n  function submitForm(form) {\n    var button = submitButtonsByForm.get(form) || findElement(form, \"input[type=submit], button[type=submit]\");\n    if (button) {\n      var _button = button, disabled = _button.disabled;\n      button.disabled = false;\n      button.focus();\n      button.click();\n      button.disabled = disabled;\n    } else {\n      button = document.createElement(\"input\");\n      button.type = \"submit\";\n      button.style.display = \"none\";\n      form.appendChild(button);\n      button.click();\n      form.removeChild(button);\n    }\n    submitButtonsByForm.delete(form);\n  }\n  function disable(input) {\n    input.disabled = true;\n  }\n  function enable(input) {\n    input.disabled = false;\n  }\n  function autostart() {\n    if (window.ActiveStorage) {\n      start();\n    }\n  }\n  setTimeout(autostart, 1);\n  exports.start = start;\n  exports.DirectUpload = DirectUpload;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHJhaWxzL2FjdGl2ZXN0b3JhZ2UvYXBwL2Fzc2V0cy9qYXZhc2NyaXB0cy9hY3RpdmVzdG9yYWdlLmpzPzMxNjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxFQUFFLEtBQTRELHNCQUFzQixTQUFnSDtBQUNwTSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsWUFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsSUFBSTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLElBQUk7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsWUFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsSUFBSTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNEZBQTRGLGFBQWE7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9AcmFpbHMvYWN0aXZlc3RvcmFnZS9hcHAvYXNzZXRzL2phdmFzY3JpcHRzL2FjdGl2ZXN0b3JhZ2UuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgPyBmYWN0b3J5KGV4cG9ydHMpIDogdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWyBcImV4cG9ydHNcIiBdLCBmYWN0b3J5KSA6IGZhY3RvcnkoZ2xvYmFsLkFjdGl2ZVN0b3JhZ2UgPSB7fSk7XG59KSh0aGlzLCBmdW5jdGlvbihleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICBmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7XG4gICAgcmV0dXJuIG1vZHVsZSA9IHtcbiAgICAgIGV4cG9ydHM6IHt9XG4gICAgfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xuICB9XG4gIHZhciBzcGFya01kNSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuICAgIChmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgICB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgICAgfVxuICAgIH0pKGZ1bmN0aW9uKHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGhleF9jaHIgPSBbIFwiMFwiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJlXCIsIFwiZlwiIF07XG4gICAgICBmdW5jdGlvbiBtZDVjeWNsZSh4LCBrKSB7XG4gICAgICAgIHZhciBhID0geFswXSwgYiA9IHhbMV0sIGMgPSB4WzJdLCBkID0geFszXTtcbiAgICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1swXSAtIDY4MDg3NjkzNiB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgJiBiIHwgfmEgJiBjKSArIGtbMV0gLSAzODk1NjQ1ODYgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1syXSArIDYwNjEwNTgxOSB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzNdIC0gMTA0NDUyNTMzMCB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgfCAwO1xuICAgICAgICBhICs9IChiICYgYyB8IH5iICYgZCkgKyBrWzRdIC0gMTc2NDE4ODk3IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1s1XSArIDEyMDAwODA0MjYgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1s2XSAtIDE0NzMyMzEzNDEgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1s3XSAtIDQ1NzA1OTgzIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgJiBjIHwgfmIgJiBkKSArIGtbOF0gKyAxNzcwMDM1NDE2IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1s5XSAtIDE5NTg0MTQ0MTcgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1sxMF0gLSA0MjA2MyB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzExXSAtIDE5OTA0MDQxNjIgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1sxMl0gKyAxODA0NjAzNjgyIHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1sxM10gLSA0MDM0MTEwMSB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkICYgYSB8IH5kICYgYikgKyBrWzE0XSAtIDE1MDIwMDIyOTAgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1sxNV0gKyAxMjM2NTM1MzI5IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbMV0gLSAxNjU3OTY1MTAgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgfCAwO1xuICAgICAgICBkICs9IChhICYgYyB8IGIgJiB+YykgKyBrWzZdIC0gMTA2OTUwMTYzMiB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbMTFdICsgNjQzNzE3NzEzIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbMF0gLSAzNzM4OTczMDIgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1s1XSAtIDcwMTU1ODY5MSB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbMTBdICsgMzgwMTYwODMgfCAwO1xuICAgICAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkICYgYiB8IGEgJiB+YikgKyBrWzE1XSAtIDY2MDQ3ODMzNSB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNCB8IGMgPj4+IDE4KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjICYgYSB8IGQgJiB+YSkgKyBrWzRdIC0gNDA1NTM3ODQ4IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbOV0gKyA1Njg0NDY0MzggfCAwO1xuICAgICAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgfCAwO1xuICAgICAgICBkICs9IChhICYgYyB8IGIgJiB+YykgKyBrWzE0XSAtIDEwMTk4MDM2OTAgfCAwO1xuICAgICAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkICYgYiB8IGEgJiB+YikgKyBrWzNdIC0gMTg3MzYzOTYxIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbOF0gKyAxMTYzNTMxNTAxIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgJiBkIHwgYyAmIH5kKSArIGtbMTNdIC0gMTQ0NDY4MTQ2NyB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbMl0gLSA1MTQwMzc4NCB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbN10gKyAxNzM1MzI4NDczIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbMTJdIC0gMTkyNjYwNzczNCB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgfCAwO1xuICAgICAgICBhICs9IChiIF4gYyBeIGQpICsga1s1XSAtIDM3ODU1OCB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgXiBiIF4gYykgKyBrWzhdIC0gMjAyMjU3NDQ2MyB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkIF4gYSBeIGIpICsga1sxMV0gKyAxODM5MDMwNTYyIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzE0XSAtIDM1MzA5NTU2IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbMV0gLSAxNTMwOTkyMDYwIHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbNF0gKyAxMjcyODkzMzUzIHwgMDtcbiAgICAgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGQgXiBhIF4gYikgKyBrWzddIC0gMTU1NDk3NjMyIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzEwXSAtIDEwOTQ3MzA2NDAgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjMgfCBiID4+PiA5KSArIGMgfCAwO1xuICAgICAgICBhICs9IChiIF4gYyBeIGQpICsga1sxM10gKyA2ODEyNzkxNzQgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgICBkICs9IChhIF4gYiBeIGMpICsga1swXSAtIDM1ODUzNzIyMiB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkIF4gYSBeIGIpICsga1szXSAtIDcyMjUyMTk3OSB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjIF4gZCBeIGEpICsga1s2XSArIDc2MDI5MTg5IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbOV0gLSA2NDAzNjQ0ODcgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgICBkICs9IChhIF4gYiBeIGMpICsga1sxMl0gLSA0MjE4MTU4MzUgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbMTVdICsgNTMwNzQyNTIwIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgXiBkIF4gYSkgKyBrWzJdIC0gOTk1MzM4NjUxIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbMF0gLSAxOTg2MzA4NDQgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1s3XSArIDExMjY4OTE0MTUgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMTRdIC0gMTQxNjM1NDkwNSB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1s1XSAtIDU3NDM0MDU1IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBrWzEyXSArIDE3MDA0ODU1NzEgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1szXSAtIDE4OTQ5ODY2MDYgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMTBdIC0gMTA1MTUyMyB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1sxXSAtIDIwNTQ5MjI3OTkgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbOF0gKyAxODczMzEzMzU5IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGtbMTVdIC0gMzA2MTE3NDQgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbNl0gLSAxNTYwMTk4MzgwIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzEzXSArIDEzMDkxNTE2NDkgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbNF0gLSAxNDU1MjMwNzAgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1sxMV0gLSAxMTIwMjEwMzc5IHwgMDtcbiAgICAgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBrWzJdICsgNzE4Nzg3MjU5IHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzldIC0gMzQzNDg1NTUxIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICAgIHhbMF0gPSBhICsgeFswXSB8IDA7XG4gICAgICAgIHhbMV0gPSBiICsgeFsxXSB8IDA7XG4gICAgICAgIHhbMl0gPSBjICsgeFsyXSB8IDA7XG4gICAgICAgIHhbM10gPSBkICsgeFszXSB8IDA7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBtZDVibGsocykge1xuICAgICAgICB2YXIgbWQ1YmxrcyA9IFtdLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xuICAgICAgICAgIG1kNWJsa3NbaSA+PiAyXSA9IHMuY2hhckNvZGVBdChpKSArIChzLmNoYXJDb2RlQXQoaSArIDEpIDw8IDgpICsgKHMuY2hhckNvZGVBdChpICsgMikgPDwgMTYpICsgKHMuY2hhckNvZGVBdChpICsgMykgPDwgMjQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZDVibGtzO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbWQ1YmxrX2FycmF5KGEpIHtcbiAgICAgICAgdmFyIG1kNWJsa3MgPSBbXSwgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDY0OyBpICs9IDQpIHtcbiAgICAgICAgICBtZDVibGtzW2kgPj4gMl0gPSBhW2ldICsgKGFbaSArIDFdIDw8IDgpICsgKGFbaSArIDJdIDw8IDE2KSArIChhW2kgKyAzXSA8PCAyNCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1kNWJsa3M7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBtZDUxKHMpIHtcbiAgICAgICAgdmFyIG4gPSBzLmxlbmd0aCwgc3RhdGUgPSBbIDE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzggXSwgaSwgbGVuZ3RoLCB0YWlsLCB0bXAsIGxvLCBoaTtcbiAgICAgICAgZm9yIChpID0gNjQ7IGkgPD0gbjsgaSArPSA2NCkge1xuICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGsocy5zdWJzdHJpbmcoaSAtIDY0LCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBzLnN1YnN0cmluZyhpIC0gNjQpO1xuICAgICAgICBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICAgICAgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICB0YWlsW2kgPj4gMl0gfD0gcy5jaGFyQ29kZUF0KGkpIDw8IChpICUgNCA8PCAzKTtcbiAgICAgICAgfVxuICAgICAgICB0YWlsW2kgPj4gMl0gfD0gMTI4IDw8IChpICUgNCA8PCAzKTtcbiAgICAgICAgaWYgKGkgPiA1NSkge1xuICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xuICAgICAgICAgICAgdGFpbFtpXSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRtcCA9IG4gKiA4O1xuICAgICAgICB0bXAgPSB0bXAudG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgICBsbyA9IHBhcnNlSW50KHRtcFsyXSwgMTYpO1xuICAgICAgICBoaSA9IHBhcnNlSW50KHRtcFsxXSwgMTYpIHx8IDA7XG4gICAgICAgIHRhaWxbMTRdID0gbG87XG4gICAgICAgIHRhaWxbMTVdID0gaGk7XG4gICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbWQ1MV9hcnJheShhKSB7XG4gICAgICAgIHZhciBuID0gYS5sZW5ndGgsIHN0YXRlID0gWyAxNzMyNTg0MTkzLCAtMjcxNzMzODc5LCAtMTczMjU4NDE5NCwgMjcxNzMzODc4IF0sIGksIGxlbmd0aCwgdGFpbCwgdG1wLCBsbywgaGk7XG4gICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcbiAgICAgICAgICBtZDVjeWNsZShzdGF0ZSwgbWQ1YmxrX2FycmF5KGEuc3ViYXJyYXkoaSAtIDY0LCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGEgPSBpIC0gNjQgPCBuID8gYS5zdWJhcnJheShpIC0gNjQpIDogbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgICB0YWlsID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF07XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBhW2ldIDw8IChpICUgNCA8PCAzKTtcbiAgICAgICAgfVxuICAgICAgICB0YWlsW2kgPj4gMl0gfD0gMTI4IDw8IChpICUgNCA8PCAzKTtcbiAgICAgICAgaWYgKGkgPiA1NSkge1xuICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xuICAgICAgICAgICAgdGFpbFtpXSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRtcCA9IG4gKiA4O1xuICAgICAgICB0bXAgPSB0bXAudG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgICBsbyA9IHBhcnNlSW50KHRtcFsyXSwgMTYpO1xuICAgICAgICBoaSA9IHBhcnNlSW50KHRtcFsxXSwgMTYpIHx8IDA7XG4gICAgICAgIHRhaWxbMTRdID0gbG87XG4gICAgICAgIHRhaWxbMTVdID0gaGk7XG4gICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmhleChuKSB7XG4gICAgICAgIHZhciBzID0gXCJcIiwgajtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IDQ7IGogKz0gMSkge1xuICAgICAgICAgIHMgKz0gaGV4X2NocltuID4+IGogKiA4ICsgNCAmIDE1XSArIGhleF9jaHJbbiA+PiBqICogOCAmIDE1XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGhleCh4KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIHhbaV0gPSByaGV4KHhbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4LmpvaW4oXCJcIik7XG4gICAgICB9XG4gICAgICBpZiAoaGV4KG1kNTEoXCJoZWxsb1wiKSkgIT09IFwiNWQ0MTQwMmFiYzRiMmE3NmI5NzE5ZDkxMTAxN2M1OTJcIikgO1xuICAgICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlKSB7XG4gICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICBmdW5jdGlvbiBjbGFtcCh2YWwsIGxlbmd0aCkge1xuICAgICAgICAgICAgdmFsID0gdmFsIHwgMCB8fCAwO1xuICAgICAgICAgICAgaWYgKHZhbCA8IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHZhbCArIGxlbmd0aCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odmFsLCBsZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuYnl0ZUxlbmd0aCwgYmVnaW4gPSBjbGFtcChmcm9tLCBsZW5ndGgpLCBlbmQgPSBsZW5ndGgsIG51bSwgdGFyZ2V0LCB0YXJnZXRBcnJheSwgc291cmNlQXJyYXk7XG4gICAgICAgICAgICBpZiAodG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBlbmQgPSBjbGFtcCh0bywgbGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiZWdpbiA+IGVuZCkge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnVtID0gZW5kIC0gYmVnaW47XG4gICAgICAgICAgICB0YXJnZXQgPSBuZXcgQXJyYXlCdWZmZXIobnVtKTtcbiAgICAgICAgICAgIHRhcmdldEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgIHNvdXJjZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGhpcywgYmVnaW4sIG51bSk7XG4gICAgICAgICAgICB0YXJnZXRBcnJheS5zZXQoc291cmNlQXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICB9O1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdG9VdGY4KHN0cikge1xuICAgICAgICBpZiAoL1tcXHUwMDgwLVxcdUZGRkZdLy50ZXN0KHN0cikpIHtcbiAgICAgICAgICBzdHIgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHV0ZjhTdHIyQXJyYXlCdWZmZXIoc3RyLCByZXR1cm5VSW50OEFycmF5KSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBzdHIubGVuZ3RoLCBidWZmID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCksIGFyciA9IG5ldyBVaW50OEFycmF5KGJ1ZmYpLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBhcnJbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0dXJuVUludDhBcnJheSA/IGFyciA6IGJ1ZmY7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBhcnJheUJ1ZmZlcjJVdGY4U3RyKGJ1ZmYpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmZikpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY29uY2F0ZW5hdGVBcnJheUJ1ZmZlcnMoZmlyc3QsIHNlY29uZCwgcmV0dXJuVUludDhBcnJheSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoZmlyc3QuYnl0ZUxlbmd0aCArIHNlY29uZC5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmVzdWx0LnNldChuZXcgVWludDhBcnJheShmaXJzdCkpO1xuICAgICAgICByZXN1bHQuc2V0KG5ldyBVaW50OEFycmF5KHNlY29uZCksIGZpcnN0LmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXR1cm4gcmV0dXJuVUludDhBcnJheSA/IHJlc3VsdCA6IHJlc3VsdC5idWZmZXI7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBoZXhUb0JpbmFyeVN0cmluZyhoZXgpIHtcbiAgICAgICAgdmFyIGJ5dGVzID0gW10sIGxlbmd0aCA9IGhleC5sZW5ndGgsIHg7XG4gICAgICAgIGZvciAoeCA9IDA7IHggPCBsZW5ndGggLSAxOyB4ICs9IDIpIHtcbiAgICAgICAgICBieXRlcy5wdXNoKHBhcnNlSW50KGhleC5zdWJzdHIoeCwgMiksIDE2KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBieXRlcyk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBTcGFya01ENSgpIHtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgfVxuICAgICAgU3BhcmtNRDUucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICB0aGlzLmFwcGVuZEJpbmFyeSh0b1V0Zjgoc3RyKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5hcHBlbmRCaW5hcnkgPSBmdW5jdGlvbihjb250ZW50cykge1xuICAgICAgICB0aGlzLl9idWZmICs9IGNvbnRlbnRzO1xuICAgICAgICB0aGlzLl9sZW5ndGggKz0gY29udGVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5fYnVmZi5sZW5ndGgsIGk7XG4gICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IGxlbmd0aDsgaSArPSA2NCkge1xuICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX2hhc2gsIG1kNWJsayh0aGlzLl9idWZmLnN1YnN0cmluZyhpIC0gNjQsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYnVmZiA9IHRoaXMuX2J1ZmYuc3Vic3RyaW5nKGkgLSA2NCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihyYXcpIHtcbiAgICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9idWZmLCBsZW5ndGggPSBidWZmLmxlbmd0aCwgaSwgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdLCByZXQ7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBidWZmLmNoYXJDb2RlQXQoaSkgPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpbmlzaCh0YWlsLCBsZW5ndGgpO1xuICAgICAgICByZXQgPSBoZXgodGhpcy5faGFzaCk7XG4gICAgICAgIGlmIChyYXcpIHtcbiAgICAgICAgICByZXQgPSBoZXhUb0JpbmFyeVN0cmluZyhyZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH07XG4gICAgICBTcGFya01ENS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fYnVmZiA9IFwiXCI7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2hhc2ggPSBbIDE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzggXTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgU3BhcmtNRDUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYnVmZjogdGhpcy5fYnVmZixcbiAgICAgICAgICBsZW5ndGg6IHRoaXMuX2xlbmd0aCxcbiAgICAgICAgICBoYXNoOiB0aGlzLl9oYXNoXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgU3BhcmtNRDUucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgdGhpcy5fYnVmZiA9IHN0YXRlLmJ1ZmY7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHN0YXRlLmxlbmd0aDtcbiAgICAgICAgdGhpcy5faGFzaCA9IHN0YXRlLmhhc2g7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9oYXNoO1xuICAgICAgICBkZWxldGUgdGhpcy5fYnVmZjtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2xlbmd0aDtcbiAgICAgIH07XG4gICAgICBTcGFya01ENS5wcm90b3R5cGUuX2ZpbmlzaCA9IGZ1bmN0aW9uKHRhaWwsIGxlbmd0aCkge1xuICAgICAgICB2YXIgaSA9IGxlbmd0aCwgdG1wLCBsbywgaGk7XG4gICAgICAgIHRhaWxbaSA+PiAyXSB8PSAxMjggPDwgKGkgJSA0IDw8IDMpO1xuICAgICAgICBpZiAoaSA+IDU1KSB7XG4gICAgICAgICAgbWQ1Y3ljbGUodGhpcy5faGFzaCwgdGFpbCk7XG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IDE2OyBpICs9IDEpIHtcbiAgICAgICAgICAgIHRhaWxbaV0gPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0bXAgPSB0aGlzLl9sZW5ndGggKiA4O1xuICAgICAgICB0bXAgPSB0bXAudG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgICBsbyA9IHBhcnNlSW50KHRtcFsyXSwgMTYpO1xuICAgICAgICBoaSA9IHBhcnNlSW50KHRtcFsxXSwgMTYpIHx8IDA7XG4gICAgICAgIHRhaWxbMTRdID0gbG87XG4gICAgICAgIHRhaWxbMTVdID0gaGk7XG4gICAgICAgIG1kNWN5Y2xlKHRoaXMuX2hhc2gsIHRhaWwpO1xuICAgICAgfTtcbiAgICAgIFNwYXJrTUQ1Lmhhc2ggPSBmdW5jdGlvbihzdHIsIHJhdykge1xuICAgICAgICByZXR1cm4gU3BhcmtNRDUuaGFzaEJpbmFyeSh0b1V0Zjgoc3RyKSwgcmF3KTtcbiAgICAgIH07XG4gICAgICBTcGFya01ENS5oYXNoQmluYXJ5ID0gZnVuY3Rpb24oY29udGVudCwgcmF3KSB7XG4gICAgICAgIHZhciBoYXNoID0gbWQ1MShjb250ZW50KSwgcmV0ID0gaGV4KGhhc2gpO1xuICAgICAgICByZXR1cm4gcmF3ID8gaGV4VG9CaW5hcnlTdHJpbmcocmV0KSA6IHJldDtcbiAgICAgIH07XG4gICAgICBTcGFya01ENS5BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICB9O1xuICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKGFycikge1xuICAgICAgICB2YXIgYnVmZiA9IGNvbmNhdGVuYXRlQXJyYXlCdWZmZXJzKHRoaXMuX2J1ZmYuYnVmZmVyLCBhcnIsIHRydWUpLCBsZW5ndGggPSBidWZmLmxlbmd0aCwgaTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IGFyci5ieXRlTGVuZ3RoO1xuICAgICAgICBmb3IgKGkgPSA2NDsgaSA8PSBsZW5ndGg7IGkgKz0gNjQpIHtcbiAgICAgICAgICBtZDVjeWNsZSh0aGlzLl9oYXNoLCBtZDVibGtfYXJyYXkoYnVmZi5zdWJhcnJheShpIC0gNjQsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYnVmZiA9IGkgLSA2NCA8IGxlbmd0aCA/IG5ldyBVaW50OEFycmF5KGJ1ZmYuYnVmZmVyLnNsaWNlKGkgLSA2NCkpIDogbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihyYXcpIHtcbiAgICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9idWZmLCBsZW5ndGggPSBidWZmLmxlbmd0aCwgdGFpbCA9IFsgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCBdLCBpLCByZXQ7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBidWZmW2ldIDw8IChpICUgNCA8PCAzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcbiAgICAgICAgcmV0ID0gaGV4KHRoaXMuX2hhc2gpO1xuICAgICAgICBpZiAocmF3KSB7XG4gICAgICAgICAgcmV0ID0gaGV4VG9CaW5hcnlTdHJpbmcocmV0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuX2J1ZmYgPSBuZXcgVWludDhBcnJheSgwKTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5faGFzaCA9IFsgMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OCBdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gU3BhcmtNRDUucHJvdG90eXBlLmdldFN0YXRlLmNhbGwodGhpcyk7XG4gICAgICAgIHN0YXRlLmJ1ZmYgPSBhcnJheUJ1ZmZlcjJVdGY4U3RyKHN0YXRlLmJ1ZmYpO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9O1xuICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgc3RhdGUuYnVmZiA9IHV0ZjhTdHIyQXJyYXlCdWZmZXIoc3RhdGUuYnVmZiwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBTcGFya01ENS5wcm90b3R5cGUuc2V0U3RhdGUuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgICB9O1xuICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBTcGFya01ENS5wcm90b3R5cGUuZGVzdHJveTtcbiAgICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5fZmluaXNoID0gU3BhcmtNRDUucHJvdG90eXBlLl9maW5pc2g7XG4gICAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5oYXNoID0gZnVuY3Rpb24oYXJyLCByYXcpIHtcbiAgICAgICAgdmFyIGhhc2ggPSBtZDUxX2FycmF5KG5ldyBVaW50OEFycmF5KGFycikpLCByZXQgPSBoZXgoaGFzaCk7XG4gICAgICAgIHJldHVybiByYXcgPyBoZXhUb0JpbmFyeVN0cmluZyhyZXQpIDogcmV0O1xuICAgICAgfTtcbiAgICAgIHJldHVybiBTcGFya01ENTtcbiAgICB9KTtcbiAgfSk7XG4gIHZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgfTtcbiAgdmFyIGNyZWF0ZUNsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICB9O1xuICB9KCk7XG4gIHZhciBmaWxlU2xpY2UgPSBGaWxlLnByb3RvdHlwZS5zbGljZSB8fCBGaWxlLnByb3RvdHlwZS5tb3pTbGljZSB8fCBGaWxlLnByb3RvdHlwZS53ZWJraXRTbGljZTtcbiAgdmFyIEZpbGVDaGVja3N1bSA9IGZ1bmN0aW9uKCkge1xuICAgIGNyZWF0ZUNsYXNzKEZpbGVDaGVja3N1bSwgbnVsbCwgWyB7XG4gICAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBGaWxlQ2hlY2tzdW0oZmlsZSk7XG4gICAgICAgIGluc3RhbmNlLmNyZWF0ZShjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfSBdKTtcbiAgICBmdW5jdGlvbiBGaWxlQ2hlY2tzdW0oZmlsZSkge1xuICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZUNoZWNrc3VtKTtcbiAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgICB0aGlzLmNodW5rU2l6ZSA9IDIwOTcxNTI7XG4gICAgICB0aGlzLmNodW5rQ291bnQgPSBNYXRoLmNlaWwodGhpcy5maWxlLnNpemUgLyB0aGlzLmNodW5rU2l6ZSk7XG4gICAgICB0aGlzLmNodW5rSW5kZXggPSAwO1xuICAgIH1cbiAgICBjcmVhdGVDbGFzcyhGaWxlQ2hlY2tzdW0sIFsge1xuICAgICAga2V5OiBcImNyZWF0ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMubWQ1QnVmZmVyID0gbmV3IHNwYXJrTWQ1LkFycmF5QnVmZmVyKCk7XG4gICAgICAgIHRoaXMuZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHRoaXMuZmlsZVJlYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5maWxlUmVhZGVyRGlkTG9hZChldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmZpbGVSZWFkZXJEaWRFcnJvcihldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlYWROZXh0Q2h1bmsoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZmlsZVJlYWRlckRpZExvYWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxlUmVhZGVyRGlkTG9hZChldmVudCkge1xuICAgICAgICB0aGlzLm1kNUJ1ZmZlci5hcHBlbmQoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgIGlmICghdGhpcy5yZWFkTmV4dENodW5rKCkpIHtcbiAgICAgICAgICB2YXIgYmluYXJ5RGlnZXN0ID0gdGhpcy5tZDVCdWZmZXIuZW5kKHRydWUpO1xuICAgICAgICAgIHZhciBiYXNlNjRkaWdlc3QgPSBidG9hKGJpbmFyeURpZ2VzdCk7XG4gICAgICAgICAgdGhpcy5jYWxsYmFjayhudWxsLCBiYXNlNjRkaWdlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImZpbGVSZWFkZXJEaWRFcnJvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGVSZWFkZXJEaWRFcnJvcihldmVudCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrKFwiRXJyb3IgcmVhZGluZyBcIiArIHRoaXMuZmlsZS5uYW1lKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVhZE5leHRDaHVua1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWROZXh0Q2h1bmsoKSB7XG4gICAgICAgIGlmICh0aGlzLmNodW5rSW5kZXggPCB0aGlzLmNodW5rQ291bnQgfHwgdGhpcy5jaHVua0luZGV4ID09IDAgJiYgdGhpcy5jaHVua0NvdW50ID09IDApIHtcbiAgICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmNodW5rSW5kZXggKiB0aGlzLmNodW5rU2l6ZTtcbiAgICAgICAgICB2YXIgZW5kID0gTWF0aC5taW4oc3RhcnQgKyB0aGlzLmNodW5rU2l6ZSwgdGhpcy5maWxlLnNpemUpO1xuICAgICAgICAgIHZhciBieXRlcyA9IGZpbGVTbGljZS5jYWxsKHRoaXMuZmlsZSwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgdGhpcy5maWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJ5dGVzKTtcbiAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IF0pO1xuICAgIHJldHVybiBGaWxlQ2hlY2tzdW07XG4gIH0oKTtcbiAgZnVuY3Rpb24gZ2V0TWV0YVZhbHVlKG5hbWUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGZpbmRFbGVtZW50KGRvY3VtZW50LmhlYWQsICdtZXRhW25hbWU9XCInICsgbmFtZSArICdcIl0nKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZmluZEVsZW1lbnRzKHJvb3QsIHNlbGVjdG9yKSB7XG4gICAgaWYgKHR5cGVvZiByb290ID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHNlbGVjdG9yID0gcm9vdDtcbiAgICAgIHJvb3QgPSBkb2N1bWVudDtcbiAgICB9XG4gICAgdmFyIGVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICByZXR1cm4gdG9BcnJheSQxKGVsZW1lbnRzKTtcbiAgfVxuICBmdW5jdGlvbiBmaW5kRWxlbWVudChyb290LCBzZWxlY3Rvcikge1xuICAgIGlmICh0eXBlb2Ygcm9vdCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICBzZWxlY3RvciA9IHJvb3Q7XG4gICAgICByb290ID0gZG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiByb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQoZWxlbWVudCwgdHlwZSkge1xuICAgIHZhciBldmVudEluaXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIHZhciBkaXNhYmxlZCA9IGVsZW1lbnQuZGlzYWJsZWQ7XG4gICAgdmFyIGJ1YmJsZXMgPSBldmVudEluaXQuYnViYmxlcywgY2FuY2VsYWJsZSA9IGV2ZW50SW5pdC5jYW5jZWxhYmxlLCBkZXRhaWwgPSBldmVudEluaXQuZGV0YWlsO1xuICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIGJ1YmJsZXMgfHwgdHJ1ZSwgY2FuY2VsYWJsZSB8fCB0cnVlKTtcbiAgICBldmVudC5kZXRhaWwgPSBkZXRhaWwgfHwge307XG4gICAgdHJ5IHtcbiAgICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG4gIGZ1bmN0aW9uIHRvQXJyYXkkMSh2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuZnJvbSkge1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20odmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW10uc2xpY2UuY2FsbCh2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHZhciBCbG9iUmVjb3JkID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQmxvYlJlY29yZChmaWxlLCBjaGVja3N1bSwgdXJsKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQmxvYlJlY29yZCk7XG4gICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzID0ge1xuICAgICAgICBmaWxlbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBjb250ZW50X3R5cGU6IGZpbGUudHlwZSB8fCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLFxuICAgICAgICBieXRlX3NpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgY2hlY2tzdW06IGNoZWNrc3VtXG4gICAgICB9O1xuICAgICAgdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHRoaXMueGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICB0aGlzLnhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1SZXF1ZXN0ZWQtV2l0aFwiLCBcIlhNTEh0dHBSZXF1ZXN0XCIpO1xuICAgICAgdmFyIGNzcmZUb2tlbiA9IGdldE1ldGFWYWx1ZShcImNzcmYtdG9rZW5cIik7XG4gICAgICBpZiAoY3NyZlRva2VuICE9IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1DU1JGLVRva2VuXCIsIGNzcmZUb2tlbik7XG4gICAgICB9XG4gICAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucmVxdWVzdERpZExvYWQoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnJlcXVlc3REaWRFcnJvcihldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlQ2xhc3MoQmxvYlJlY29yZCwgWyB7XG4gICAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy54aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYmxvYjogdGhpcy5hdHRyaWJ1dGVzXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVxdWVzdERpZExvYWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0RGlkTG9hZChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgICAgICB2YXIgZGlyZWN0X3VwbG9hZCA9IHJlc3BvbnNlLmRpcmVjdF91cGxvYWQ7XG4gICAgICAgICAgZGVsZXRlIHJlc3BvbnNlLmRpcmVjdF91cGxvYWQ7XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gcmVzcG9uc2U7XG4gICAgICAgICAgdGhpcy5kaXJlY3RVcGxvYWREYXRhID0gZGlyZWN0X3VwbG9hZDtcbiAgICAgICAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHRoaXMudG9KU09OKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVxdWVzdERpZEVycm9yKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZXF1ZXN0RGlkRXJyb3JcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0RGlkRXJyb3IoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjaygnRXJyb3IgY3JlYXRpbmcgQmxvYiBmb3IgXCInICsgdGhpcy5maWxlLm5hbWUgKyAnXCIuIFN0YXR1czogJyArIHRoaXMuc3RhdHVzKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidG9KU09OXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHRoaXMuYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInN0YXR1c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhoci5zdGF0dXM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlc3BvbnNlXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgdmFyIF94aHIgPSB0aGlzLnhociwgcmVzcG9uc2VUeXBlID0gX3hoci5yZXNwb25zZVR5cGUsIHJlc3BvbnNlID0gX3hoci5yZXNwb25zZTtcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSA9PSBcImpzb25cIikge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IF0pO1xuICAgIHJldHVybiBCbG9iUmVjb3JkO1xuICB9KCk7XG4gIHZhciBCbG9iVXBsb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQmxvYlVwbG9hZChibG9iKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQmxvYlVwbG9hZCk7XG4gICAgICB0aGlzLmJsb2IgPSBibG9iO1xuICAgICAgdGhpcy5maWxlID0gYmxvYi5maWxlO1xuICAgICAgdmFyIF9ibG9iJGRpcmVjdFVwbG9hZERhdCA9IGJsb2IuZGlyZWN0VXBsb2FkRGF0YSwgdXJsID0gX2Jsb2IkZGlyZWN0VXBsb2FkRGF0LnVybCwgaGVhZGVycyA9IF9ibG9iJGRpcmVjdFVwbG9hZERhdC5oZWFkZXJzO1xuICAgICAgdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHRoaXMueGhyLm9wZW4oXCJQVVRcIiwgdXJsLCB0cnVlKTtcbiAgICAgIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9IFwidGV4dFwiO1xuICAgICAgZm9yICh2YXIga2V5IGluIGhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7XG4gICAgICB9XG4gICAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucmVxdWVzdERpZExvYWQoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnJlcXVlc3REaWRFcnJvcihldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlQ2xhc3MoQmxvYlVwbG9hZCwgWyB7XG4gICAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy54aHIuc2VuZCh0aGlzLmZpbGUuc2xpY2UoKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlcXVlc3REaWRMb2FkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdERpZExvYWQoZXZlbnQpIHtcbiAgICAgICAgdmFyIF94aHIgPSB0aGlzLnhociwgc3RhdHVzID0gX3hoci5zdGF0dXMsIHJlc3BvbnNlID0gX3hoci5yZXNwb25zZTtcbiAgICAgICAgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgdGhpcy5jYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0RGlkRXJyb3IoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlcXVlc3REaWRFcnJvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3REaWRFcnJvcihldmVudCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrKCdFcnJvciBzdG9yaW5nIFwiJyArIHRoaXMuZmlsZS5uYW1lICsgJ1wiLiBTdGF0dXM6ICcgKyB0aGlzLnhoci5zdGF0dXMpO1xuICAgICAgfVxuICAgIH0gXSk7XG4gICAgcmV0dXJuIEJsb2JVcGxvYWQ7XG4gIH0oKTtcbiAgdmFyIGlkID0gMDtcbiAgdmFyIERpcmVjdFVwbG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIERpcmVjdFVwbG9hZChmaWxlLCB1cmwsIGRlbGVnYXRlKSB7XG4gICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBEaXJlY3RVcGxvYWQpO1xuICAgICAgdGhpcy5pZCA9ICsraWQ7XG4gICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgfVxuICAgIGNyZWF0ZUNsYXNzKERpcmVjdFVwbG9hZCwgWyB7XG4gICAgICBrZXk6IFwiY3JlYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIEZpbGVDaGVja3N1bS5jcmVhdGUodGhpcy5maWxlLCBmdW5jdGlvbihlcnJvciwgY2hlY2tzdW0pIHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYlJlY29yZChfdGhpcy5maWxlLCBjaGVja3N1bSwgX3RoaXMudXJsKTtcbiAgICAgICAgICBub3RpZnkoX3RoaXMuZGVsZWdhdGUsIFwiZGlyZWN0VXBsb2FkV2lsbENyZWF0ZUJsb2JXaXRoWEhSXCIsIGJsb2IueGhyKTtcbiAgICAgICAgICBibG9iLmNyZWF0ZShmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciB1cGxvYWQgPSBuZXcgQmxvYlVwbG9hZChibG9iKTtcbiAgICAgICAgICAgICAgbm90aWZ5KF90aGlzLmRlbGVnYXRlLCBcImRpcmVjdFVwbG9hZFdpbGxTdG9yZUZpbGVXaXRoWEhSXCIsIHVwbG9hZC54aHIpO1xuICAgICAgICAgICAgICB1cGxvYWQuY3JlYXRlKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJsb2IudG9KU09OKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gXSk7XG4gICAgcmV0dXJuIERpcmVjdFVwbG9hZDtcbiAgfSgpO1xuICBmdW5jdGlvbiBub3RpZnkob2JqZWN0LCBtZXRob2ROYW1lKSB7XG4gICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W21ldGhvZE5hbWVdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lc3NhZ2VzID0gQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBtZXNzYWdlc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0W21ldGhvZE5hbWVdLmFwcGx5KG9iamVjdCwgbWVzc2FnZXMpO1xuICAgIH1cbiAgfVxuICB2YXIgRGlyZWN0VXBsb2FkQ29udHJvbGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIERpcmVjdFVwbG9hZENvbnRyb2xsZXIoaW5wdXQsIGZpbGUpIHtcbiAgICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIERpcmVjdFVwbG9hZENvbnRyb2xsZXIpO1xuICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgIHRoaXMuZGlyZWN0VXBsb2FkID0gbmV3IERpcmVjdFVwbG9hZCh0aGlzLmZpbGUsIHRoaXMudXJsLCB0aGlzKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2goXCJpbml0aWFsaXplXCIpO1xuICAgIH1cbiAgICBjcmVhdGVDbGFzcyhEaXJlY3RVcGxvYWRDb250cm9sbGVyLCBbIHtcbiAgICAgIGtleTogXCJzdGFydFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBoaWRkZW5JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaGlkZGVuSW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGhpZGRlbklucHV0Lm5hbWUgPSB0aGlzLmlucHV0Lm5hbWU7XG4gICAgICAgIHRoaXMuaW5wdXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgaGlkZGVuSW5wdXQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoKFwic3RhcnRcIik7XG4gICAgICAgIHRoaXMuZGlyZWN0VXBsb2FkLmNyZWF0ZShmdW5jdGlvbihlcnJvciwgYXR0cmlidXRlcykge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgaGlkZGVuSW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoaWRkZW5JbnB1dCk7XG4gICAgICAgICAgICBfdGhpcy5kaXNwYXRjaEVycm9yKGVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGlkZGVuSW5wdXQudmFsdWUgPSBhdHRyaWJ1dGVzLnNpZ25lZF9pZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3RoaXMuZGlzcGF0Y2goXCJlbmRcIik7XG4gICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXBsb2FkUmVxdWVzdERpZFByb2dyZXNzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkUmVxdWVzdERpZFByb2dyZXNzKGV2ZW50KSB7XG4gICAgICAgIHZhciBwcm9ncmVzcyA9IGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsICogMTAwO1xuICAgICAgICBpZiAocHJvZ3Jlc3MpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGlzcGF0Y2hcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaChuYW1lKSB7XG4gICAgICAgIHZhciBkZXRhaWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgICAgICBkZXRhaWwuZmlsZSA9IHRoaXMuZmlsZTtcbiAgICAgICAgZGV0YWlsLmlkID0gdGhpcy5kaXJlY3RVcGxvYWQuaWQ7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMuaW5wdXQsIFwiZGlyZWN0LXVwbG9hZDpcIiArIG5hbWUsIHtcbiAgICAgICAgICBkZXRhaWw6IGRldGFpbFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGlzcGF0Y2hFcnJvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5kaXNwYXRjaChcImVycm9yXCIsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgIGFsZXJ0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkaXJlY3RVcGxvYWRXaWxsQ3JlYXRlQmxvYldpdGhYSFJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXJlY3RVcGxvYWRXaWxsQ3JlYXRlQmxvYldpdGhYSFIoeGhyKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goXCJiZWZvcmUtYmxvYi1yZXF1ZXN0XCIsIHtcbiAgICAgICAgICB4aHI6IHhoclxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGlyZWN0VXBsb2FkV2lsbFN0b3JlRmlsZVdpdGhYSFJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXJlY3RVcGxvYWRXaWxsU3RvcmVGaWxlV2l0aFhIUih4aHIpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goXCJiZWZvcmUtc3RvcmFnZS1yZXF1ZXN0XCIsIHtcbiAgICAgICAgICB4aHI6IHhoclxuICAgICAgICB9KTtcbiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLnVwbG9hZFJlcXVlc3REaWRQcm9ncmVzcyhldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ1cmxcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRpcmVjdC11cGxvYWQtdXJsXCIpO1xuICAgICAgfVxuICAgIH0gXSk7XG4gICAgcmV0dXJuIERpcmVjdFVwbG9hZENvbnRyb2xsZXI7XG4gIH0oKTtcbiAgdmFyIGlucHV0U2VsZWN0b3IgPSBcImlucHV0W3R5cGU9ZmlsZV1bZGF0YS1kaXJlY3QtdXBsb2FkLXVybF06bm90KFtkaXNhYmxlZF0pXCI7XG4gIHZhciBEaXJlY3RVcGxvYWRzQ29udHJvbGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIERpcmVjdFVwbG9hZHNDb250cm9sbGVyKGZvcm0pIHtcbiAgICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIERpcmVjdFVwbG9hZHNDb250cm9sbGVyKTtcbiAgICAgIHRoaXMuZm9ybSA9IGZvcm07XG4gICAgICB0aGlzLmlucHV0cyA9IGZpbmRFbGVtZW50cyhmb3JtLCBpbnB1dFNlbGVjdG9yKS5maWx0ZXIoZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LmZpbGVzLmxlbmd0aDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVDbGFzcyhEaXJlY3RVcGxvYWRzQ29udHJvbGxlciwgWyB7XG4gICAgICBrZXk6IFwic3RhcnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydChjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29udHJvbGxlcnMgPSB0aGlzLmNyZWF0ZURpcmVjdFVwbG9hZENvbnRyb2xsZXJzKCk7XG4gICAgICAgIHZhciBzdGFydE5leHRDb250cm9sbGVyID0gZnVuY3Rpb24gc3RhcnROZXh0Q29udHJvbGxlcigpIHtcbiAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGNvbnRyb2xsZXJzLnNoaWZ0KCk7XG4gICAgICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc3RhcnQoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgICAgIF90aGlzLmRpc3BhdGNoKFwiZW5kXCIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXJ0TmV4dENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBfdGhpcy5kaXNwYXRjaChcImVuZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goXCJzdGFydFwiKTtcbiAgICAgICAgc3RhcnROZXh0Q29udHJvbGxlcigpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjcmVhdGVEaXJlY3RVcGxvYWRDb250cm9sbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZURpcmVjdFVwbG9hZENvbnRyb2xsZXJzKCkge1xuICAgICAgICB2YXIgY29udHJvbGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICAgIHRvQXJyYXkkMShpbnB1dC5maWxlcykuZm9yRWFjaChmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IG5ldyBEaXJlY3RVcGxvYWRDb250cm9sbGVyKGlucHV0LCBmaWxlKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29udHJvbGxlcnM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRpc3BhdGNoXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGF0Y2gobmFtZSkge1xuICAgICAgICB2YXIgZGV0YWlsID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICAgICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcy5mb3JtLCBcImRpcmVjdC11cGxvYWRzOlwiICsgbmFtZSwge1xuICAgICAgICAgIGRldGFpbDogZGV0YWlsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gXSk7XG4gICAgcmV0dXJuIERpcmVjdFVwbG9hZHNDb250cm9sbGVyO1xuICB9KCk7XG4gIHZhciBwcm9jZXNzaW5nQXR0cmlidXRlID0gXCJkYXRhLWRpcmVjdC11cGxvYWRzLXByb2Nlc3NpbmdcIjtcbiAgdmFyIHN1Ym1pdEJ1dHRvbnNCeUZvcm0gPSBuZXcgV2Vha01hcCgpO1xuICB2YXIgc3RhcnRlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRpZENsaWNrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZGlkU3VibWl0Rm9ybSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiYWpheDpiZWZvcmVcIiwgZGlkU3VibWl0UmVtb3RlRWxlbWVudCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRpZENsaWNrKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoKHRhcmdldC50YWdOYW1lID09IFwiSU5QVVRcIiB8fCB0YXJnZXQudGFnTmFtZSA9PSBcIkJVVFRPTlwiKSAmJiB0YXJnZXQudHlwZSA9PSBcInN1Ym1pdFwiICYmIHRhcmdldC5mb3JtKSB7XG4gICAgICBzdWJtaXRCdXR0b25zQnlGb3JtLnNldCh0YXJnZXQuZm9ybSwgdGFyZ2V0KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZGlkU3VibWl0Rm9ybShldmVudCkge1xuICAgIGhhbmRsZUZvcm1TdWJtaXNzaW9uRXZlbnQoZXZlbnQpO1xuICB9XG4gIGZ1bmN0aW9uIGRpZFN1Ym1pdFJlbW90ZUVsZW1lbnQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT0gXCJGT1JNXCIpIHtcbiAgICAgIGhhbmRsZUZvcm1TdWJtaXNzaW9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBoYW5kbGVGb3JtU3VibWlzc2lvbkV2ZW50KGV2ZW50KSB7XG4gICAgdmFyIGZvcm0gPSBldmVudC50YXJnZXQ7XG4gICAgaWYgKGZvcm0uaGFzQXR0cmlidXRlKHByb2Nlc3NpbmdBdHRyaWJ1dGUpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY29udHJvbGxlciA9IG5ldyBEaXJlY3RVcGxvYWRzQ29udHJvbGxlcihmb3JtKTtcbiAgICB2YXIgaW5wdXRzID0gY29udHJvbGxlci5pbnB1dHM7XG4gICAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBmb3JtLnNldEF0dHJpYnV0ZShwcm9jZXNzaW5nQXR0cmlidXRlLCBcIlwiKTtcbiAgICAgIGlucHV0cy5mb3JFYWNoKGRpc2FibGUpO1xuICAgICAgY29udHJvbGxlci5zdGFydChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBmb3JtLnJlbW92ZUF0dHJpYnV0ZShwcm9jZXNzaW5nQXR0cmlidXRlKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgaW5wdXRzLmZvckVhY2goZW5hYmxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWJtaXRGb3JtKGZvcm0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtKSB7XG4gICAgdmFyIGJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbnNCeUZvcm0uZ2V0KGZvcm0pIHx8IGZpbmRFbGVtZW50KGZvcm0sIFwiaW5wdXRbdHlwZT1zdWJtaXRdLCBidXR0b25bdHlwZT1zdWJtaXRdXCIpO1xuICAgIGlmIChidXR0b24pIHtcbiAgICAgIHZhciBfYnV0dG9uID0gYnV0dG9uLCBkaXNhYmxlZCA9IF9idXR0b24uZGlzYWJsZWQ7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIGJ1dHRvbi5mb2N1cygpO1xuICAgICAgYnV0dG9uLmNsaWNrKCk7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgYnV0dG9uLnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgIGJ1dHRvbi5jbGljaygpO1xuICAgICAgZm9ybS5yZW1vdmVDaGlsZChidXR0b24pO1xuICAgIH1cbiAgICBzdWJtaXRCdXR0b25zQnlGb3JtLmRlbGV0ZShmb3JtKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNhYmxlKGlucHV0KSB7XG4gICAgaW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIGVuYWJsZShpbnB1dCkge1xuICAgIGlucHV0LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbiAgZnVuY3Rpb24gYXV0b3N0YXJ0KCkge1xuICAgIGlmICh3aW5kb3cuQWN0aXZlU3RvcmFnZSkge1xuICAgICAgc3RhcnQoKTtcbiAgICB9XG4gIH1cbiAgc2V0VGltZW91dChhdXRvc3RhcnQsIDEpO1xuICBleHBvcnRzLnN0YXJ0ID0gc3RhcnQ7XG4gIGV4cG9ydHMuRGlyZWN0VXBsb2FkID0gRGlyZWN0VXBsb2FkO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@rails/activestorage/app/assets/javascripts/activestorage.js\n");

/***/ }),

/***/ "./node_modules/@rails/ujs/lib/assets/compiled/rails-ujs.js":
/*!******************************************************************!*\
  !*** ./node_modules/@rails/ujs/lib/assets/compiled/rails-ujs.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\nUnobtrusive JavaScript\nhttps://github.com/rails/rails/blob/main/actionview/app/assets/javascripts\nReleased under the MIT license\n */;\n\n(function() {\n  var context = this;\n\n  (function() {\n    (function() {\n      this.Rails = {\n        linkClickSelector: 'a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]',\n        buttonClickSelector: {\n          selector: 'button[data-remote]:not([form]), button[data-confirm]:not([form])',\n          exclude: 'form button'\n        },\n        inputChangeSelector: 'select[data-remote], input[data-remote], textarea[data-remote]',\n        formSubmitSelector: 'form:not([data-turbo=true])',\n        formInputClickSelector: 'form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])',\n        formDisableSelector: 'input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled',\n        formEnableSelector: 'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled',\n        fileInputSelector: 'input[name][type=file]:not([disabled])',\n        linkDisableSelector: 'a[data-disable-with], a[data-disable]',\n        buttonDisableSelector: 'button[data-remote][data-disable-with], button[data-remote][data-disable]'\n      };\n\n    }).call(this);\n  }).call(context);\n\n  var Rails = context.Rails;\n\n  (function() {\n    (function() {\n      var nonce;\n\n      nonce = null;\n\n      Rails.loadCSPNonce = function() {\n        var ref;\n        return nonce = (ref = document.querySelector(\"meta[name=csp-nonce]\")) != null ? ref.content : void 0;\n      };\n\n      Rails.cspNonce = function() {\n        return nonce != null ? nonce : Rails.loadCSPNonce();\n      };\n\n    }).call(this);\n    (function() {\n      var expando, m;\n\n      m = Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n      Rails.matches = function(element, selector) {\n        if (selector.exclude != null) {\n          return m.call(element, selector.selector) && !m.call(element, selector.exclude);\n        } else {\n          return m.call(element, selector);\n        }\n      };\n\n      expando = '_ujsData';\n\n      Rails.getData = function(element, key) {\n        var ref;\n        return (ref = element[expando]) != null ? ref[key] : void 0;\n      };\n\n      Rails.setData = function(element, key, value) {\n        if (element[expando] == null) {\n          element[expando] = {};\n        }\n        return element[expando][key] = value;\n      };\n\n      Rails.$ = function(selector) {\n        return Array.prototype.slice.call(document.querySelectorAll(selector));\n      };\n\n    }).call(this);\n    (function() {\n      var $, csrfParam, csrfToken;\n\n      $ = Rails.$;\n\n      csrfToken = Rails.csrfToken = function() {\n        var meta;\n        meta = document.querySelector('meta[name=csrf-token]');\n        return meta && meta.content;\n      };\n\n      csrfParam = Rails.csrfParam = function() {\n        var meta;\n        meta = document.querySelector('meta[name=csrf-param]');\n        return meta && meta.content;\n      };\n\n      Rails.CSRFProtection = function(xhr) {\n        var token;\n        token = csrfToken();\n        if (token != null) {\n          return xhr.setRequestHeader('X-CSRF-Token', token);\n        }\n      };\n\n      Rails.refreshCSRFTokens = function() {\n        var param, token;\n        token = csrfToken();\n        param = csrfParam();\n        if ((token != null) && (param != null)) {\n          return $('form input[name=\"' + param + '\"]').forEach(function(input) {\n            return input.value = token;\n          });\n        }\n      };\n\n    }).call(this);\n    (function() {\n      var CustomEvent, fire, matches, preventDefault;\n\n      matches = Rails.matches;\n\n      CustomEvent = window.CustomEvent;\n\n      if (typeof CustomEvent !== 'function') {\n        CustomEvent = function(event, params) {\n          var evt;\n          evt = document.createEvent('CustomEvent');\n          evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n          return evt;\n        };\n        CustomEvent.prototype = window.Event.prototype;\n        preventDefault = CustomEvent.prototype.preventDefault;\n        CustomEvent.prototype.preventDefault = function() {\n          var result;\n          result = preventDefault.call(this);\n          if (this.cancelable && !this.defaultPrevented) {\n            Object.defineProperty(this, 'defaultPrevented', {\n              get: function() {\n                return true;\n              }\n            });\n          }\n          return result;\n        };\n      }\n\n      fire = Rails.fire = function(obj, name, data) {\n        var event;\n        event = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: data\n        });\n        obj.dispatchEvent(event);\n        return !event.defaultPrevented;\n      };\n\n      Rails.stopEverything = function(e) {\n        fire(e.target, 'ujs:everythingStopped');\n        e.preventDefault();\n        e.stopPropagation();\n        return e.stopImmediatePropagation();\n      };\n\n      Rails.delegate = function(element, selector, eventType, handler) {\n        return element.addEventListener(eventType, function(e) {\n          var target;\n          target = e.target;\n          while (!(!(target instanceof Element) || matches(target, selector))) {\n            target = target.parentNode;\n          }\n          if (target instanceof Element && handler.call(target, e) === false) {\n            e.preventDefault();\n            return e.stopPropagation();\n          }\n        });\n      };\n\n    }).call(this);\n    (function() {\n      var AcceptHeaders, CSRFProtection, createXHR, cspNonce, fire, prepareOptions, processResponse;\n\n      cspNonce = Rails.cspNonce, CSRFProtection = Rails.CSRFProtection, fire = Rails.fire;\n\n      AcceptHeaders = {\n        '*': '*/*',\n        text: 'text/plain',\n        html: 'text/html',\n        xml: 'application/xml, text/xml',\n        json: 'application/json, text/javascript',\n        script: 'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'\n      };\n\n      Rails.ajax = function(options) {\n        var xhr;\n        options = prepareOptions(options);\n        xhr = createXHR(options, function() {\n          var ref, response;\n          response = processResponse((ref = xhr.response) != null ? ref : xhr.responseText, xhr.getResponseHeader('Content-Type'));\n          if (Math.floor(xhr.status / 100) === 2) {\n            if (typeof options.success === \"function\") {\n              options.success(response, xhr.statusText, xhr);\n            }\n          } else {\n            if (typeof options.error === \"function\") {\n              options.error(response, xhr.statusText, xhr);\n            }\n          }\n          return typeof options.complete === \"function\" ? options.complete(xhr, xhr.statusText) : void 0;\n        });\n        if ((options.beforeSend != null) && !options.beforeSend(xhr, options)) {\n          return false;\n        }\n        if (xhr.readyState === XMLHttpRequest.OPENED) {\n          return xhr.send(options.data);\n        }\n      };\n\n      prepareOptions = function(options) {\n        options.url = options.url || location.href;\n        options.type = options.type.toUpperCase();\n        if (options.type === 'GET' && options.data) {\n          if (options.url.indexOf('?') < 0) {\n            options.url += '?' + options.data;\n          } else {\n            options.url += '&' + options.data;\n          }\n        }\n        if (AcceptHeaders[options.dataType] == null) {\n          options.dataType = '*';\n        }\n        options.accept = AcceptHeaders[options.dataType];\n        if (options.dataType !== '*') {\n          options.accept += ', */*; q=0.01';\n        }\n        return options;\n      };\n\n      createXHR = function(options, done) {\n        var xhr;\n        xhr = new XMLHttpRequest();\n        xhr.open(options.type, options.url, true);\n        xhr.setRequestHeader('Accept', options.accept);\n        if (typeof options.data === 'string') {\n          xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n        }\n        if (!options.crossDomain) {\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          CSRFProtection(xhr);\n        }\n        xhr.withCredentials = !!options.withCredentials;\n        xhr.onreadystatechange = function() {\n          if (xhr.readyState === XMLHttpRequest.DONE) {\n            return done(xhr);\n          }\n        };\n        return xhr;\n      };\n\n      processResponse = function(response, type) {\n        var parser, script;\n        if (typeof response === 'string' && typeof type === 'string') {\n          if (type.match(/\\bjson\\b/)) {\n            try {\n              response = JSON.parse(response);\n            } catch (error) {}\n          } else if (type.match(/\\b(?:java|ecma)script\\b/)) {\n            script = document.createElement('script');\n            script.setAttribute('nonce', cspNonce());\n            script.text = response;\n            document.head.appendChild(script).parentNode.removeChild(script);\n          } else if (type.match(/\\b(xml|html|svg)\\b/)) {\n            parser = new DOMParser();\n            type = type.replace(/;.+/, '');\n            try {\n              response = parser.parseFromString(response, type);\n            } catch (error) {}\n          }\n        }\n        return response;\n      };\n\n      Rails.href = function(element) {\n        return element.href;\n      };\n\n      Rails.isCrossDomain = function(url) {\n        var e, originAnchor, urlAnchor;\n        originAnchor = document.createElement('a');\n        originAnchor.href = location.href;\n        urlAnchor = document.createElement('a');\n        try {\n          urlAnchor.href = url;\n          return !(((!urlAnchor.protocol || urlAnchor.protocol === ':') && !urlAnchor.host) || (originAnchor.protocol + '//' + originAnchor.host === urlAnchor.protocol + '//' + urlAnchor.host));\n        } catch (error) {\n          e = error;\n          return true;\n        }\n      };\n\n    }).call(this);\n    (function() {\n      var matches, toArray;\n\n      matches = Rails.matches;\n\n      toArray = function(e) {\n        return Array.prototype.slice.call(e);\n      };\n\n      Rails.serializeElement = function(element, additionalParam) {\n        var inputs, params;\n        inputs = [element];\n        if (matches(element, 'form')) {\n          inputs = toArray(element.elements);\n        }\n        params = [];\n        inputs.forEach(function(input) {\n          if (!input.name || input.disabled) {\n            return;\n          }\n          if (matches(input, 'fieldset[disabled] *')) {\n            return;\n          }\n          if (matches(input, 'select')) {\n            return toArray(input.options).forEach(function(option) {\n              if (option.selected) {\n                return params.push({\n                  name: input.name,\n                  value: option.value\n                });\n              }\n            });\n          } else if (input.checked || ['radio', 'checkbox', 'submit'].indexOf(input.type) === -1) {\n            return params.push({\n              name: input.name,\n              value: input.value\n            });\n          }\n        });\n        if (additionalParam) {\n          params.push(additionalParam);\n        }\n        return params.map(function(param) {\n          if (param.name != null) {\n            return (encodeURIComponent(param.name)) + \"=\" + (encodeURIComponent(param.value));\n          } else {\n            return param;\n          }\n        }).join('&');\n      };\n\n      Rails.formElements = function(form, selector) {\n        if (matches(form, 'form')) {\n          return toArray(form.elements).filter(function(el) {\n            return matches(el, selector);\n          });\n        } else {\n          return toArray(form.querySelectorAll(selector));\n        }\n      };\n\n    }).call(this);\n    (function() {\n      var allowAction, fire, stopEverything;\n\n      fire = Rails.fire, stopEverything = Rails.stopEverything;\n\n      Rails.handleConfirm = function(e) {\n        if (!allowAction(this)) {\n          return stopEverything(e);\n        }\n      };\n\n      Rails.confirm = function(message, element) {\n        return confirm(message);\n      };\n\n      allowAction = function(element) {\n        var answer, callback, message;\n        message = element.getAttribute('data-confirm');\n        if (!message) {\n          return true;\n        }\n        answer = false;\n        if (fire(element, 'confirm')) {\n          try {\n            answer = Rails.confirm(message, element);\n          } catch (error) {}\n          callback = fire(element, 'confirm:complete', [answer]);\n        }\n        return answer && callback;\n      };\n\n    }).call(this);\n    (function() {\n      var disableFormElement, disableFormElements, disableLinkElement, enableFormElement, enableFormElements, enableLinkElement, formElements, getData, isXhrRedirect, matches, setData, stopEverything;\n\n      matches = Rails.matches, getData = Rails.getData, setData = Rails.setData, stopEverything = Rails.stopEverything, formElements = Rails.formElements;\n\n      Rails.handleDisabledElement = function(e) {\n        var element;\n        element = this;\n        if (element.disabled) {\n          return stopEverything(e);\n        }\n      };\n\n      Rails.enableElement = function(e) {\n        var element;\n        if (e instanceof Event) {\n          if (isXhrRedirect(e)) {\n            return;\n          }\n          element = e.target;\n        } else {\n          element = e;\n        }\n        if (matches(element, Rails.linkDisableSelector)) {\n          return enableLinkElement(element);\n        } else if (matches(element, Rails.buttonDisableSelector) || matches(element, Rails.formEnableSelector)) {\n          return enableFormElement(element);\n        } else if (matches(element, Rails.formSubmitSelector)) {\n          return enableFormElements(element);\n        }\n      };\n\n      Rails.disableElement = function(e) {\n        var element;\n        element = e instanceof Event ? e.target : e;\n        if (matches(element, Rails.linkDisableSelector)) {\n          return disableLinkElement(element);\n        } else if (matches(element, Rails.buttonDisableSelector) || matches(element, Rails.formDisableSelector)) {\n          return disableFormElement(element);\n        } else if (matches(element, Rails.formSubmitSelector)) {\n          return disableFormElements(element);\n        }\n      };\n\n      disableLinkElement = function(element) {\n        var replacement;\n        if (getData(element, 'ujs:disabled')) {\n          return;\n        }\n        replacement = element.getAttribute('data-disable-with');\n        if (replacement != null) {\n          setData(element, 'ujs:enable-with', element.innerHTML);\n          element.innerHTML = replacement;\n        }\n        element.addEventListener('click', stopEverything);\n        return setData(element, 'ujs:disabled', true);\n      };\n\n      enableLinkElement = function(element) {\n        var originalText;\n        originalText = getData(element, 'ujs:enable-with');\n        if (originalText != null) {\n          element.innerHTML = originalText;\n          setData(element, 'ujs:enable-with', null);\n        }\n        element.removeEventListener('click', stopEverything);\n        return setData(element, 'ujs:disabled', null);\n      };\n\n      disableFormElements = function(form) {\n        return formElements(form, Rails.formDisableSelector).forEach(disableFormElement);\n      };\n\n      disableFormElement = function(element) {\n        var replacement;\n        if (getData(element, 'ujs:disabled')) {\n          return;\n        }\n        replacement = element.getAttribute('data-disable-with');\n        if (replacement != null) {\n          if (matches(element, 'button')) {\n            setData(element, 'ujs:enable-with', element.innerHTML);\n            element.innerHTML = replacement;\n          } else {\n            setData(element, 'ujs:enable-with', element.value);\n            element.value = replacement;\n          }\n        }\n        element.disabled = true;\n        return setData(element, 'ujs:disabled', true);\n      };\n\n      enableFormElements = function(form) {\n        return formElements(form, Rails.formEnableSelector).forEach(enableFormElement);\n      };\n\n      enableFormElement = function(element) {\n        var originalText;\n        originalText = getData(element, 'ujs:enable-with');\n        if (originalText != null) {\n          if (matches(element, 'button')) {\n            element.innerHTML = originalText;\n          } else {\n            element.value = originalText;\n          }\n          setData(element, 'ujs:enable-with', null);\n        }\n        element.disabled = false;\n        return setData(element, 'ujs:disabled', null);\n      };\n\n      isXhrRedirect = function(event) {\n        var ref, xhr;\n        xhr = (ref = event.detail) != null ? ref[0] : void 0;\n        return (xhr != null ? xhr.getResponseHeader(\"X-Xhr-Redirect\") : void 0) != null;\n      };\n\n    }).call(this);\n    (function() {\n      var stopEverything;\n\n      stopEverything = Rails.stopEverything;\n\n      Rails.handleMethod = function(e) {\n        var csrfParam, csrfToken, form, formContent, href, link, method;\n        link = this;\n        method = link.getAttribute('data-method');\n        if (!method) {\n          return;\n        }\n        href = Rails.href(link);\n        csrfToken = Rails.csrfToken();\n        csrfParam = Rails.csrfParam();\n        form = document.createElement('form');\n        formContent = \"<input name='_method' value='\" + method + \"' type='hidden' />\";\n        if ((csrfParam != null) && (csrfToken != null) && !Rails.isCrossDomain(href)) {\n          formContent += \"<input name='\" + csrfParam + \"' value='\" + csrfToken + \"' type='hidden' />\";\n        }\n        formContent += '<input type=\"submit\" />';\n        form.method = 'post';\n        form.action = href;\n        form.target = link.target;\n        form.innerHTML = formContent;\n        form.style.display = 'none';\n        document.body.appendChild(form);\n        form.querySelector('[type=\"submit\"]').click();\n        return stopEverything(e);\n      };\n\n    }).call(this);\n    (function() {\n      var ajax, fire, getData, isCrossDomain, isRemote, matches, serializeElement, setData, stopEverything,\n        slice = [].slice;\n\n      matches = Rails.matches, getData = Rails.getData, setData = Rails.setData, fire = Rails.fire, stopEverything = Rails.stopEverything, ajax = Rails.ajax, isCrossDomain = Rails.isCrossDomain, serializeElement = Rails.serializeElement;\n\n      isRemote = function(element) {\n        var value;\n        value = element.getAttribute('data-remote');\n        return (value != null) && value !== 'false';\n      };\n\n      Rails.handleRemote = function(e) {\n        var button, data, dataType, element, method, url, withCredentials;\n        element = this;\n        if (!isRemote(element)) {\n          return true;\n        }\n        if (!fire(element, 'ajax:before')) {\n          fire(element, 'ajax:stopped');\n          return false;\n        }\n        withCredentials = element.getAttribute('data-with-credentials');\n        dataType = element.getAttribute('data-type') || 'script';\n        if (matches(element, Rails.formSubmitSelector)) {\n          button = getData(element, 'ujs:submit-button');\n          method = getData(element, 'ujs:submit-button-formmethod') || element.method;\n          url = getData(element, 'ujs:submit-button-formaction') || element.getAttribute('action') || location.href;\n          if (method.toUpperCase() === 'GET') {\n            url = url.replace(/\\?.*$/, '');\n          }\n          if (element.enctype === 'multipart/form-data') {\n            data = new FormData(element);\n            if (button != null) {\n              data.append(button.name, button.value);\n            }\n          } else {\n            data = serializeElement(element, button);\n          }\n          setData(element, 'ujs:submit-button', null);\n          setData(element, 'ujs:submit-button-formmethod', null);\n          setData(element, 'ujs:submit-button-formaction', null);\n        } else if (matches(element, Rails.buttonClickSelector) || matches(element, Rails.inputChangeSelector)) {\n          method = element.getAttribute('data-method');\n          url = element.getAttribute('data-url');\n          data = serializeElement(element, element.getAttribute('data-params'));\n        } else {\n          method = element.getAttribute('data-method');\n          url = Rails.href(element);\n          data = element.getAttribute('data-params');\n        }\n        ajax({\n          type: method || 'GET',\n          url: url,\n          data: data,\n          dataType: dataType,\n          beforeSend: function(xhr, options) {\n            if (fire(element, 'ajax:beforeSend', [xhr, options])) {\n              return fire(element, 'ajax:send', [xhr]);\n            } else {\n              fire(element, 'ajax:stopped');\n              return false;\n            }\n          },\n          success: function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return fire(element, 'ajax:success', args);\n          },\n          error: function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return fire(element, 'ajax:error', args);\n          },\n          complete: function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return fire(element, 'ajax:complete', args);\n          },\n          crossDomain: isCrossDomain(url),\n          withCredentials: (withCredentials != null) && withCredentials !== 'false'\n        });\n        return stopEverything(e);\n      };\n\n      Rails.formSubmitButtonClick = function(e) {\n        var button, form;\n        button = this;\n        form = button.form;\n        if (!form) {\n          return;\n        }\n        if (button.name) {\n          setData(form, 'ujs:submit-button', {\n            name: button.name,\n            value: button.value\n          });\n        }\n        setData(form, 'ujs:formnovalidate-button', button.formNoValidate);\n        setData(form, 'ujs:submit-button-formaction', button.getAttribute('formaction'));\n        return setData(form, 'ujs:submit-button-formmethod', button.getAttribute('formmethod'));\n      };\n\n      Rails.preventInsignificantClick = function(e) {\n        var data, insignificantMetaClick, link, metaClick, method, nonPrimaryMouseClick;\n        link = this;\n        method = (link.getAttribute('data-method') || 'GET').toUpperCase();\n        data = link.getAttribute('data-params');\n        metaClick = e.metaKey || e.ctrlKey;\n        insignificantMetaClick = metaClick && method === 'GET' && !data;\n        nonPrimaryMouseClick = (e.button != null) && e.button !== 0;\n        if (nonPrimaryMouseClick || insignificantMetaClick) {\n          return e.stopImmediatePropagation();\n        }\n      };\n\n    }).call(this);\n    (function() {\n      var $, CSRFProtection, delegate, disableElement, enableElement, fire, formSubmitButtonClick, getData, handleConfirm, handleDisabledElement, handleMethod, handleRemote, loadCSPNonce, preventInsignificantClick, refreshCSRFTokens;\n\n      fire = Rails.fire, delegate = Rails.delegate, getData = Rails.getData, $ = Rails.$, refreshCSRFTokens = Rails.refreshCSRFTokens, CSRFProtection = Rails.CSRFProtection, loadCSPNonce = Rails.loadCSPNonce, enableElement = Rails.enableElement, disableElement = Rails.disableElement, handleDisabledElement = Rails.handleDisabledElement, handleConfirm = Rails.handleConfirm, preventInsignificantClick = Rails.preventInsignificantClick, handleRemote = Rails.handleRemote, formSubmitButtonClick = Rails.formSubmitButtonClick, handleMethod = Rails.handleMethod;\n\n      if ((typeof jQuery !== \"undefined\" && jQuery !== null) && (jQuery.ajax != null)) {\n        if (jQuery.rails) {\n          throw new Error('If you load both jquery_ujs and rails-ujs, use rails-ujs only.');\n        }\n        jQuery.rails = Rails;\n        jQuery.ajaxPrefilter(function(options, originalOptions, xhr) {\n          if (!options.crossDomain) {\n            return CSRFProtection(xhr);\n          }\n        });\n      }\n\n      Rails.start = function() {\n        if (window._rails_loaded) {\n          throw new Error('rails-ujs has already been loaded!');\n        }\n        window.addEventListener('pageshow', function() {\n          $(Rails.formEnableSelector).forEach(function(el) {\n            if (getData(el, 'ujs:disabled')) {\n              return enableElement(el);\n            }\n          });\n          return $(Rails.linkDisableSelector).forEach(function(el) {\n            if (getData(el, 'ujs:disabled')) {\n              return enableElement(el);\n            }\n          });\n        });\n        delegate(document, Rails.linkDisableSelector, 'ajax:complete', enableElement);\n        delegate(document, Rails.linkDisableSelector, 'ajax:stopped', enableElement);\n        delegate(document, Rails.buttonDisableSelector, 'ajax:complete', enableElement);\n        delegate(document, Rails.buttonDisableSelector, 'ajax:stopped', enableElement);\n        delegate(document, Rails.linkClickSelector, 'click', preventInsignificantClick);\n        delegate(document, Rails.linkClickSelector, 'click', handleDisabledElement);\n        delegate(document, Rails.linkClickSelector, 'click', handleConfirm);\n        delegate(document, Rails.linkClickSelector, 'click', disableElement);\n        delegate(document, Rails.linkClickSelector, 'click', handleRemote);\n        delegate(document, Rails.linkClickSelector, 'click', handleMethod);\n        delegate(document, Rails.buttonClickSelector, 'click', preventInsignificantClick);\n        delegate(document, Rails.buttonClickSelector, 'click', handleDisabledElement);\n        delegate(document, Rails.buttonClickSelector, 'click', handleConfirm);\n        delegate(document, Rails.buttonClickSelector, 'click', disableElement);\n        delegate(document, Rails.buttonClickSelector, 'click', handleRemote);\n        delegate(document, Rails.inputChangeSelector, 'change', handleDisabledElement);\n        delegate(document, Rails.inputChangeSelector, 'change', handleConfirm);\n        delegate(document, Rails.inputChangeSelector, 'change', handleRemote);\n        delegate(document, Rails.formSubmitSelector, 'submit', handleDisabledElement);\n        delegate(document, Rails.formSubmitSelector, 'submit', handleConfirm);\n        delegate(document, Rails.formSubmitSelector, 'submit', handleRemote);\n        delegate(document, Rails.formSubmitSelector, 'submit', function(e) {\n          return setTimeout((function() {\n            return disableElement(e);\n          }), 13);\n        });\n        delegate(document, Rails.formSubmitSelector, 'ajax:send', disableElement);\n        delegate(document, Rails.formSubmitSelector, 'ajax:complete', enableElement);\n        delegate(document, Rails.formInputClickSelector, 'click', preventInsignificantClick);\n        delegate(document, Rails.formInputClickSelector, 'click', handleDisabledElement);\n        delegate(document, Rails.formInputClickSelector, 'click', handleConfirm);\n        delegate(document, Rails.formInputClickSelector, 'click', formSubmitButtonClick);\n        document.addEventListener('DOMContentLoaded', refreshCSRFTokens);\n        document.addEventListener('DOMContentLoaded', loadCSPNonce);\n        return window._rails_loaded = true;\n      };\n\n      if (window.Rails === Rails && fire(document, 'rails:attachBindings')) {\n        Rails.start();\n      }\n\n    }).call(this);\n  }).call(this);\n\n  if ( true && module.exports) {\n    module.exports = Rails;\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_FACTORY__ = (Rails),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n}).call(this);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHJhaWxzL3Vqcy9saWIvYXNzZXRzL2NvbXBpbGVkL3JhaWxzLXVqcy5qcz8xODcxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTCxHQUFHOztBQUVILE1BQU0sS0FBMEI7QUFDaEM7QUFDQSxHQUFHLFVBQVUsSUFBMEM7QUFDdkQsSUFBSSxvQ0FBTyxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUEsb0dBQUM7QUFDakI7QUFDQSxDQUFDIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL0ByYWlscy91anMvbGliL2Fzc2V0cy9jb21waWxlZC9yYWlscy11anMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuVW5vYnRydXNpdmUgSmF2YVNjcmlwdFxuaHR0cHM6Ly9naXRodWIuY29tL3JhaWxzL3JhaWxzL2Jsb2IvbWFpbi9hY3Rpb252aWV3L2FwcC9hc3NldHMvamF2YXNjcmlwdHNcblJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBjb250ZXh0ID0gdGhpcztcblxuICAoZnVuY3Rpb24oKSB7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5SYWlscyA9IHtcbiAgICAgICAgbGlua0NsaWNrU2VsZWN0b3I6ICdhW2RhdGEtY29uZmlybV0sIGFbZGF0YS1tZXRob2RdLCBhW2RhdGEtcmVtb3RlXTpub3QoW2Rpc2FibGVkXSksIGFbZGF0YS1kaXNhYmxlLXdpdGhdLCBhW2RhdGEtZGlzYWJsZV0nLFxuICAgICAgICBidXR0b25DbGlja1NlbGVjdG9yOiB7XG4gICAgICAgICAgc2VsZWN0b3I6ICdidXR0b25bZGF0YS1yZW1vdGVdOm5vdChbZm9ybV0pLCBidXR0b25bZGF0YS1jb25maXJtXTpub3QoW2Zvcm1dKScsXG4gICAgICAgICAgZXhjbHVkZTogJ2Zvcm0gYnV0dG9uJ1xuICAgICAgICB9LFxuICAgICAgICBpbnB1dENoYW5nZVNlbGVjdG9yOiAnc2VsZWN0W2RhdGEtcmVtb3RlXSwgaW5wdXRbZGF0YS1yZW1vdGVdLCB0ZXh0YXJlYVtkYXRhLXJlbW90ZV0nLFxuICAgICAgICBmb3JtU3VibWl0U2VsZWN0b3I6ICdmb3JtOm5vdChbZGF0YS10dXJibz10cnVlXSknLFxuICAgICAgICBmb3JtSW5wdXRDbGlja1NlbGVjdG9yOiAnZm9ybTpub3QoW2RhdGEtdHVyYm89dHJ1ZV0pIGlucHV0W3R5cGU9c3VibWl0XSwgZm9ybTpub3QoW2RhdGEtdHVyYm89dHJ1ZV0pIGlucHV0W3R5cGU9aW1hZ2VdLCBmb3JtOm5vdChbZGF0YS10dXJibz10cnVlXSkgYnV0dG9uW3R5cGU9c3VibWl0XSwgZm9ybTpub3QoW2RhdGEtdHVyYm89dHJ1ZV0pIGJ1dHRvbjpub3QoW3R5cGVdKSwgaW5wdXRbdHlwZT1zdWJtaXRdW2Zvcm1dLCBpbnB1dFt0eXBlPWltYWdlXVtmb3JtXSwgYnV0dG9uW3R5cGU9c3VibWl0XVtmb3JtXSwgYnV0dG9uW2Zvcm1dOm5vdChbdHlwZV0pJyxcbiAgICAgICAgZm9ybURpc2FibGVTZWxlY3RvcjogJ2lucHV0W2RhdGEtZGlzYWJsZS13aXRoXTplbmFibGVkLCBidXR0b25bZGF0YS1kaXNhYmxlLXdpdGhdOmVuYWJsZWQsIHRleHRhcmVhW2RhdGEtZGlzYWJsZS13aXRoXTplbmFibGVkLCBpbnB1dFtkYXRhLWRpc2FibGVdOmVuYWJsZWQsIGJ1dHRvbltkYXRhLWRpc2FibGVdOmVuYWJsZWQsIHRleHRhcmVhW2RhdGEtZGlzYWJsZV06ZW5hYmxlZCcsXG4gICAgICAgIGZvcm1FbmFibGVTZWxlY3RvcjogJ2lucHV0W2RhdGEtZGlzYWJsZS13aXRoXTpkaXNhYmxlZCwgYnV0dG9uW2RhdGEtZGlzYWJsZS13aXRoXTpkaXNhYmxlZCwgdGV4dGFyZWFbZGF0YS1kaXNhYmxlLXdpdGhdOmRpc2FibGVkLCBpbnB1dFtkYXRhLWRpc2FibGVdOmRpc2FibGVkLCBidXR0b25bZGF0YS1kaXNhYmxlXTpkaXNhYmxlZCwgdGV4dGFyZWFbZGF0YS1kaXNhYmxlXTpkaXNhYmxlZCcsXG4gICAgICAgIGZpbGVJbnB1dFNlbGVjdG9yOiAnaW5wdXRbbmFtZV1bdHlwZT1maWxlXTpub3QoW2Rpc2FibGVkXSknLFxuICAgICAgICBsaW5rRGlzYWJsZVNlbGVjdG9yOiAnYVtkYXRhLWRpc2FibGUtd2l0aF0sIGFbZGF0YS1kaXNhYmxlXScsXG4gICAgICAgIGJ1dHRvbkRpc2FibGVTZWxlY3RvcjogJ2J1dHRvbltkYXRhLXJlbW90ZV1bZGF0YS1kaXNhYmxlLXdpdGhdLCBidXR0b25bZGF0YS1yZW1vdGVdW2RhdGEtZGlzYWJsZV0nXG4gICAgICB9O1xuXG4gICAgfSkuY2FsbCh0aGlzKTtcbiAgfSkuY2FsbChjb250ZXh0KTtcblxuICB2YXIgUmFpbHMgPSBjb250ZXh0LlJhaWxzO1xuXG4gIChmdW5jdGlvbigpIHtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm9uY2U7XG5cbiAgICAgIG5vbmNlID0gbnVsbDtcblxuICAgICAgUmFpbHMubG9hZENTUE5vbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWY7XG4gICAgICAgIHJldHVybiBub25jZSA9IChyZWYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPWNzcC1ub25jZV1cIikpICE9IG51bGwgPyByZWYuY29udGVudCA6IHZvaWQgMDtcbiAgICAgIH07XG5cbiAgICAgIFJhaWxzLmNzcE5vbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBub25jZSAhPSBudWxsID8gbm9uY2UgOiBSYWlscy5sb2FkQ1NQTm9uY2UoKTtcbiAgICAgIH07XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBleHBhbmRvLCBtO1xuXG4gICAgICBtID0gRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyB8fCBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm9NYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuXG4gICAgICBSYWlscy5tYXRjaGVzID0gZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yLmV4Y2x1ZGUgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBtLmNhbGwoZWxlbWVudCwgc2VsZWN0b3Iuc2VsZWN0b3IpICYmICFtLmNhbGwoZWxlbWVudCwgc2VsZWN0b3IuZXhjbHVkZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG0uY2FsbChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGV4cGFuZG8gPSAnX3Vqc0RhdGEnO1xuXG4gICAgICBSYWlscy5nZXREYXRhID0gZnVuY3Rpb24oZWxlbWVudCwga2V5KSB7XG4gICAgICAgIHZhciByZWY7XG4gICAgICAgIHJldHVybiAocmVmID0gZWxlbWVudFtleHBhbmRvXSkgIT0gbnVsbCA/IHJlZltrZXldIDogdm9pZCAwO1xuICAgICAgfTtcblxuICAgICAgUmFpbHMuc2V0RGF0YSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRbZXhwYW5kb10gPT0gbnVsbCkge1xuICAgICAgICAgIGVsZW1lbnRbZXhwYW5kb10gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudFtleHBhbmRvXVtrZXldID0gdmFsdWU7XG4gICAgICB9O1xuXG4gICAgICBSYWlscy4kID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgIH07XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciAkLCBjc3JmUGFyYW0sIGNzcmZUb2tlbjtcblxuICAgICAgJCA9IFJhaWxzLiQ7XG5cbiAgICAgIGNzcmZUb2tlbiA9IFJhaWxzLmNzcmZUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWV0YTtcbiAgICAgICAgbWV0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1jc3JmLXRva2VuXScpO1xuICAgICAgICByZXR1cm4gbWV0YSAmJiBtZXRhLmNvbnRlbnQ7XG4gICAgICB9O1xuXG4gICAgICBjc3JmUGFyYW0gPSBSYWlscy5jc3JmUGFyYW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1ldGE7XG4gICAgICAgIG1ldGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9Y3NyZi1wYXJhbV0nKTtcbiAgICAgICAgcmV0dXJuIG1ldGEgJiYgbWV0YS5jb250ZW50O1xuICAgICAgfTtcblxuICAgICAgUmFpbHMuQ1NSRlByb3RlY3Rpb24gPSBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgdmFyIHRva2VuO1xuICAgICAgICB0b2tlbiA9IGNzcmZUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4gIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1DU1JGLVRva2VuJywgdG9rZW4pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBSYWlscy5yZWZyZXNoQ1NSRlRva2VucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGFyYW0sIHRva2VuO1xuICAgICAgICB0b2tlbiA9IGNzcmZUb2tlbigpO1xuICAgICAgICBwYXJhbSA9IGNzcmZQYXJhbSgpO1xuICAgICAgICBpZiAoKHRva2VuICE9IG51bGwpICYmIChwYXJhbSAhPSBudWxsKSkge1xuICAgICAgICAgIHJldHVybiAkKCdmb3JtIGlucHV0W25hbWU9XCInICsgcGFyYW0gKyAnXCJdJykuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlID0gdG9rZW47XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBDdXN0b21FdmVudCwgZmlyZSwgbWF0Y2hlcywgcHJldmVudERlZmF1bHQ7XG5cbiAgICAgIG1hdGNoZXMgPSBSYWlscy5tYXRjaGVzO1xuXG4gICAgICBDdXN0b21FdmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDtcblxuICAgICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBDdXN0b21FdmVudCA9IGZ1bmN0aW9uKGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgICAgICB2YXIgZXZ0O1xuICAgICAgICAgIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gICAgICAgICAgcmV0dXJuIGV2dDtcbiAgICAgICAgfTtcbiAgICAgICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgICAgICAgcHJldmVudERlZmF1bHQgPSBDdXN0b21FdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQ7XG4gICAgICAgIEN1c3RvbUV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgcmVzdWx0ID0gcHJldmVudERlZmF1bHQuY2FsbCh0aGlzKTtcbiAgICAgICAgICBpZiAodGhpcy5jYW5jZWxhYmxlICYmICF0aGlzLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZGVmYXVsdFByZXZlbnRlZCcsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZpcmUgPSBSYWlscy5maXJlID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBkYXRhKSB7XG4gICAgICAgIHZhciBldmVudDtcbiAgICAgICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQobmFtZSwge1xuICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICBkZXRhaWw6IGRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIG9iai5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgICAgfTtcblxuICAgICAgUmFpbHMuc3RvcEV2ZXJ5dGhpbmcgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGZpcmUoZS50YXJnZXQsICd1anM6ZXZlcnl0aGluZ1N0b3BwZWQnKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgIH07XG5cbiAgICAgIFJhaWxzLmRlbGVnYXRlID0gZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IsIGV2ZW50VHlwZSwgaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgd2hpbGUgKCEoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSB8fCBtYXRjaGVzKHRhcmdldCwgc2VsZWN0b3IpKSkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGhhbmRsZXIuY2FsbCh0YXJnZXQsIGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBBY2NlcHRIZWFkZXJzLCBDU1JGUHJvdGVjdGlvbiwgY3JlYXRlWEhSLCBjc3BOb25jZSwgZmlyZSwgcHJlcGFyZU9wdGlvbnMsIHByb2Nlc3NSZXNwb25zZTtcblxuICAgICAgY3NwTm9uY2UgPSBSYWlscy5jc3BOb25jZSwgQ1NSRlByb3RlY3Rpb24gPSBSYWlscy5DU1JGUHJvdGVjdGlvbiwgZmlyZSA9IFJhaWxzLmZpcmU7XG5cbiAgICAgIEFjY2VwdEhlYWRlcnMgPSB7XG4gICAgICAgICcqJzogJyovKicsXG4gICAgICAgIHRleHQ6ICd0ZXh0L3BsYWluJyxcbiAgICAgICAgaHRtbDogJ3RleHQvaHRtbCcsXG4gICAgICAgIHhtbDogJ2FwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwnLFxuICAgICAgICBqc29uOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0JyxcbiAgICAgICAgc2NyaXB0OiAndGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQnXG4gICAgICB9O1xuXG4gICAgICBSYWlscy5hamF4ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICB2YXIgeGhyO1xuICAgICAgICBvcHRpb25zID0gcHJlcGFyZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHhociA9IGNyZWF0ZVhIUihvcHRpb25zLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmVmLCByZXNwb25zZTtcbiAgICAgICAgICByZXNwb25zZSA9IHByb2Nlc3NSZXNwb25zZSgocmVmID0geGhyLnJlc3BvbnNlKSAhPSBudWxsID8gcmVmIDogeGhyLnJlc3BvbnNlVGV4dCwgeGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVR5cGUnKSk7XG4gICAgICAgICAgaWYgKE1hdGguZmxvb3IoeGhyLnN0YXR1cyAvIDEwMCkgPT09IDIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zdWNjZXNzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5zdWNjZXNzKHJlc3BvbnNlLCB4aHIuc3RhdHVzVGV4dCwgeGhyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5lcnJvcihyZXNwb25zZSwgeGhyLnN0YXR1c1RleHQsIHhocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0eXBlb2Ygb3B0aW9ucy5jb21wbGV0ZSA9PT0gXCJmdW5jdGlvblwiID8gb3B0aW9ucy5jb21wbGV0ZSh4aHIsIHhoci5zdGF0dXNUZXh0KSA6IHZvaWQgMDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgob3B0aW9ucy5iZWZvcmVTZW5kICE9IG51bGwpICYmICFvcHRpb25zLmJlZm9yZVNlbmQoeGhyLCBvcHRpb25zKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0Lk9QRU5FRCkge1xuICAgICAgICAgIHJldHVybiB4aHIuc2VuZChvcHRpb25zLmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBwcmVwYXJlT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy51cmwgPSBvcHRpb25zLnVybCB8fCBsb2NhdGlvbi5ocmVmO1xuICAgICAgICBvcHRpb25zLnR5cGUgPSBvcHRpb25zLnR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ0dFVCcgJiYgb3B0aW9ucy5kYXRhKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMudXJsLmluZGV4T2YoJz8nKSA8IDApIHtcbiAgICAgICAgICAgIG9wdGlvbnMudXJsICs9ICc/JyArIG9wdGlvbnMuZGF0YTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy51cmwgKz0gJyYnICsgb3B0aW9ucy5kYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoQWNjZXB0SGVhZGVyc1tvcHRpb25zLmRhdGFUeXBlXSA9PSBudWxsKSB7XG4gICAgICAgICAgb3B0aW9ucy5kYXRhVHlwZSA9ICcqJztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLmFjY2VwdCA9IEFjY2VwdEhlYWRlcnNbb3B0aW9ucy5kYXRhVHlwZV07XG4gICAgICAgIGlmIChvcHRpb25zLmRhdGFUeXBlICE9PSAnKicpIHtcbiAgICAgICAgICBvcHRpb25zLmFjY2VwdCArPSAnLCAqLyo7IHE9MC4wMSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICB9O1xuXG4gICAgICBjcmVhdGVYSFIgPSBmdW5jdGlvbihvcHRpb25zLCBkb25lKSB7XG4gICAgICAgIHZhciB4aHI7XG4gICAgICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihvcHRpb25zLnR5cGUsIG9wdGlvbnMudXJsLCB0cnVlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsIG9wdGlvbnMuYWNjZXB0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuY3Jvc3NEb21haW4pIHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1SZXF1ZXN0ZWQtV2l0aCcsICdYTUxIdHRwUmVxdWVzdCcpO1xuICAgICAgICAgIENTUkZQcm90ZWN0aW9uKHhocik7XG4gICAgICAgIH1cbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9ICEhb3B0aW9ucy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgIHJldHVybiBkb25lKHhocik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4geGhyO1xuICAgICAgfTtcblxuICAgICAgcHJvY2Vzc1Jlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2UsIHR5cGUpIHtcbiAgICAgICAgdmFyIHBhcnNlciwgc2NyaXB0O1xuICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZS5tYXRjaCgvXFxianNvblxcYi8pKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlLm1hdGNoKC9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiLykpIHtcbiAgICAgICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnbm9uY2UnLCBjc3BOb25jZSgpKTtcbiAgICAgICAgICAgIHNjcmlwdC50ZXh0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZS5tYXRjaCgvXFxiKHhtbHxodG1sfHN2ZylcXGIvKSkge1xuICAgICAgICAgICAgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUucmVwbGFjZSgvOy4rLywgJycpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlc3BvbnNlLCB0eXBlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9O1xuXG4gICAgICBSYWlscy5ocmVmID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5ocmVmO1xuICAgICAgfTtcblxuICAgICAgUmFpbHMuaXNDcm9zc0RvbWFpbiA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgZSwgb3JpZ2luQW5jaG9yLCB1cmxBbmNob3I7XG4gICAgICAgIG9yaWdpbkFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgb3JpZ2luQW5jaG9yLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xuICAgICAgICB1cmxBbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdXJsQW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgICAgICAgcmV0dXJuICEoKCghdXJsQW5jaG9yLnByb3RvY29sIHx8IHVybEFuY2hvci5wcm90b2NvbCA9PT0gJzonKSAmJiAhdXJsQW5jaG9yLmhvc3QpIHx8IChvcmlnaW5BbmNob3IucHJvdG9jb2wgKyAnLy8nICsgb3JpZ2luQW5jaG9yLmhvc3QgPT09IHVybEFuY2hvci5wcm90b2NvbCArICcvLycgKyB1cmxBbmNob3IuaG9zdCkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGUgPSBlcnJvcjtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hdGNoZXMsIHRvQXJyYXk7XG5cbiAgICAgIG1hdGNoZXMgPSBSYWlscy5tYXRjaGVzO1xuXG4gICAgICB0b0FycmF5ID0gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSk7XG4gICAgICB9O1xuXG4gICAgICBSYWlscy5zZXJpYWxpemVFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCwgYWRkaXRpb25hbFBhcmFtKSB7XG4gICAgICAgIHZhciBpbnB1dHMsIHBhcmFtcztcbiAgICAgICAgaW5wdXRzID0gW2VsZW1lbnRdO1xuICAgICAgICBpZiAobWF0Y2hlcyhlbGVtZW50LCAnZm9ybScpKSB7XG4gICAgICAgICAgaW5wdXRzID0gdG9BcnJheShlbGVtZW50LmVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXMgPSBbXTtcbiAgICAgICAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgICBpZiAoIWlucHV0Lm5hbWUgfHwgaW5wdXQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1hdGNoZXMoaW5wdXQsICdmaWVsZHNldFtkaXNhYmxlZF0gKicpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXRjaGVzKGlucHV0LCAnc2VsZWN0JykpIHtcbiAgICAgICAgICAgIHJldHVybiB0b0FycmF5KGlucHV0Lm9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb24udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5jaGVja2VkIHx8IFsncmFkaW8nLCAnY2hlY2tib3gnLCAnc3VibWl0J10uaW5kZXhPZihpbnB1dC50eXBlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXMucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiBpbnB1dC52YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbSkge1xuICAgICAgICAgIHBhcmFtcy5wdXNoKGFkZGl0aW9uYWxQYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5tYXAoZnVuY3Rpb24ocGFyYW0pIHtcbiAgICAgICAgICBpZiAocGFyYW0ubmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gKGVuY29kZVVSSUNvbXBvbmVudChwYXJhbS5uYW1lKSkgKyBcIj1cIiArIChlbmNvZGVVUklDb21wb25lbnQocGFyYW0udmFsdWUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuam9pbignJicpO1xuICAgICAgfTtcblxuICAgICAgUmFpbHMuZm9ybUVsZW1lbnRzID0gZnVuY3Rpb24oZm9ybSwgc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKG1hdGNoZXMoZm9ybSwgJ2Zvcm0nKSkge1xuICAgICAgICAgIHJldHVybiB0b0FycmF5KGZvcm0uZWxlbWVudHMpLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMoZWwsIHNlbGVjdG9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdG9BcnJheShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFsbG93QWN0aW9uLCBmaXJlLCBzdG9wRXZlcnl0aGluZztcblxuICAgICAgZmlyZSA9IFJhaWxzLmZpcmUsIHN0b3BFdmVyeXRoaW5nID0gUmFpbHMuc3RvcEV2ZXJ5dGhpbmc7XG5cbiAgICAgIFJhaWxzLmhhbmRsZUNvbmZpcm0gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghYWxsb3dBY3Rpb24odGhpcykpIHtcbiAgICAgICAgICByZXR1cm4gc3RvcEV2ZXJ5dGhpbmcoZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIFJhaWxzLmNvbmZpcm0gPSBmdW5jdGlvbihtZXNzYWdlLCBlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBjb25maXJtKG1lc3NhZ2UpO1xuICAgICAgfTtcblxuICAgICAgYWxsb3dBY3Rpb24gPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBhbnN3ZXIsIGNhbGxiYWNrLCBtZXNzYWdlO1xuICAgICAgICBtZXNzYWdlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29uZmlybScpO1xuICAgICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKGZpcmUoZWxlbWVudCwgJ2NvbmZpcm0nKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhbnN3ZXIgPSBSYWlscy5jb25maXJtKG1lc3NhZ2UsIGVsZW1lbnQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuICAgICAgICAgIGNhbGxiYWNrID0gZmlyZShlbGVtZW50LCAnY29uZmlybTpjb21wbGV0ZScsIFthbnN3ZXJdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5zd2VyICYmIGNhbGxiYWNrO1xuICAgICAgfTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRpc2FibGVGb3JtRWxlbWVudCwgZGlzYWJsZUZvcm1FbGVtZW50cywgZGlzYWJsZUxpbmtFbGVtZW50LCBlbmFibGVGb3JtRWxlbWVudCwgZW5hYmxlRm9ybUVsZW1lbnRzLCBlbmFibGVMaW5rRWxlbWVudCwgZm9ybUVsZW1lbnRzLCBnZXREYXRhLCBpc1hoclJlZGlyZWN0LCBtYXRjaGVzLCBzZXREYXRhLCBzdG9wRXZlcnl0aGluZztcblxuICAgICAgbWF0Y2hlcyA9IFJhaWxzLm1hdGNoZXMsIGdldERhdGEgPSBSYWlscy5nZXREYXRhLCBzZXREYXRhID0gUmFpbHMuc2V0RGF0YSwgc3RvcEV2ZXJ5dGhpbmcgPSBSYWlscy5zdG9wRXZlcnl0aGluZywgZm9ybUVsZW1lbnRzID0gUmFpbHMuZm9ybUVsZW1lbnRzO1xuXG4gICAgICBSYWlscy5oYW5kbGVEaXNhYmxlZEVsZW1lbnQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICBlbGVtZW50ID0gdGhpcztcbiAgICAgICAgaWYgKGVsZW1lbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm4gc3RvcEV2ZXJ5dGhpbmcoZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIFJhaWxzLmVuYWJsZUVsZW1lbnQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEV2ZW50KSB7XG4gICAgICAgICAgaWYgKGlzWGhyUmVkaXJlY3QoZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQgPSBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzKGVsZW1lbnQsIFJhaWxzLmxpbmtEaXNhYmxlU2VsZWN0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuIGVuYWJsZUxpbmtFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXMoZWxlbWVudCwgUmFpbHMuYnV0dG9uRGlzYWJsZVNlbGVjdG9yKSB8fCBtYXRjaGVzKGVsZW1lbnQsIFJhaWxzLmZvcm1FbmFibGVTZWxlY3RvcikpIHtcbiAgICAgICAgICByZXR1cm4gZW5hYmxlRm9ybUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlcyhlbGVtZW50LCBSYWlscy5mb3JtU3VibWl0U2VsZWN0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuIGVuYWJsZUZvcm1FbGVtZW50cyhlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgUmFpbHMuZGlzYWJsZUVsZW1lbnQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICBlbGVtZW50ID0gZSBpbnN0YW5jZW9mIEV2ZW50ID8gZS50YXJnZXQgOiBlO1xuICAgICAgICBpZiAobWF0Y2hlcyhlbGVtZW50LCBSYWlscy5saW5rRGlzYWJsZVNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBkaXNhYmxlTGlua0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlcyhlbGVtZW50LCBSYWlscy5idXR0b25EaXNhYmxlU2VsZWN0b3IpIHx8IG1hdGNoZXMoZWxlbWVudCwgUmFpbHMuZm9ybURpc2FibGVTZWxlY3RvcikpIHtcbiAgICAgICAgICByZXR1cm4gZGlzYWJsZUZvcm1FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXMoZWxlbWVudCwgUmFpbHMuZm9ybVN1Ym1pdFNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBkaXNhYmxlRm9ybUVsZW1lbnRzKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBkaXNhYmxlTGlua0VsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciByZXBsYWNlbWVudDtcbiAgICAgICAgaWYgKGdldERhdGEoZWxlbWVudCwgJ3VqczpkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcGxhY2VtZW50ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZS13aXRoJyk7XG4gICAgICAgIGlmIChyZXBsYWNlbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgc2V0RGF0YShlbGVtZW50LCAndWpzOmVuYWJsZS13aXRoJywgZWxlbWVudC5pbm5lckhUTUwpO1xuICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3BFdmVyeXRoaW5nKTtcbiAgICAgICAgcmV0dXJuIHNldERhdGEoZWxlbWVudCwgJ3VqczpkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfTtcblxuICAgICAgZW5hYmxlTGlua0VsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBvcmlnaW5hbFRleHQ7XG4gICAgICAgIG9yaWdpbmFsVGV4dCA9IGdldERhdGEoZWxlbWVudCwgJ3VqczplbmFibGUtd2l0aCcpO1xuICAgICAgICBpZiAob3JpZ2luYWxUZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IG9yaWdpbmFsVGV4dDtcbiAgICAgICAgICBzZXREYXRhKGVsZW1lbnQsICd1anM6ZW5hYmxlLXdpdGgnLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RvcEV2ZXJ5dGhpbmcpO1xuICAgICAgICByZXR1cm4gc2V0RGF0YShlbGVtZW50LCAndWpzOmRpc2FibGVkJywgbnVsbCk7XG4gICAgICB9O1xuXG4gICAgICBkaXNhYmxlRm9ybUVsZW1lbnRzID0gZnVuY3Rpb24oZm9ybSkge1xuICAgICAgICByZXR1cm4gZm9ybUVsZW1lbnRzKGZvcm0sIFJhaWxzLmZvcm1EaXNhYmxlU2VsZWN0b3IpLmZvckVhY2goZGlzYWJsZUZvcm1FbGVtZW50KTtcbiAgICAgIH07XG5cbiAgICAgIGRpc2FibGVGb3JtRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHJlcGxhY2VtZW50O1xuICAgICAgICBpZiAoZ2V0RGF0YShlbGVtZW50LCAndWpzOmRpc2FibGVkJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZW1lbnQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1kaXNhYmxlLXdpdGgnKTtcbiAgICAgICAgaWYgKHJlcGxhY2VtZW50ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAobWF0Y2hlcyhlbGVtZW50LCAnYnV0dG9uJykpIHtcbiAgICAgICAgICAgIHNldERhdGEoZWxlbWVudCwgJ3VqczplbmFibGUtd2l0aCcsIGVsZW1lbnQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldERhdGEoZWxlbWVudCwgJ3VqczplbmFibGUtd2l0aCcsIGVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHNldERhdGEoZWxlbWVudCwgJ3VqczpkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfTtcblxuICAgICAgZW5hYmxlRm9ybUVsZW1lbnRzID0gZnVuY3Rpb24oZm9ybSkge1xuICAgICAgICByZXR1cm4gZm9ybUVsZW1lbnRzKGZvcm0sIFJhaWxzLmZvcm1FbmFibGVTZWxlY3RvcikuZm9yRWFjaChlbmFibGVGb3JtRWxlbWVudCk7XG4gICAgICB9O1xuXG4gICAgICBlbmFibGVGb3JtRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsVGV4dDtcbiAgICAgICAgb3JpZ2luYWxUZXh0ID0gZ2V0RGF0YShlbGVtZW50LCAndWpzOmVuYWJsZS13aXRoJyk7XG4gICAgICAgIGlmIChvcmlnaW5hbFRleHQgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChtYXRjaGVzKGVsZW1lbnQsICdidXR0b24nKSkge1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBvcmlnaW5hbFRleHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBvcmlnaW5hbFRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldERhdGEoZWxlbWVudCwgJ3VqczplbmFibGUtd2l0aCcsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHNldERhdGEoZWxlbWVudCwgJ3VqczpkaXNhYmxlZCcsIG51bGwpO1xuICAgICAgfTtcblxuICAgICAgaXNYaHJSZWRpcmVjdCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciByZWYsIHhocjtcbiAgICAgICAgeGhyID0gKHJlZiA9IGV2ZW50LmRldGFpbCkgIT0gbnVsbCA/IHJlZlswXSA6IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuICh4aHIgIT0gbnVsbCA/IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIlgtWGhyLVJlZGlyZWN0XCIpIDogdm9pZCAwKSAhPSBudWxsO1xuICAgICAgfTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHN0b3BFdmVyeXRoaW5nO1xuXG4gICAgICBzdG9wRXZlcnl0aGluZyA9IFJhaWxzLnN0b3BFdmVyeXRoaW5nO1xuXG4gICAgICBSYWlscy5oYW5kbGVNZXRob2QgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBjc3JmUGFyYW0sIGNzcmZUb2tlbiwgZm9ybSwgZm9ybUNvbnRlbnQsIGhyZWYsIGxpbmssIG1ldGhvZDtcbiAgICAgICAgbGluayA9IHRoaXM7XG4gICAgICAgIG1ldGhvZCA9IGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLW1ldGhvZCcpO1xuICAgICAgICBpZiAoIW1ldGhvZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBocmVmID0gUmFpbHMuaHJlZihsaW5rKTtcbiAgICAgICAgY3NyZlRva2VuID0gUmFpbHMuY3NyZlRva2VuKCk7XG4gICAgICAgIGNzcmZQYXJhbSA9IFJhaWxzLmNzcmZQYXJhbSgpO1xuICAgICAgICBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICBmb3JtQ29udGVudCA9IFwiPGlucHV0IG5hbWU9J19tZXRob2QnIHZhbHVlPSdcIiArIG1ldGhvZCArIFwiJyB0eXBlPSdoaWRkZW4nIC8+XCI7XG4gICAgICAgIGlmICgoY3NyZlBhcmFtICE9IG51bGwpICYmIChjc3JmVG9rZW4gIT0gbnVsbCkgJiYgIVJhaWxzLmlzQ3Jvc3NEb21haW4oaHJlZikpIHtcbiAgICAgICAgICBmb3JtQ29udGVudCArPSBcIjxpbnB1dCBuYW1lPSdcIiArIGNzcmZQYXJhbSArIFwiJyB2YWx1ZT0nXCIgKyBjc3JmVG9rZW4gKyBcIicgdHlwZT0naGlkZGVuJyAvPlwiO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1Db250ZW50ICs9ICc8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIC8+JztcbiAgICAgICAgZm9ybS5tZXRob2QgPSAncG9zdCc7XG4gICAgICAgIGZvcm0uYWN0aW9uID0gaHJlZjtcbiAgICAgICAgZm9ybS50YXJnZXQgPSBsaW5rLnRhcmdldDtcbiAgICAgICAgZm9ybS5pbm5lckhUTUwgPSBmb3JtQ29udGVudDtcbiAgICAgICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1t0eXBlPVwic3VibWl0XCJdJykuY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHN0b3BFdmVyeXRoaW5nKGUpO1xuICAgICAgfTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFqYXgsIGZpcmUsIGdldERhdGEsIGlzQ3Jvc3NEb21haW4sIGlzUmVtb3RlLCBtYXRjaGVzLCBzZXJpYWxpemVFbGVtZW50LCBzZXREYXRhLCBzdG9wRXZlcnl0aGluZyxcbiAgICAgICAgc2xpY2UgPSBbXS5zbGljZTtcblxuICAgICAgbWF0Y2hlcyA9IFJhaWxzLm1hdGNoZXMsIGdldERhdGEgPSBSYWlscy5nZXREYXRhLCBzZXREYXRhID0gUmFpbHMuc2V0RGF0YSwgZmlyZSA9IFJhaWxzLmZpcmUsIHN0b3BFdmVyeXRoaW5nID0gUmFpbHMuc3RvcEV2ZXJ5dGhpbmcsIGFqYXggPSBSYWlscy5hamF4LCBpc0Nyb3NzRG9tYWluID0gUmFpbHMuaXNDcm9zc0RvbWFpbiwgc2VyaWFsaXplRWxlbWVudCA9IFJhaWxzLnNlcmlhbGl6ZUVsZW1lbnQ7XG5cbiAgICAgIGlzUmVtb3RlID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVtb3RlJyk7XG4gICAgICAgIHJldHVybiAodmFsdWUgIT0gbnVsbCkgJiYgdmFsdWUgIT09ICdmYWxzZSc7XG4gICAgICB9O1xuXG4gICAgICBSYWlscy5oYW5kbGVSZW1vdGUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBidXR0b24sIGRhdGEsIGRhdGFUeXBlLCBlbGVtZW50LCBtZXRob2QsIHVybCwgd2l0aENyZWRlbnRpYWxzO1xuICAgICAgICBlbGVtZW50ID0gdGhpcztcbiAgICAgICAgaWYgKCFpc1JlbW90ZShlbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmlyZShlbGVtZW50LCAnYWpheDpiZWZvcmUnKSkge1xuICAgICAgICAgIGZpcmUoZWxlbWVudCwgJ2FqYXg6c3RvcHBlZCcpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB3aXRoQ3JlZGVudGlhbHMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS13aXRoLWNyZWRlbnRpYWxzJyk7XG4gICAgICAgIGRhdGFUeXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpIHx8ICdzY3JpcHQnO1xuICAgICAgICBpZiAobWF0Y2hlcyhlbGVtZW50LCBSYWlscy5mb3JtU3VibWl0U2VsZWN0b3IpKSB7XG4gICAgICAgICAgYnV0dG9uID0gZ2V0RGF0YShlbGVtZW50LCAndWpzOnN1Ym1pdC1idXR0b24nKTtcbiAgICAgICAgICBtZXRob2QgPSBnZXREYXRhKGVsZW1lbnQsICd1anM6c3VibWl0LWJ1dHRvbi1mb3JtbWV0aG9kJykgfHwgZWxlbWVudC5tZXRob2Q7XG4gICAgICAgICAgdXJsID0gZ2V0RGF0YShlbGVtZW50LCAndWpzOnN1Ym1pdC1idXR0b24tZm9ybWFjdGlvbicpIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSB8fCBsb2NhdGlvbi5ocmVmO1xuICAgICAgICAgIGlmIChtZXRob2QudG9VcHBlckNhc2UoKSA9PT0gJ0dFVCcpIHtcbiAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC9cXD8uKiQvLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlbGVtZW50LmVuY3R5cGUgPT09ICdtdWx0aXBhcnQvZm9ybS1kYXRhJykge1xuICAgICAgICAgICAgZGF0YSA9IG5ldyBGb3JtRGF0YShlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChidXR0b24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICBkYXRhLmFwcGVuZChidXR0b24ubmFtZSwgYnV0dG9uLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IHNlcmlhbGl6ZUVsZW1lbnQoZWxlbWVudCwgYnV0dG9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0RGF0YShlbGVtZW50LCAndWpzOnN1Ym1pdC1idXR0b24nLCBudWxsKTtcbiAgICAgICAgICBzZXREYXRhKGVsZW1lbnQsICd1anM6c3VibWl0LWJ1dHRvbi1mb3JtbWV0aG9kJywgbnVsbCk7XG4gICAgICAgICAgc2V0RGF0YShlbGVtZW50LCAndWpzOnN1Ym1pdC1idXR0b24tZm9ybWFjdGlvbicsIG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoZXMoZWxlbWVudCwgUmFpbHMuYnV0dG9uQ2xpY2tTZWxlY3RvcikgfHwgbWF0Y2hlcyhlbGVtZW50LCBSYWlscy5pbnB1dENoYW5nZVNlbGVjdG9yKSkge1xuICAgICAgICAgIG1ldGhvZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1ldGhvZCcpO1xuICAgICAgICAgIHVybCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVybCcpO1xuICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVFbGVtZW50KGVsZW1lbnQsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmFtcycpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXRob2QgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1tZXRob2QnKTtcbiAgICAgICAgICB1cmwgPSBSYWlscy5ocmVmKGVsZW1lbnQpO1xuICAgICAgICAgIGRhdGEgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXJhbXMnKTtcbiAgICAgICAgfVxuICAgICAgICBhamF4KHtcbiAgICAgICAgICB0eXBlOiBtZXRob2QgfHwgJ0dFVCcsXG4gICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBkYXRhVHlwZTogZGF0YVR5cGUsXG4gICAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoZmlyZShlbGVtZW50LCAnYWpheDpiZWZvcmVTZW5kJywgW3hociwgb3B0aW9uc10pKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmaXJlKGVsZW1lbnQsICdhamF4OnNlbmQnLCBbeGhyXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmaXJlKGVsZW1lbnQsICdhamF4OnN0b3BwZWQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgYXJncztcbiAgICAgICAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgICAgICAgIHJldHVybiBmaXJlKGVsZW1lbnQsICdhamF4OnN1Y2Nlc3MnLCBhcmdzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBhcmdzO1xuICAgICAgICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGZpcmUoZWxlbWVudCwgJ2FqYXg6ZXJyb3InLCBhcmdzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBhcmdzO1xuICAgICAgICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGZpcmUoZWxlbWVudCwgJ2FqYXg6Y29tcGxldGUnLCBhcmdzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyb3NzRG9tYWluOiBpc0Nyb3NzRG9tYWluKHVybCksXG4gICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiAod2l0aENyZWRlbnRpYWxzICE9IG51bGwpICYmIHdpdGhDcmVkZW50aWFscyAhPT0gJ2ZhbHNlJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0b3BFdmVyeXRoaW5nKGUpO1xuICAgICAgfTtcblxuICAgICAgUmFpbHMuZm9ybVN1Ym1pdEJ1dHRvbkNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgYnV0dG9uLCBmb3JtO1xuICAgICAgICBidXR0b24gPSB0aGlzO1xuICAgICAgICBmb3JtID0gYnV0dG9uLmZvcm07XG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnV0dG9uLm5hbWUpIHtcbiAgICAgICAgICBzZXREYXRhKGZvcm0sICd1anM6c3VibWl0LWJ1dHRvbicsIHtcbiAgICAgICAgICAgIG5hbWU6IGJ1dHRvbi5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGJ1dHRvbi52YWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNldERhdGEoZm9ybSwgJ3Vqczpmb3Jtbm92YWxpZGF0ZS1idXR0b24nLCBidXR0b24uZm9ybU5vVmFsaWRhdGUpO1xuICAgICAgICBzZXREYXRhKGZvcm0sICd1anM6c3VibWl0LWJ1dHRvbi1mb3JtYWN0aW9uJywgYnV0dG9uLmdldEF0dHJpYnV0ZSgnZm9ybWFjdGlvbicpKTtcbiAgICAgICAgcmV0dXJuIHNldERhdGEoZm9ybSwgJ3VqczpzdWJtaXQtYnV0dG9uLWZvcm1tZXRob2QnLCBidXR0b24uZ2V0QXR0cmlidXRlKCdmb3JtbWV0aG9kJykpO1xuICAgICAgfTtcblxuICAgICAgUmFpbHMucHJldmVudEluc2lnbmlmaWNhbnRDbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGRhdGEsIGluc2lnbmlmaWNhbnRNZXRhQ2xpY2ssIGxpbmssIG1ldGFDbGljaywgbWV0aG9kLCBub25QcmltYXJ5TW91c2VDbGljaztcbiAgICAgICAgbGluayA9IHRoaXM7XG4gICAgICAgIG1ldGhvZCA9IChsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1tZXRob2QnKSB8fCAnR0VUJykudG9VcHBlckNhc2UoKTtcbiAgICAgICAgZGF0YSA9IGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmFtcycpO1xuICAgICAgICBtZXRhQ2xpY2sgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgICAgICBpbnNpZ25pZmljYW50TWV0YUNsaWNrID0gbWV0YUNsaWNrICYmIG1ldGhvZCA9PT0gJ0dFVCcgJiYgIWRhdGE7XG4gICAgICAgIG5vblByaW1hcnlNb3VzZUNsaWNrID0gKGUuYnV0dG9uICE9IG51bGwpICYmIGUuYnV0dG9uICE9PSAwO1xuICAgICAgICBpZiAobm9uUHJpbWFyeU1vdXNlQ2xpY2sgfHwgaW5zaWduaWZpY2FudE1ldGFDbGljaykge1xuICAgICAgICAgIHJldHVybiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSkuY2FsbCh0aGlzKTtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgJCwgQ1NSRlByb3RlY3Rpb24sIGRlbGVnYXRlLCBkaXNhYmxlRWxlbWVudCwgZW5hYmxlRWxlbWVudCwgZmlyZSwgZm9ybVN1Ym1pdEJ1dHRvbkNsaWNrLCBnZXREYXRhLCBoYW5kbGVDb25maXJtLCBoYW5kbGVEaXNhYmxlZEVsZW1lbnQsIGhhbmRsZU1ldGhvZCwgaGFuZGxlUmVtb3RlLCBsb2FkQ1NQTm9uY2UsIHByZXZlbnRJbnNpZ25pZmljYW50Q2xpY2ssIHJlZnJlc2hDU1JGVG9rZW5zO1xuXG4gICAgICBmaXJlID0gUmFpbHMuZmlyZSwgZGVsZWdhdGUgPSBSYWlscy5kZWxlZ2F0ZSwgZ2V0RGF0YSA9IFJhaWxzLmdldERhdGEsICQgPSBSYWlscy4kLCByZWZyZXNoQ1NSRlRva2VucyA9IFJhaWxzLnJlZnJlc2hDU1JGVG9rZW5zLCBDU1JGUHJvdGVjdGlvbiA9IFJhaWxzLkNTUkZQcm90ZWN0aW9uLCBsb2FkQ1NQTm9uY2UgPSBSYWlscy5sb2FkQ1NQTm9uY2UsIGVuYWJsZUVsZW1lbnQgPSBSYWlscy5lbmFibGVFbGVtZW50LCBkaXNhYmxlRWxlbWVudCA9IFJhaWxzLmRpc2FibGVFbGVtZW50LCBoYW5kbGVEaXNhYmxlZEVsZW1lbnQgPSBSYWlscy5oYW5kbGVEaXNhYmxlZEVsZW1lbnQsIGhhbmRsZUNvbmZpcm0gPSBSYWlscy5oYW5kbGVDb25maXJtLCBwcmV2ZW50SW5zaWduaWZpY2FudENsaWNrID0gUmFpbHMucHJldmVudEluc2lnbmlmaWNhbnRDbGljaywgaGFuZGxlUmVtb3RlID0gUmFpbHMuaGFuZGxlUmVtb3RlLCBmb3JtU3VibWl0QnV0dG9uQ2xpY2sgPSBSYWlscy5mb3JtU3VibWl0QnV0dG9uQ2xpY2ssIGhhbmRsZU1ldGhvZCA9IFJhaWxzLmhhbmRsZU1ldGhvZDtcblxuICAgICAgaWYgKCh0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIGpRdWVyeSAhPT0gbnVsbCkgJiYgKGpRdWVyeS5hamF4ICE9IG51bGwpKSB7XG4gICAgICAgIGlmIChqUXVlcnkucmFpbHMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lmIHlvdSBsb2FkIGJvdGgganF1ZXJ5X3VqcyBhbmQgcmFpbHMtdWpzLCB1c2UgcmFpbHMtdWpzIG9ubHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgalF1ZXJ5LnJhaWxzID0gUmFpbHM7XG4gICAgICAgIGpRdWVyeS5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywgeGhyKSB7XG4gICAgICAgICAgaWYgKCFvcHRpb25zLmNyb3NzRG9tYWluKSB7XG4gICAgICAgICAgICByZXR1cm4gQ1NSRlByb3RlY3Rpb24oeGhyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBSYWlscy5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAod2luZG93Ll9yYWlsc19sb2FkZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JhaWxzLXVqcyBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZCEnKTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZXNob3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKFJhaWxzLmZvcm1FbmFibGVTZWxlY3RvcikuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgaWYgKGdldERhdGEoZWwsICd1anM6ZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZW5hYmxlRWxlbWVudChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuICQoUmFpbHMubGlua0Rpc2FibGVTZWxlY3RvcikuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgaWYgKGdldERhdGEoZWwsICd1anM6ZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZW5hYmxlRWxlbWVudChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMubGlua0Rpc2FibGVTZWxlY3RvciwgJ2FqYXg6Y29tcGxldGUnLCBlbmFibGVFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmxpbmtEaXNhYmxlU2VsZWN0b3IsICdhamF4OnN0b3BwZWQnLCBlbmFibGVFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmJ1dHRvbkRpc2FibGVTZWxlY3RvciwgJ2FqYXg6Y29tcGxldGUnLCBlbmFibGVFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmJ1dHRvbkRpc2FibGVTZWxlY3RvciwgJ2FqYXg6c3RvcHBlZCcsIGVuYWJsZUVsZW1lbnQpO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMubGlua0NsaWNrU2VsZWN0b3IsICdjbGljaycsIHByZXZlbnRJbnNpZ25pZmljYW50Q2xpY2spO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMubGlua0NsaWNrU2VsZWN0b3IsICdjbGljaycsIGhhbmRsZURpc2FibGVkRWxlbWVudCk7XG4gICAgICAgIGRlbGVnYXRlKGRvY3VtZW50LCBSYWlscy5saW5rQ2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgaGFuZGxlQ29uZmlybSk7XG4gICAgICAgIGRlbGVnYXRlKGRvY3VtZW50LCBSYWlscy5saW5rQ2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgZGlzYWJsZUVsZW1lbnQpO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMubGlua0NsaWNrU2VsZWN0b3IsICdjbGljaycsIGhhbmRsZVJlbW90ZSk7XG4gICAgICAgIGRlbGVnYXRlKGRvY3VtZW50LCBSYWlscy5saW5rQ2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgaGFuZGxlTWV0aG9kKTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmJ1dHRvbkNsaWNrU2VsZWN0b3IsICdjbGljaycsIHByZXZlbnRJbnNpZ25pZmljYW50Q2xpY2spO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuYnV0dG9uQ2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgaGFuZGxlRGlzYWJsZWRFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmJ1dHRvbkNsaWNrU2VsZWN0b3IsICdjbGljaycsIGhhbmRsZUNvbmZpcm0pO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuYnV0dG9uQ2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgZGlzYWJsZUVsZW1lbnQpO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuYnV0dG9uQ2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgaGFuZGxlUmVtb3RlKTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmlucHV0Q2hhbmdlU2VsZWN0b3IsICdjaGFuZ2UnLCBoYW5kbGVEaXNhYmxlZEVsZW1lbnQpO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuaW5wdXRDaGFuZ2VTZWxlY3RvciwgJ2NoYW5nZScsIGhhbmRsZUNvbmZpcm0pO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuaW5wdXRDaGFuZ2VTZWxlY3RvciwgJ2NoYW5nZScsIGhhbmRsZVJlbW90ZSk7XG4gICAgICAgIGRlbGVnYXRlKGRvY3VtZW50LCBSYWlscy5mb3JtU3VibWl0U2VsZWN0b3IsICdzdWJtaXQnLCBoYW5kbGVEaXNhYmxlZEVsZW1lbnQpO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuZm9ybVN1Ym1pdFNlbGVjdG9yLCAnc3VibWl0JywgaGFuZGxlQ29uZmlybSk7XG4gICAgICAgIGRlbGVnYXRlKGRvY3VtZW50LCBSYWlscy5mb3JtU3VibWl0U2VsZWN0b3IsICdzdWJtaXQnLCBoYW5kbGVSZW1vdGUpO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuZm9ybVN1Ym1pdFNlbGVjdG9yLCAnc3VibWl0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBkaXNhYmxlRWxlbWVudChlKTtcbiAgICAgICAgICB9KSwgMTMpO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmZvcm1TdWJtaXRTZWxlY3RvciwgJ2FqYXg6c2VuZCcsIGRpc2FibGVFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmZvcm1TdWJtaXRTZWxlY3RvciwgJ2FqYXg6Y29tcGxldGUnLCBlbmFibGVFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmZvcm1JbnB1dENsaWNrU2VsZWN0b3IsICdjbGljaycsIHByZXZlbnRJbnNpZ25pZmljYW50Q2xpY2spO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuZm9ybUlucHV0Q2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgaGFuZGxlRGlzYWJsZWRFbGVtZW50KTtcbiAgICAgICAgZGVsZWdhdGUoZG9jdW1lbnQsIFJhaWxzLmZvcm1JbnB1dENsaWNrU2VsZWN0b3IsICdjbGljaycsIGhhbmRsZUNvbmZpcm0pO1xuICAgICAgICBkZWxlZ2F0ZShkb2N1bWVudCwgUmFpbHMuZm9ybUlucHV0Q2xpY2tTZWxlY3RvciwgJ2NsaWNrJywgZm9ybVN1Ym1pdEJ1dHRvbkNsaWNrKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlZnJlc2hDU1JGVG9rZW5zKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRDU1BOb25jZSk7XG4gICAgICAgIHJldHVybiB3aW5kb3cuX3JhaWxzX2xvYWRlZCA9IHRydWU7XG4gICAgICB9O1xuXG4gICAgICBpZiAod2luZG93LlJhaWxzID09PSBSYWlscyAmJiBmaXJlKGRvY3VtZW50LCAncmFpbHM6YXR0YWNoQmluZGluZ3MnKSkge1xuICAgICAgICBSYWlscy5zdGFydCgpO1xuICAgICAgfVxuXG4gICAgfSkuY2FsbCh0aGlzKTtcbiAgfSkuY2FsbCh0aGlzKTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUmFpbHM7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoUmFpbHMpO1xuICB9XG59KS5jYWxsKHRoaXMpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@rails/ujs/lib/assets/compiled/rails-ujs.js\n");

/***/ }),

/***/ "./node_modules/turbolinks/dist/turbolinks.js":
/*!****************************************************!*\
  !*** ./node_modules/turbolinks/dist/turbolinks.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\nTurbolinks 5.2.0\nCopyright  2018 Basecamp, LLC\n */\n(function(){var t=this;(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener}(),visit:function(t,r){return e.controller.visit(t,r)},clearCache:function(){return e.controller.clearCache()},setProgressBarDelay:function(t){return e.controller.setProgressBarDelay(t)}}}).call(this)}).call(t);var e=t.Turbolinks;(function(){(function(){var t,r,n,o=[].slice;e.copyObject=function(t){var e,r,n;r={};for(e in t)n=t[e],r[e]=n;return r},e.closest=function(e,r){return t.call(e,r)},t=function(){var t,e;return t=document.documentElement,null!=(e=t.closest)?e:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&r.call(e,t))return e;e=e.parentNode}}}(),e.defer=function(t){return setTimeout(t,1)},e.throttle=function(t){var e;return e=null,function(){var r;return r=1<=arguments.length?o.call(arguments,0):[],null!=e?e:e=requestAnimationFrame(function(n){return function(){return e=null,t.apply(n,r)}}(this))}},e.dispatch=function(t,e){var r,o,i,s,a,u;return a=null!=e?e:{},u=a.target,r=a.cancelable,o=a.data,i=document.createEvent(\"Events\"),i.initEvent(t,!0,r===!0),i.data=null!=o?o:{},i.cancelable&&!n&&(s=i.preventDefault,i.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,\"defaultPrevented\",{get:function(){return!0}}),s.call(this)}),(null!=u?u:document).dispatchEvent(i),i},n=function(){var t;return t=document.createEvent(\"Events\"),t.initEvent(\"test\",!0,!0),t.preventDefault(),t.defaultPrevented}(),e.match=function(t,e){return r.call(t,e)},r=function(){var t,e,r,n;return t=document.documentElement,null!=(e=null!=(r=null!=(n=t.matchesSelector)?n:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector}(),e.uuid=function(){var t,e,r;for(r=\"\",t=e=1;36>=e;t=++e)r+=9===t||14===t||19===t||24===t?\"-\":15===t?\"4\":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return r}}).call(this),function(){e.Location=function(){function t(t){var e,r;null==t&&(t=\"\"),r=document.createElement(\"a\"),r.href=t.toString(),this.absoluteURL=r.href,e=r.hash.length,2>e?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=r.hash.slice(1))}var e,r,n,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split(\"/\",3).join(\"/\")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\\/\\/[^\\/]*(\\/[^?;]*)/))?e[1]:void 0)?t:\"/\"},t.prototype.getPathComponents=function(){return this.getPath().split(\"/\").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\\.[^.]*$/))?e[0]:void 0)?t:\"\"},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=r(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},r=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return n(t,\"/\")?t:t+\"/\"},o=function(t,e){return t.slice(0,e.length)===e},n=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.HttpRequest=function(){function r(r,n,o){this.delegate=r,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=e.Location.wrap(n).requestURL,this.referrer=e.Location.wrap(o).absoluteURL,this.createXHR()}return r.NETWORK_FAILURE=0,r.TIMEOUT_FAILURE=-1,r.timeout=60,r.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,\"function\"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},r.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},r.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},r.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader(\"Turbolinks-Location\")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},r.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},r.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},r.prototype.requestCanceled=function(){return this.endRequest()},r.prototype.notifyApplicationBeforeRequestStart=function(){return e.dispatch(\"turbolinks:request-start\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.notifyApplicationAfterRequestEnd=function(){return e.dispatch(\"turbolinks:request-end\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open(\"GET\",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader(\"Accept\",\"text/html, application/xhtml+xml\"),this.xhr.setRequestHeader(\"Turbolinks-Referrer\",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},r.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},r.prototype.setProgress=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},r.prototype.destroy=function(){var t;return this.setProgress(1),\"function\"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var r;return r=300,e.defaultCSS=\".turbolinks-progress-bar {\\n  position: fixed;\\n  display: block;\\n  top: 0;\\n  left: 0;\\n  height: 3px;\\n  background: #0076ff;\\n  z-index: 9999;\\n  transition: width \"+r+\"ms ease-out, opacity \"+r/2+\"ms \"+r/2+\"ms ease-in;\\n  transform: translate3d(0, 0, 0);\\n}\",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},e.prototype.setValue=function(t){return this.value=t,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*r)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,r)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+\"%\"}}(this))},e.prototype.createStylesheetElement=function(){var t;return t=document.createElement(\"style\"),t.type=\"text/css\",t.textContent=this.constructor.defaultCSS,t},e.prototype.createProgressElement=function(){var t;return t=document.createElement(\"div\"),t.className=\"turbolinks-progress-bar\",t},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.BrowserAdapter=function(){function r(r){this.controller=r,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new e.ProgressBar}var n,o,i;return i=e.HttpRequest,n=i.NETWORK_FAILURE,o=i.TIMEOUT_FAILURE,r.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},r.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},r.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||\"restore\"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},r.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},r.prototype.visitRequestCompleted=function(t){return t.loadResponse()},r.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case o:return this.reload();default:return t.loadResponse()}},r.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},r.prototype.visitCompleted=function(t){return t.followRedirect()},r.prototype.pageInvalidated=function(){return this.reload()},r.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},r.prototype.showProgressBar=function(){return this.progressBar.show()},r.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},r.prototype.reload=function(){return window.location.reload()},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.History=function(){function r(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"popstate\",this.onPopState,!1),addEventListener(\"load\",this.onPageLoad,!1),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"popstate\",this.onPopState,!1),removeEventListener(\"load\",this.onPageLoad,!1),this.started=!1):void 0},r.prototype.push=function(t,r){return t=e.Location.wrap(t),this.update(\"push\",t,r)},r.prototype.replace=function(t,r){return t=e.Location.wrap(t),this.update(\"replace\",t,r)},r.prototype.onPopState=function(t){var r,n,o,i;return this.shouldHandlePopState()&&(i=null!=(n=t.state)?n.turbolinks:void 0)?(r=e.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(r,o)):void 0},r.prototype.onPageLoad=function(t){return e.defer(function(t){return function(){return t.pageLoaded=!0}}(this))},r.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},r.prototype.pageIsLoaded=function(){return this.pageLoaded||\"complete\"===document.readyState},r.prototype.update=function(t,e,r){var n;return n={turbolinks:{restorationIdentifier:r}},history[t+\"State\"](n,null,e)},r}()}.call(this),function(){e.HeadDetails=function(){function t(t){var e,r,n,s,a,u;for(this.elements={},n=0,a=t.length;a>n;n++)u=t[n],u.nodeType===Node.ELEMENT_NODE&&(s=u.outerHTML,r=null!=(e=this.elements)[s]?e[s]:e[s]={type:i(u),tracked:o(u),elements:[]},r.elements.push(u))}var e,r,n,o,i;return t.fromHeadElement=function(t){var e;return new this(null!=(e=null!=t?t.childNodes:void 0)?e:[])},t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t,e;return function(){var r,n;r=this.elements,n=[];for(t in r)e=r[t].tracked,e&&n.push(t);return n}.call(this).join(\"\")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"script\",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"stylesheet\",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var r,n,o,i,s,a;o=this.elements,s=[];for(n in o)i=o[n],a=i.type,r=i.elements,a!==t||e.hasElementWithKey(n)||s.push(r[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,r,n,o,i,s;r=[],n=this.elements;for(e in n)o=n[e],s=o.type,i=o.tracked,t=o.elements,null!=s||i?t.length>1&&r.push.apply(r,t.slice(1)):r.push.apply(r,t);return r},t.prototype.getMetaValue=function(t){var e;return null!=(e=this.findMetaElementByName(t))?e.getAttribute(\"content\"):void 0},t.prototype.findMetaElementByName=function(t){var r,n,o,i;r=void 0,i=this.elements;for(o in i)n=i[o].elements,e(n[0],t)&&(r=n[0]);return r},i=function(t){return r(t)?\"script\":n(t)?\"stylesheet\":void 0},o=function(t){return\"reload\"===t.getAttribute(\"data-turbolinks-track\")},r=function(t){var e;return e=t.tagName.toLowerCase(),\"script\"===e},n=function(t){var e;return e=t.tagName.toLowerCase(),\"style\"===e||\"link\"===e&&\"stylesheet\"===t.getAttribute(\"rel\")},e=function(t,e){var r;return r=t.tagName.toLowerCase(),\"meta\"===r&&t.getAttribute(\"name\")===e},t}()}.call(this),function(){e.Snapshot=function(){function t(t,e){this.headDetails=t,this.bodyElement=e}return t.wrap=function(t){return t instanceof this?t:\"string\"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)},t.fromHTMLString=function(t){var e;return e=document.createElement(\"html\"),e.innerHTML=t,this.fromHTMLElement(e)},t.fromHTMLElement=function(t){var r,n,o,i;return o=t.querySelector(\"head\"),r=null!=(i=t.querySelector(\"body\"))?i:document.createElement(\"body\"),n=e.HeadDetails.fromHeadElement(o),new this(n,r)},t.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},t.prototype.getRootLocation=function(){var t,r;return r=null!=(t=this.getSetting(\"root\"))?t:\"/\",new e.Location(r)},t.prototype.getCacheControlValue=function(){return this.getSetting(\"cache-control\")},t.prototype.getElementForAnchor=function(t){try{return this.bodyElement.querySelector(\"[id='\"+t+\"'], a[name='\"+t+\"']\")}catch(e){}},t.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll(\"[id][data-turbolinks-permanent]\")},t.prototype.getPermanentElementById=function(t){return this.bodyElement.querySelector(\"#\"+t+\"[data-turbolinks-permanent]\")},t.prototype.getPermanentElementsPresentInSnapshot=function(t){var e,r,n,o,i;for(o=this.getPermanentElements(),i=[],r=0,n=o.length;n>r;r++)e=o[r],t.getPermanentElementById(e.id)&&i.push(e);return i},t.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector(\"[autofocus]\")},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return\"no-preview\"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return\"no-cache\"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return\"reload\"!==this.getSetting(\"visit-control\")},t.prototype.getSetting=function(t){return this.headDetails.getMetaValue(\"turbolinks-\"+t)},t}()}.call(this),function(){var t=[].slice;e.Renderer=function(){function e(){}var r;return e.render=function(){var e,r,n,o;return n=arguments[0],r=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],o=function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(this,e,function(){}),o.delegate=n,o.render(r),o},e.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(t){var e;return\"false\"===t.getAttribute(\"data-turbolinks-eval\")?t:(e=document.createElement(\"script\"),e.textContent=t.textContent,e.async=!1,r(e,t),e)},r=function(t,e){var r,n,o,i,s,a,u;for(i=e.attributes,a=[],r=0,n=i.length;n>r;r++)s=i[r],o=s.name,u=s.value,a.push(t.setAttribute(o,u));return a},e}()}.call(this),function(){var t,r,n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.SnapshotRenderer=function(e){function o(t,e,r){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(o,e),o.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var t;return t=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var t,e,r,n,o;for(n=this.getNewHeadStylesheetElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.copyNewHeadScriptElements=function(){var t,e,r,n,o;for(n=this.getNewHeadScriptElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getCurrentHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.removeChild(t));return o},o.prototype.copyNewHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getNewHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var e,n,o,i,s,a,u;for(a=this.getCurrentBodyPermanentElements(),u=[],e=0,n=a.length;n>e;e++)i=a[e],s=t(i),o=this.newSnapshot.getPermanentElementById(i.id),r(i,s.element),r(o,i),u.push(s);return u},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(t){var e,n,o,i,s,a,u;for(u=[],o=0,i=t.length;i>o;o++)a=t[o],n=a.element,s=a.permanentElement,e=s.cloneNode(!0),u.push(r(n,e));return u},o.prototype.activateNewBodyScriptElements=function(){var t,e,n,o,i,s;for(i=this.getNewBodyScriptElements(),s=[],e=0,o=i.length;o>e;e++)n=i[e],t=this.createScriptElement(n),s.push(r(n,t));return s},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.newSnapshot.findFirstAutofocusableElement())?t.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll(\"script\")},o}(e.Renderer),t=function(t){var e;return e=document.createElement(\"meta\"),e.setAttribute(\"name\",\"turbolinks-permanent-placeholder\"),e.setAttribute(\"content\",t.id),{element:e,permanentElement:t}},r=function(t,e){var r;return(r=t.parentNode)?r.replaceChild(e,t):void 0}}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.ErrorRenderer=function(e){function r(t){var e;e=document.createElement(\"html\"),e.innerHTML=t,this.newHead=e.querySelector(\"head\"),this.newBody=e.querySelector(\"body\")}return t(r,e),r.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceHeadAndBody(),e.activateBodyScriptElements(),t()}}(this))},r.prototype.replaceHeadAndBody=function(){var t,e;return e=document.head,t=document.body,e.parentNode.replaceChild(this.newHead,e),t.parentNode.replaceChild(this.newBody,t)},r.prototype.activateBodyScriptElements=function(){var t,e,r,n,o,i;for(n=this.getScriptElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},r.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll(\"script\")},r}(e.Renderer)}.call(this),function(){e.View=function(){function t(t){this.delegate=t,this.htmlElement=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return e.Snapshot.fromHTMLElement(this.htmlElement)},t.prototype.render=function(t,e){var r,n,o;return o=t.snapshot,r=t.error,n=t.isPreview,this.markAsPreview(n),null!=o?this.renderSnapshot(o,n,e):this.renderError(r,e)},t.prototype.markAsPreview=function(t){return t?this.htmlElement.setAttribute(\"data-turbolinks-preview\",\"\"):this.htmlElement.removeAttribute(\"data-turbolinks-preview\")},t.prototype.renderSnapshot=function(t,r,n){return e.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),e.Snapshot.wrap(t),r)},t.prototype.renderError=function(t,r){return e.ErrorRenderer.render(this.delegate,r,t)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ScrollManager=function(){function r(r){this.delegate=r,this.onScroll=t(this.onScroll,this),this.onScroll=e.throttle(this.onScroll)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"scroll\",this.onScroll,!1),this.onScroll(),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"scroll\",this.onScroll,!1),this.started=!1):void 0},r.prototype.scrollToElement=function(t){return t.scrollIntoView()},r.prototype.scrollToPosition=function(t){var e,r;return e=t.x,r=t.y,window.scrollTo(e,r)},r.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},r.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},r}()}.call(this),function(){e.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var r;return t.prototype.has=function(t){var e;return e=r(t),e in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=r(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=r(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=r(t),e=this.keys.indexOf(n),e>-1&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,r,n,o;for(n=this.keys.splice(this.size),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(delete this.snapshots[e]);return o},r=function(t){return e.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Visit=function(){function r(r,n,o){this.controller=r,this.action=o,this.performScroll=t(this.performScroll,this),this.identifier=e.uuid(),this.location=e.Location.wrap(n),this.adapter=this.controller.adapter,this.state=\"initialized\",this.timingMetrics={}}var n;return r.prototype.start=function(){return\"initialized\"===this.state?(this.recordTimingMetric(\"visitStart\"),this.state=\"started\",this.adapter.visitStarted(this)):void 0},r.prototype.cancel=function(){var t;return\"started\"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state=\"canceled\"):void 0},r.prototype.complete=function(){var t;return\"started\"===this.state?(this.recordTimingMetric(\"visitEnd\"),this.state=\"completed\",\"function\"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},r.prototype.fail=function(){var t;return\"started\"===this.state?(this.state=\"failed\",\"function\"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},r.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?\"replace\":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},r.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new e.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},r.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||\"restore\"!==this.action&&!t.isPreviewable()?void 0:t},r.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},r.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var r;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),\"function\"==typeof(r=this.adapter).visitRendered&&r.visitRendered(this),t?void 0:this.complete()})):void 0},r.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),\"function\"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),\"function\"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},r.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},r.prototype.requestStarted=function(){var t;return this.recordTimingMetric(\"requestStart\"),\"function\"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},r.prototype.requestProgressed=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},r.prototype.requestCompletedWithResponse=function(t,r){return this.response=t,null!=r&&(this.redirectedToLocation=e.Location.wrap(r)),this.adapter.visitRequestCompleted(this)},r.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},r.prototype.requestFinished=function(){var t;return this.recordTimingMetric(\"requestEnd\"),\"function\"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},r.prototype.performScroll=function(){return this.scrolled?void 0:(\"restore\"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},r.prototype.scrollToRestoredPosition=function(){var t,e;return t=null!=(e=this.restorationData)?e.scrollPosition:void 0,null!=t?(this.controller.scrollToPosition(t),!0):void 0},r.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},r.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},r.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},r.prototype.getTimingMetrics=function(){return e.copyObject(this.timingMetrics)},n=function(t){switch(t){case\"replace\":return\"replaceHistoryWithLocationAndRestorationIdentifier\";case\"advance\":case\"restore\":return\"pushHistoryWithLocationAndRestorationIdentifier\"}},r.prototype.shouldIssueRequest=function(){return\"restore\"===this.action?!this.hasCachedSnapshot():!0},r.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},r.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},r.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Controller=function(){function r(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new e.History(this),this.view=new e.View(this),this.scrollManager=new e.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return r.prototype.start=function(){return e.supported&&!this.started?(addEventListener(\"click\",this.clickCaptured,!0),addEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},r.prototype.disable=function(){return this.enabled=!1},r.prototype.stop=function(){return this.started?(removeEventListener(\"click\",this.clickCaptured,!0),removeEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},r.prototype.clearCache=function(){return this.cache=new e.SnapshotCache(10)},r.prototype.visit=function(t,r){var n,o;return null==r&&(r={}),t=e.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(o=r.action)?o:\"advance\",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},r.prototype.startVisitToLocationWithAction=function(t,r,n){var o;return e.supported?(o=this.getRestorationDataForIdentifier(n),this.startVisit(t,r,{restorationData:o})):window.location=t},r.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},r.prototype.startHistory=function(){return this.location=e.Location.wrap(window.location),this.restorationIdentifier=e.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.stopHistory=function(){return this.history.stop()},r.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},r.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,r){var n;return this.restorationIdentifier=r,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,\"restore\",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=e.Location.wrap(t)):this.adapter.pageInvalidated()},r.prototype.getCachedSnapshotForLocation=function(t){var e;return null!=(e=this.cache.get(t))?e.clone():void 0},r.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable();\n},r.prototype.cacheSnapshot=function(){var t,r;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),r=this.view.getSnapshot(),t=this.lastRenderedLocation,e.defer(function(e){return function(){return e.cache.put(t,r.clone())}}(this))):void 0},r.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},r.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},r.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},r.prototype.scrollPositionChanged=function(t){var e;return e=this.getCurrentRestorationData(),e.scrollPosition=t},r.prototype.render=function(t,e){return this.view.render(t,e)},r.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},r.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},r.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},r.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},r.prototype.clickCaptured=function(){return removeEventListener(\"click\",this.clickBubbled,!1),addEventListener(\"click\",this.clickBubbled,!1)},r.prototype.clickBubbled=function(t){var e,r,n;return this.enabled&&this.clickEventIsSignificant(t)&&(r=this.getVisitableLinkForNode(t.target))&&(n=this.getVisitableLocationForLink(r))&&this.applicationAllowsFollowingLinkToLocation(r,n)?(t.preventDefault(),e=this.getActionForLink(r),this.visit(n,{action:e})):void 0},r.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){var r;return r=this.notifyApplicationAfterClickingLinkToLocation(t,e),!r.defaultPrevented},r.prototype.applicationAllowsVisitingLocation=function(t){var e;return e=this.notifyApplicationBeforeVisitingLocation(t),!e.defaultPrevented},r.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,r){return e.dispatch(\"turbolinks:click\",{target:t,data:{url:r.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationBeforeVisitingLocation=function(t){return e.dispatch(\"turbolinks:before-visit\",{data:{url:t.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationAfterVisitingLocation=function(t){return e.dispatch(\"turbolinks:visit\",{data:{url:t.absoluteURL}})},r.prototype.notifyApplicationBeforeCachingSnapshot=function(){return e.dispatch(\"turbolinks:before-cache\")},r.prototype.notifyApplicationBeforeRender=function(t){return e.dispatch(\"turbolinks:before-render\",{data:{newBody:t}})},r.prototype.notifyApplicationAfterRender=function(){return e.dispatch(\"turbolinks:render\")},r.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),e.dispatch(\"turbolinks:load\",{data:{url:this.location.absoluteURL,timing:t}})},r.prototype.startVisit=function(t,e,r){var n;return null!=(n=this.currentVisit)&&n.cancel(),this.currentVisit=this.createVisit(t,e,r),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},r.prototype.createVisit=function(t,r,n){var o,i,s,a,u;return i=null!=n?n:{},a=i.restorationIdentifier,s=i.restorationData,o=i.historyChanged,u=new e.Visit(this,t,r),u.restorationIdentifier=null!=a?a:e.uuid(),u.restorationData=e.copyObject(s),u.historyChanged=o,u.referrer=this.location,u},r.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},r.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},r.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?e.closest(t,\"a[href]:not([target]):not([download])\"):void 0},r.prototype.getVisitableLocationForLink=function(t){var r;return r=new e.Location(t.getAttribute(\"href\")),this.locationIsVisitable(r)?r:void 0},r.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute(\"data-turbolinks-action\"))?e:\"advance\"},r.prototype.nodeIsVisitable=function(t){var r;return(r=e.closest(t,\"[data-turbolinks]\"))?\"false\"!==r.getAttribute(\"data-turbolinks\"):!0},r.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},r.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},r.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},r}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute(\"data-turbolinks-suppress-warning\"))for(;t=t.parentNode;)if(t===document.body)return console.warn(\"You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\\n\\nLoad your application\\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\\n\\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\\n\\n\\u2014\\u2014\\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s\",e.outerHTML)}()}.call(this),function(){var t,r,n;e.start=function(){return r()?(null==e.controller&&(e.controller=t()),e.controller.start()):void 0},r=function(){return null==window.Turbolinks&&(window.Turbolinks=e),n()},t=function(){var t;return t=new e.Controller,t.adapter=new e.BrowserAdapter(t),t},n=function(){return window.Turbolinks===e},n()&&e.start()}.call(this)}).call(this), true&&module.exports?module.exports=e: true&&!(__WEBPACK_AMD_DEFINE_FACTORY__ = (e),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))}).call(this);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdHVyYm9saW5rcy9kaXN0L3R1cmJvbGlua3MuanM/MzNjYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVyxZQUFZLFlBQVksaUJBQWlCLHFCQUFxQix5R0FBeUcsdUJBQXVCLCtCQUErQix1QkFBdUIsaUNBQWlDLGlDQUFpQyw2Q0FBNkMsYUFBYSxVQUFVLG1CQUFtQixZQUFZLFlBQVkscUJBQXFCLHlCQUF5QixVQUFVLEtBQUsseUJBQXlCLFNBQVMseUJBQXlCLG1CQUFtQixjQUFjLFFBQVEsb0VBQW9FLE1BQU0sV0FBVyxFQUFFLEVBQUUsd0RBQXdELGlCQUFpQix1QkFBdUIsdUJBQXVCLHdCQUF3QixNQUFNLHlCQUF5QixNQUFNLGtHQUFrRyxrQkFBa0IsNEJBQTRCLFNBQVMsMEJBQTBCLGdCQUFnQixxQkFBcUIsaUhBQWlILG1FQUFtRSw2RUFBNkUsZUFBZSxVQUFVLGVBQWUsMENBQTBDLGNBQWMsTUFBTSx3R0FBd0cseUJBQXlCLG1CQUFtQixjQUFjLFlBQVkseUpBQXlKLHFCQUFxQixVQUFVLGVBQWUsTUFBTSxvSkFBb0osVUFBVSx3QkFBd0Isc0JBQXNCLGNBQWMsUUFBUSwwTkFBME4sWUFBWSwwQkFBMEIsdUNBQXVDLGtDQUFrQywrQ0FBK0MsZ0NBQWdDLFFBQVEsaUVBQWlFLDBCQUEwQiwwQ0FBMEMsMENBQTBDLDZDQUE2Qyw2Q0FBNkMscUNBQXFDLFFBQVEsMEZBQTBGLCtCQUErQixnRUFBZ0Usc0NBQXNDLE1BQU0sdURBQXVELG1DQUFtQyx5REFBeUQsbUNBQW1DLHVCQUF1QiwrQkFBK0Isd0JBQXdCLGlDQUFpQyx3QkFBd0IsZ0NBQWdDLHdCQUF3QixlQUFlLG9DQUFvQyxlQUFlLHdCQUF3QixpQkFBaUIsK0JBQStCLGlCQUFpQiw4QkFBOEIsR0FBRyxHQUFHLHVCQUF1QixvQkFBb0Isa0JBQWtCLDhCQUE4Qix5QkFBeUIsa0JBQWtCLDJXQUEyVyx5RkFBeUYsTUFBTSw4TUFBOE0sK0JBQStCLG1EQUFtRCwyQ0FBMkMsb0VBQW9FLHNDQUFzQyxtQ0FBbUMsa0JBQWtCLE1BQU0sc09BQXNPLFFBQVEsc0NBQXNDLG1DQUFtQyxrQkFBa0IsMEZBQTBGLFFBQVEsd0NBQXdDLG1DQUFtQyxrQkFBa0IsMEZBQTBGLFFBQVEsd0NBQXdDLHlCQUF5Qiw0REFBNEQsOENBQThDLE1BQU0sMkJBQTJCLEVBQUUseURBQXlELDRDQUE0QyxNQUFNLDJCQUEyQixFQUFFLGtDQUFrQyx3YkFBd2Isb0NBQW9DLHNHQUFzRyxxQ0FBcUMsTUFBTSx1SEFBdUgsZ0NBQWdDLE1BQU0scUlBQXFJLEdBQUcsR0FBRyx1QkFBdUIsb0JBQW9CLGtCQUFrQiw4QkFBOEIseUJBQXlCLGFBQWEsMElBQTBJLE1BQU0scURBQXFELG9CQUFvQixtQkFBbUIsV0FBVyxZQUFZLGdCQUFnQix3QkFBd0Isa0JBQWtCLDRFQUE0RSxvQ0FBb0MsR0FBRyw4QkFBOEIsaUlBQWlJLDZCQUE2Qix1RkFBdUYsa0JBQWtCLGdGQUFnRixnQkFBZ0Isa0NBQWtDLG1DQUFtQyxpREFBaUQsbUZBQW1GLCtDQUErQyx3S0FBd0ssNkNBQTZDLGdFQUFnRSxpREFBaUQseUdBQXlHLHVDQUF1Qyx3R0FBd0csc0NBQXNDLHFFQUFxRSxnQ0FBZ0MsbURBQW1ELGdDQUFnQyx5Q0FBeUMsa0JBQWtCLHdEQUF3RCxRQUFRLGdEQUFnRCxNQUFNLHVHQUF1Ryw4Q0FBOEMsTUFBTSwrRUFBK0UsR0FBRyxHQUFHLHVCQUF1QixvQkFBb0Isa0JBQWtCLDhCQUE4Qiw0QkFBNEIsY0FBYyx1R0FBdUcsVUFBVSwySEFBMkgsMkRBQTJELHNDQUFzQyxpRUFBaUUsNkNBQTZDLHdJQUF3SSxnREFBZ0QsNkNBQTZDLCtDQUErQyx3QkFBd0IsNERBQTRELFVBQVUsbUNBQW1DLGlDQUFpQyw4Q0FBOEMsOEJBQThCLHdDQUF3QywwQkFBMEIsd0NBQXdDLHFCQUFxQixrREFBa0QsaUdBQWlHLHdDQUF3QywrQkFBK0Isd0NBQXdDLHFFQUFxRSwrQkFBK0IsZ0NBQWdDLEdBQUcsR0FBRyx1QkFBdUIsb0JBQW9CLGtCQUFrQiw4QkFBOEIscUJBQXFCLGNBQWMsZ0dBQWdHLG9DQUFvQyx5SUFBeUksNkJBQTZCLCtJQUErSSxnQ0FBZ0Msb0RBQW9ELG1DQUFtQyx1REFBdUQsb0NBQW9DLFlBQVksd05BQXdOLG9DQUFvQywyQkFBMkIsa0JBQWtCLHdCQUF3QixRQUFRLDZDQUE2QywyQkFBMkIscUNBQXFDLHlEQUF5RCxvQ0FBb0MsTUFBTSxVQUFVLFlBQVkseUJBQXlCLDhCQUE4QixHQUFHLEdBQUcsdUJBQXVCLHlCQUF5QixjQUFjLGdCQUFnQixvQkFBb0IsZ0JBQWdCLElBQUksa0dBQWtHLG1DQUFtQyxxQkFBcUIsY0FBYyxxQ0FBcUMsTUFBTSw0REFBNEQsMkNBQTJDLDBCQUEwQixtREFBbUQsUUFBUSxrQkFBa0IsUUFBUSxxQkFBcUIsdUNBQXVDLFNBQVMscUJBQXFCLHVEQUF1RCw0REFBNEQsMkRBQTJELGdFQUFnRSwrREFBK0QsZ0JBQWdCLHFCQUFxQixvRkFBb0YsU0FBUywrQ0FBK0Msa0JBQWtCLHFCQUFxQix3SEFBd0gsU0FBUyxzQ0FBc0MsTUFBTSxnRkFBZ0YsK0NBQStDLFlBQVkseUJBQXlCLCtDQUErQyxTQUFTLGVBQWUsOENBQThDLGVBQWUseURBQXlELGVBQWUsTUFBTSw4Q0FBOEMsZUFBZSxNQUFNLCtGQUErRixpQkFBaUIsTUFBTSx3RUFBd0UsR0FBRyxHQUFHLHVCQUF1QixzQkFBc0IsZ0JBQWdCLHNDQUFzQywwQkFBMEIsNkZBQTZGLDhCQUE4QixNQUFNLDhFQUE4RSwrQkFBK0IsWUFBWSx1SkFBdUosOEJBQThCLDZFQUE2RSx3Q0FBd0MsUUFBUSxtRUFBbUUsNkNBQTZDLHdDQUF3Qyw2Q0FBNkMsSUFBSSx1RUFBdUUsV0FBVyw2Q0FBNkMsNEVBQTRFLGlEQUFpRCwyRUFBMkUsK0RBQStELGNBQWMsc0RBQXNELElBQUksc0RBQXNELFNBQVMsc0RBQXNELHFEQUFxRCxtQ0FBbUMseUNBQXlDLHNDQUFzQyxpREFBaUQsb0NBQW9DLCtDQUErQyxvQ0FBb0Msa0RBQWtELG9DQUFvQyxzREFBc0QsR0FBRyxHQUFHLHVCQUF1QixlQUFlLHNCQUFzQixjQUFjLE1BQU0sMkJBQTJCLFlBQVksb0dBQW9HLHdCQUF3QiwyQkFBMkIseUJBQXlCLG9CQUFvQiw2QkFBNkIsb0NBQW9DLCtGQUErRix1Q0FBdUMsdUNBQXVDLDZDQUE2QyxNQUFNLDhJQUE4SSxpQkFBaUIsa0JBQWtCLHVDQUF1QyxJQUFJLDBEQUEwRCxTQUFTLEdBQUcsR0FBRyx1QkFBdUIsd0JBQXdCLGFBQWEsbUJBQW1CLHdDQUF3QywyRUFBMkUsS0FBSyxnQkFBZ0IsK0JBQStCLGtCQUFrQixpUUFBaVEsNkNBQTZDLHlFQUF5RSxrQkFBa0IsNEVBQTRFLCtCQUErQixrQ0FBa0MsK0pBQStKLG9DQUFvQyxNQUFNLDZLQUE2SyxxQ0FBcUMsMEVBQTBFLG9EQUFvRCwrR0FBK0csc0RBQXNELGNBQWMsOERBQThELElBQUksZ0RBQWdELFNBQVMsa0RBQWtELGNBQWMsMERBQTBELElBQUksMEVBQTBFLFNBQVMsNkRBQTZELGNBQWMsbUVBQW1FLElBQUksZ0RBQWdELFNBQVMsdURBQXVELGNBQWMsK0RBQStELElBQUksZ0RBQWdELFNBQVMsNkRBQTZELGtCQUFrQixpRUFBaUUsSUFBSSxtR0FBbUcsU0FBUywrRUFBK0Usa0JBQWtCLHdCQUF3QixJQUFJLDZFQUE2RSxTQUFTLHNEQUFzRCxnQkFBZ0IsMERBQTBELElBQUksd0RBQXdELFNBQVMsc0NBQXNDLGtDQUFrQyx1REFBdUQsTUFBTSxtRkFBbUYscURBQXFELHNGQUFzRixpREFBaUQsa0ZBQWtGLDBEQUEwRCx3REFBd0Qsc0RBQXNELG9EQUFvRCx3REFBd0Qsb0ZBQW9GLGlEQUFpRCwrQ0FBK0MsR0FBRywyQkFBMkIsTUFBTSxrSUFBa0ksOEJBQThCLGlCQUFpQixNQUFNLG1EQUFtRCx1QkFBdUIsb0JBQW9CLGFBQWEsbUJBQW1CLHdDQUF3QywyRUFBMkUsS0FBSyxnQkFBZ0IsNEJBQTRCLGNBQWMsTUFBTSx5SEFBeUgsNkNBQTZDLG1DQUFtQyxrQkFBa0Isa0VBQWtFLFFBQVEsMkNBQTJDLFFBQVEsMkhBQTJILG1EQUFtRCxnQkFBZ0IsbURBQW1ELElBQUksZ0ZBQWdGLFNBQVMsMENBQTBDLDJEQUEyRCxHQUFHLGFBQWEsdUJBQXVCLGtCQUFrQixjQUFjLDBEQUEwRCw4Q0FBOEMsNENBQTRDLDZDQUE2QyxpREFBaUQsb0NBQW9DLG9EQUFvRCxrQ0FBa0MsVUFBVSwySEFBMkgsdUNBQXVDLGlJQUFpSSw0Q0FBNEMsMEZBQTBGLHVDQUF1QyxpREFBaUQsR0FBRyxHQUFHLHVCQUF1QixvQkFBb0Isa0JBQWtCLDhCQUE4QiwyQkFBMkIsY0FBYyw0RkFBNEYsb0NBQW9DLHlHQUF5Ryw2QkFBNkIsNEZBQTRGLHlDQUF5QywwQkFBMEIsMENBQTBDLFFBQVEsd0NBQXdDLGtDQUFrQyw0QkFBNEIsMENBQTBDLEVBQUUsd0NBQXdDLE1BQU0sNkZBQTZGLEdBQUcsR0FBRyx1QkFBdUIsMkJBQTJCLGNBQWMsMkNBQTJDLE1BQU0sbUNBQW1DLE1BQU0sa0NBQWtDLDZCQUE2QixNQUFNLHFEQUFxRCwrQkFBK0IsdUNBQXVDLDhCQUE4QixNQUFNLGdDQUFnQyxpQ0FBaUMsTUFBTSxrQ0FBa0MsK0JBQStCLFFBQVEsa0dBQWtHLDZCQUE2QixjQUFjLHNEQUFzRCxJQUFJLDRDQUE0QyxTQUFTLGVBQWUsdUNBQXVDLEdBQUcsR0FBRyx1QkFBdUIsb0JBQW9CLGtCQUFrQiw4QkFBOEIsbUJBQW1CLGtCQUFrQiw0TkFBNE4sTUFBTSxvQ0FBb0MscUlBQXFJLCtCQUErQixNQUFNLG1IQUFtSCxpQ0FBaUMsTUFBTSxnTkFBZ04sNkJBQTZCLE1BQU0sb0lBQW9JLHNDQUFzQyxRQUFRLDhMQUE4TCxxQ0FBcUMsbUtBQW1LLDBDQUEwQyxNQUFNLDZMQUE2TCwwQ0FBMEMsc0NBQXNDLDJDQUEyQyxRQUFRLHVGQUF1RixNQUFNLG9EQUFvRCx1QkFBdUIsc0hBQXNILFVBQVUscUNBQXFDLGtEQUFrRCxRQUFRLHlFQUF5RSxvQkFBb0IsbUlBQW1JLHVCQUF1Qiw4R0FBOEcsU0FBUyx1Q0FBdUMsNFBBQTRQLHVDQUF1QyxNQUFNLHlJQUF5SSwyQ0FBMkMsTUFBTSx1SEFBdUgsd0RBQXdELHdIQUF3SCx1REFBdUQsNkVBQTZFLHdDQUF3QyxNQUFNLHlJQUF5SSxzQ0FBc0MscUtBQXFLLGlEQUFpRCxRQUFRLHdIQUF3SCx1Q0FBdUMsbUdBQW1HLG9DQUFvQyx5Q0FBeUMsUUFBUSxFQUFFLDRDQUE0QyxNQUFNLHNFQUFzRSx5Q0FBeUMsd0NBQXdDLGVBQWUsVUFBVSx5RUFBeUUscUZBQXFGLDJDQUEyQywyREFBMkQsc0NBQXNDLDJGQUEyRixnQ0FBZ0Msd0VBQXdFLGtCQUFrQiwrQkFBK0IsUUFBUSxxQ0FBcUMsMERBQTBELEdBQUcsR0FBRyx1QkFBdUIsb0JBQW9CLGtCQUFrQiw4QkFBOEIsd0JBQXdCLGFBQWEsa1FBQWtRLGlEQUFpRCxvQ0FBb0Msa09BQWtPLGdDQUFnQyx1QkFBdUIsNkJBQTZCLHdNQUF3TSxtQ0FBbUMsMENBQTBDLGlDQUFpQyxRQUFRLHFCQUFxQiw2TUFBNk0sNERBQTRELE1BQU0sbUZBQW1GLGtCQUFrQixxQkFBcUIsNkNBQTZDLCtCQUErQixxQ0FBcUMsOEtBQThLLG9DQUFvQywyQkFBMkIsMkVBQTJFLGlJQUFpSSw4RUFBOEUsb0lBQW9JLDRFQUE0RSxNQUFNLGtKQUFrSixxRkFBcUYsbUVBQW1FLHNEQUFzRCxNQUFNLG9EQUFvRCw0Q0FBNEM7QUFDNzkvQixDQUFDLHNDQUFzQyxRQUFRLDJKQUEySixrQkFBa0IsaUNBQWlDLGdCQUFnQix3Q0FBd0MsTUFBTSwwRkFBMEYsUUFBUSxFQUFFLHlDQUF5Qyw2Q0FBNkMsMENBQTBDLDhDQUE4QywrQ0FBK0MsTUFBTSw2REFBNkQsa0NBQWtDLDZCQUE2Qix3Q0FBd0Msc0NBQXNDLHdDQUF3Qyw2Q0FBNkMscUNBQXFDLGdHQUFnRyxtQ0FBbUMscUZBQXFGLHNDQUFzQyx3R0FBd0csc0NBQXNDLFVBQVUsMlBBQTJQLFNBQVMsVUFBVSxvRUFBb0UsTUFBTSxvRkFBb0YsMkRBQTJELE1BQU0sNkVBQTZFLHdFQUF3RSxzQ0FBc0MsZUFBZSxrQkFBa0IsZUFBZSxFQUFFLGlFQUFpRSw2Q0FBNkMsTUFBTSxrQkFBa0IsZUFBZSxFQUFFLGdFQUFnRSxzQ0FBc0MsTUFBTSxtQkFBbUIsRUFBRSwrREFBK0QsNkNBQTZDLHVEQUF1RCw4Q0FBOEMsTUFBTSxXQUFXLEVBQUUscURBQXFELHVDQUF1Qyx3REFBd0QscUJBQXFCLGdDQUFnQyxNQUFNLHdDQUF3QyxFQUFFLHdDQUF3QyxNQUFNLGtLQUFrSyx5Q0FBeUMsY0FBYyxxQkFBcUIscU5BQXFOLHdDQUF3QyxpRUFBaUUsaURBQWlELCtHQUErRyxpREFBaUQsMkZBQTJGLHFEQUFxRCxNQUFNLHFGQUFxRiwwQ0FBMEMsTUFBTSxzRUFBc0UseUNBQXlDLE1BQU0sMEZBQTBGLDZDQUE2QywrREFBK0Qsa0RBQWtELHdFQUF3RSx5REFBeUQsTUFBTSxzREFBc0QsR0FBRyxHQUFHLHVCQUF1QixZQUFZLFFBQVEsMEZBQTBGLGVBQWUsbWhCQUFtaEIsR0FBRyx1QkFBdUIsVUFBVSxtQkFBbUIsZ0ZBQWdGLGNBQWMsMERBQTBELGNBQWMsTUFBTSw4REFBOEQsY0FBYyw2QkFBNkIsZ0JBQWdCLFlBQVksYUFBYSxLQUF1QixrQ0FBa0MsS0FBcUMsRUFBRSxvQ0FBTyxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsb0dBQUMsQ0FBQyIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90dXJib2xpbmtzL2Rpc3QvdHVyYm9saW5rcy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5UdXJib2xpbmtzIDUuMi4wXG5Db3B5cmlnaHQgwqkgMjAxOCBCYXNlY2FtcCwgTExDXG4gKi9cbihmdW5jdGlvbigpe3ZhciB0PXRoaXM7KGZ1bmN0aW9uKCl7KGZ1bmN0aW9uKCl7dGhpcy5UdXJib2xpbmtzPXtzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9d2luZG93Lmhpc3RvcnkucHVzaFN0YXRlJiZudWxsIT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lJiZudWxsIT13aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcn0oKSx2aXNpdDpmdW5jdGlvbih0LHIpe3JldHVybiBlLmNvbnRyb2xsZXIudmlzaXQodCxyKX0sY2xlYXJDYWNoZTpmdW5jdGlvbigpe3JldHVybiBlLmNvbnRyb2xsZXIuY2xlYXJDYWNoZSgpfSxzZXRQcm9ncmVzc0JhckRlbGF5OmZ1bmN0aW9uKHQpe3JldHVybiBlLmNvbnRyb2xsZXIuc2V0UHJvZ3Jlc3NCYXJEZWxheSh0KX19fSkuY2FsbCh0aGlzKX0pLmNhbGwodCk7dmFyIGU9dC5UdXJib2xpbmtzOyhmdW5jdGlvbigpeyhmdW5jdGlvbigpe3ZhciB0LHIsbixvPVtdLnNsaWNlO2UuY29weU9iamVjdD1mdW5jdGlvbih0KXt2YXIgZSxyLG47cj17fTtmb3IoZSBpbiB0KW49dFtlXSxyW2VdPW47cmV0dXJuIHJ9LGUuY2xvc2VzdD1mdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwoZSxyKX0sdD1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG51bGwhPShlPXQuY2xvc2VzdCk/ZTpmdW5jdGlvbih0KXt2YXIgZTtmb3IoZT10aGlzO2U7KXtpZihlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJnIuY2FsbChlLHQpKXJldHVybiBlO2U9ZS5wYXJlbnROb2RlfX19KCksZS5kZWZlcj1mdW5jdGlvbih0KXtyZXR1cm4gc2V0VGltZW91dCh0LDEpfSxlLnRocm90dGxlPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPW51bGwsZnVuY3Rpb24oKXt2YXIgcjtyZXR1cm4gcj0xPD1hcmd1bWVudHMubGVuZ3RoP28uY2FsbChhcmd1bWVudHMsMCk6W10sbnVsbCE9ZT9lOmU9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlPW51bGwsdC5hcHBseShuLHIpfX0odGhpcykpfX0sZS5kaXNwYXRjaD1mdW5jdGlvbih0LGUpe3ZhciByLG8saSxzLGEsdTtyZXR1cm4gYT1udWxsIT1lP2U6e30sdT1hLnRhcmdldCxyPWEuY2FuY2VsYWJsZSxvPWEuZGF0YSxpPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRzXCIpLGkuaW5pdEV2ZW50KHQsITAscj09PSEwKSxpLmRhdGE9bnVsbCE9bz9vOnt9LGkuY2FuY2VsYWJsZSYmIW4mJihzPWkucHJldmVudERlZmF1bHQsaS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRlZmF1bHRQcmV2ZW50ZWR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZGVmYXVsdFByZXZlbnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH19KSxzLmNhbGwodGhpcyl9KSwobnVsbCE9dT91OmRvY3VtZW50KS5kaXNwYXRjaEV2ZW50KGkpLGl9LG49ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50c1wiKSx0LmluaXRFdmVudChcInRlc3RcIiwhMCwhMCksdC5wcmV2ZW50RGVmYXVsdCgpLHQuZGVmYXVsdFByZXZlbnRlZH0oKSxlLm1hdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIuY2FsbCh0LGUpfSxyPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG47cmV0dXJuIHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG51bGwhPShlPW51bGwhPShyPW51bGwhPShuPXQubWF0Y2hlc1NlbGVjdG9yKT9uOnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yKT9yOnQubXNNYXRjaGVzU2VsZWN0b3IpP2U6dC5tb3pNYXRjaGVzU2VsZWN0b3J9KCksZS51dWlkPWZ1bmN0aW9uKCl7dmFyIHQsZSxyO2ZvcihyPVwiXCIsdD1lPTE7MzY+PWU7dD0rK2Upcis9OT09PXR8fDE0PT09dHx8MTk9PT10fHwyND09PXQ/XCItXCI6MTU9PT10P1wiNFwiOjIwPT09dD8oTWF0aC5mbG9vcig0Kk1hdGgucmFuZG9tKCkpKzgpLnRvU3RyaW5nKDE2KTpNYXRoLmZsb29yKDE1Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDE2KTtyZXR1cm4gcn19KS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZS5Mb2NhdGlvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGUscjtudWxsPT10JiYodD1cIlwiKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHIuaHJlZj10LnRvU3RyaW5nKCksdGhpcy5hYnNvbHV0ZVVSTD1yLmhyZWYsZT1yLmhhc2gubGVuZ3RoLDI+ZT90aGlzLnJlcXVlc3RVUkw9dGhpcy5hYnNvbHV0ZVVSTDoodGhpcy5yZXF1ZXN0VVJMPXRoaXMuYWJzb2x1dGVVUkwuc2xpY2UoMCwtZSksdGhpcy5hbmNob3I9ci5oYXNoLnNsaWNlKDEpKX12YXIgZSxyLG4sbztyZXR1cm4gdC53cmFwPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgdGhpcz90Om5ldyB0aGlzKHQpfSx0LnByb3RvdHlwZS5nZXRPcmlnaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVVSTC5zcGxpdChcIi9cIiwzKS5qb2luKFwiL1wiKX0sdC5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIG51bGwhPSh0PW51bGwhPShlPXRoaXMucmVxdWVzdFVSTC5tYXRjaCgvXFwvXFwvW15cXC9dKihcXC9bXj87XSopLykpP2VbMV06dm9pZCAwKT90OlwiL1wifSx0LnByb3RvdHlwZS5nZXRQYXRoQ29tcG9uZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBhdGgoKS5zcGxpdChcIi9cIikuc2xpY2UoMSl9LHQucHJvdG90eXBlLmdldExhc3RQYXRoQ29tcG9uZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UGF0aENvbXBvbmVudHMoKS5zbGljZSgtMSlbMF19LHQucHJvdG90eXBlLmdldEV4dGVuc2lvbj1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIG51bGwhPSh0PW51bGwhPShlPXRoaXMuZ2V0TGFzdFBhdGhDb21wb25lbnQoKS5tYXRjaCgvXFwuW14uXSokLykpP2VbMF06dm9pZCAwKT90OlwiXCJ9LHQucHJvdG90eXBlLmlzSFRNTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEV4dGVuc2lvbigpLm1hdGNoKC9eKD86fFxcLig/Omh0bXxodG1sfHhodG1sKSkkLyl9LHQucHJvdG90eXBlLmlzUHJlZml4ZWRCeT1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT1yKHQpLHRoaXMuaXNFcXVhbFRvKHQpfHxvKHRoaXMuYWJzb2x1dGVVUkwsZSl9LHQucHJvdG90eXBlLmlzRXF1YWxUbz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVVSTD09PShudWxsIT10P3QuYWJzb2x1dGVVUkw6dm9pZCAwKX0sdC5wcm90b3R5cGUudG9DYWNoZUtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcXVlc3RVUkx9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFic29sdXRlVVJMfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFic29sdXRlVVJMfSx0LnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVVUkx9LHI9ZnVuY3Rpb24odCl7cmV0dXJuIGUodC5nZXRPcmlnaW4oKSt0LmdldFBhdGgoKSl9LGU9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCxcIi9cIik/dDp0K1wiL1wifSxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2xpY2UoMCxlLmxlbmd0aCk9PT1lfSxuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2xpY2UoLWUubGVuZ3RoKT09PWV9LHR9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O2UuSHR0cFJlcXVlc3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKHIsbixvKXt0aGlzLmRlbGVnYXRlPXIsdGhpcy5yZXF1ZXN0Q2FuY2VsZWQ9dCh0aGlzLnJlcXVlc3RDYW5jZWxlZCx0aGlzKSx0aGlzLnJlcXVlc3RUaW1lZE91dD10KHRoaXMucmVxdWVzdFRpbWVkT3V0LHRoaXMpLHRoaXMucmVxdWVzdEZhaWxlZD10KHRoaXMucmVxdWVzdEZhaWxlZCx0aGlzKSx0aGlzLnJlcXVlc3RMb2FkZWQ9dCh0aGlzLnJlcXVlc3RMb2FkZWQsdGhpcyksdGhpcy5yZXF1ZXN0UHJvZ3Jlc3NlZD10KHRoaXMucmVxdWVzdFByb2dyZXNzZWQsdGhpcyksdGhpcy51cmw9ZS5Mb2NhdGlvbi53cmFwKG4pLnJlcXVlc3RVUkwsdGhpcy5yZWZlcnJlcj1lLkxvY2F0aW9uLndyYXAobykuYWJzb2x1dGVVUkwsdGhpcy5jcmVhdGVYSFIoKX1yZXR1cm4gci5ORVRXT1JLX0ZBSUxVUkU9MCxyLlRJTUVPVVRfRkFJTFVSRT0tMSxyLnRpbWVvdXQ9NjAsci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnhociYmIXRoaXMuc2VudD8odGhpcy5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlcXVlc3RTdGFydCgpLHRoaXMuc2V0UHJvZ3Jlc3MoMCksdGhpcy54aHIuc2VuZCgpLHRoaXMuc2VudD0hMCxcImZ1bmN0aW9uXCI9PXR5cGVvZih0PXRoaXMuZGVsZWdhdGUpLnJlcXVlc3RTdGFydGVkP3QucmVxdWVzdFN0YXJ0ZWQoKTp2b2lkIDApOnZvaWQgMH0sci5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGhyJiZ0aGlzLnNlbnQ/dGhpcy54aHIuYWJvcnQoKTp2b2lkIDB9LHIucHJvdG90eXBlLnJlcXVlc3RQcm9ncmVzc2VkPWZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aENvbXB1dGFibGU/dGhpcy5zZXRQcm9ncmVzcyh0LmxvYWRlZC90LnRvdGFsKTp2b2lkIDB9LHIucHJvdG90eXBlLnJlcXVlc3RMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRSZXF1ZXN0KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlO3JldHVybiAyMDA8PShlPXQueGhyLnN0YXR1cykmJjMwMD5lP3QuZGVsZWdhdGUucmVxdWVzdENvbXBsZXRlZFdpdGhSZXNwb25zZSh0Lnhoci5yZXNwb25zZVRleHQsdC54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJUdXJib2xpbmtzLUxvY2F0aW9uXCIpKToodC5mYWlsZWQ9ITAsdC5kZWxlZ2F0ZS5yZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUodC54aHIuc3RhdHVzLHQueGhyLnJlc3BvbnNlVGV4dCkpfX0odGhpcykpfSxyLnByb3RvdHlwZS5yZXF1ZXN0RmFpbGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kUmVxdWVzdChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5mYWlsZWQ9ITAsdC5kZWxlZ2F0ZS5yZXF1ZXN0RmFpbGVkV2l0aFN0YXR1c0NvZGUodC5jb25zdHJ1Y3Rvci5ORVRXT1JLX0ZBSUxVUkUpfX0odGhpcykpfSxyLnByb3RvdHlwZS5yZXF1ZXN0VGltZWRPdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRSZXF1ZXN0KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmZhaWxlZD0hMCx0LmRlbGVnYXRlLnJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZSh0LmNvbnN0cnVjdG9yLlRJTUVPVVRfRkFJTFVSRSl9fSh0aGlzKSl9LHIucHJvdG90eXBlLnJlcXVlc3RDYW5jZWxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZFJlcXVlc3QoKX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25CZWZvcmVSZXF1ZXN0U3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gZS5kaXNwYXRjaChcInR1cmJvbGlua3M6cmVxdWVzdC1zdGFydFwiLHtkYXRhOnt1cmw6dGhpcy51cmwseGhyOnRoaXMueGhyfX0pfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUmVxdWVzdEVuZD1mdW5jdGlvbigpe3JldHVybiBlLmRpc3BhdGNoKFwidHVyYm9saW5rczpyZXF1ZXN0LWVuZFwiLHtkYXRhOnt1cmw6dGhpcy51cmwseGhyOnRoaXMueGhyfX0pfSxyLnByb3RvdHlwZS5jcmVhdGVYSFI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54aHI9bmV3IFhNTEh0dHBSZXF1ZXN0LHRoaXMueGhyLm9wZW4oXCJHRVRcIix0aGlzLnVybCwhMCksdGhpcy54aHIudGltZW91dD0xZTMqdGhpcy5jb25zdHJ1Y3Rvci50aW1lb3V0LHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixcInRleHQvaHRtbCwgYXBwbGljYXRpb24veGh0bWwreG1sXCIpLHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoXCJUdXJib2xpbmtzLVJlZmVycmVyXCIsdGhpcy5yZWZlcnJlciksdGhpcy54aHIub25wcm9ncmVzcz10aGlzLnJlcXVlc3RQcm9ncmVzc2VkLHRoaXMueGhyLm9ubG9hZD10aGlzLnJlcXVlc3RMb2FkZWQsdGhpcy54aHIub25lcnJvcj10aGlzLnJlcXVlc3RGYWlsZWQsdGhpcy54aHIub250aW1lb3V0PXRoaXMucmVxdWVzdFRpbWVkT3V0LHRoaXMueGhyLm9uYWJvcnQ9dGhpcy5yZXF1ZXN0Q2FuY2VsZWR9LHIucHJvdG90eXBlLmVuZFJlcXVlc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueGhyPyh0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZXF1ZXN0RW5kKCksbnVsbCE9dCYmdC5jYWxsKHRoaXMpLHRoaXMuZGVzdHJveSgpKTp2b2lkIDB9LHIucHJvdG90eXBlLnNldFByb2dyZXNzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0aGlzLnByb2dyZXNzPXQsXCJmdW5jdGlvblwiPT10eXBlb2YoZT10aGlzLmRlbGVnYXRlKS5yZXF1ZXN0UHJvZ3Jlc3NlZD9lLnJlcXVlc3RQcm9ncmVzc2VkKHRoaXMucHJvZ3Jlc3MpOnZvaWQgMH0sci5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnNldFByb2dyZXNzKDEpLFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9dGhpcy5kZWxlZ2F0ZSkucmVxdWVzdEZpbmlzaGVkJiZ0LnJlcXVlc3RGaW5pc2hlZCgpLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLnhocj1udWxsfSxyfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fTtlLlByb2dyZXNzQmFyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMudHJpY2tsZT10KHRoaXMudHJpY2tsZSx0aGlzKSx0aGlzLnN0eWxlc2hlZXRFbGVtZW50PXRoaXMuY3JlYXRlU3R5bGVzaGVldEVsZW1lbnQoKSx0aGlzLnByb2dyZXNzRWxlbWVudD10aGlzLmNyZWF0ZVByb2dyZXNzRWxlbWVudCgpfXZhciByO3JldHVybiByPTMwMCxlLmRlZmF1bHRDU1M9XCIudHVyYm9saW5rcy1wcm9ncmVzcy1iYXIge1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgaGVpZ2h0OiAzcHg7XFxuICBiYWNrZ3JvdW5kOiAjMDA3NmZmO1xcbiAgei1pbmRleDogOTk5OTtcXG4gIHRyYW5zaXRpb246IHdpZHRoIFwiK3IrXCJtcyBlYXNlLW91dCwgb3BhY2l0eSBcIityLzIrXCJtcyBcIityLzIrXCJtcyBlYXNlLWluO1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcXG59XCIsZS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGU/dm9pZCAwOih0aGlzLnZpc2libGU9ITAsdGhpcy5pbnN0YWxsU3R5bGVzaGVldEVsZW1lbnQoKSx0aGlzLmluc3RhbGxQcm9ncmVzc0VsZW1lbnQoKSx0aGlzLnN0YXJ0VHJpY2tsaW5nKCkpfSxlLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJsZSYmIXRoaXMuaGlkaW5nPyh0aGlzLmhpZGluZz0hMCx0aGlzLmZhZGVQcm9ncmVzc0VsZW1lbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQudW5pbnN0YWxsUHJvZ3Jlc3NFbGVtZW50KCksdC5zdG9wVHJpY2tsaW5nKCksdC52aXNpYmxlPSExLHQuaGlkaW5nPSExfX0odGhpcykpKTp2b2lkIDB9LGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlPXQsdGhpcy5yZWZyZXNoKCl9LGUucHJvdG90eXBlLmluc3RhbGxTdHlsZXNoZWV0RWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5oZWFkLmluc2VydEJlZm9yZSh0aGlzLnN0eWxlc2hlZXRFbGVtZW50LGRvY3VtZW50LmhlYWQuZmlyc3RDaGlsZCl9LGUucHJvdG90eXBlLmluc3RhbGxQcm9ncmVzc0VsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUud2lkdGg9MCx0aGlzLnByb2dyZXNzRWxlbWVudC5zdHlsZS5vcGFjaXR5PTEsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLnByb2dyZXNzRWxlbWVudCxkb2N1bWVudC5ib2R5KSx0aGlzLnJlZnJlc2goKX0sZS5wcm90b3R5cGUuZmFkZVByb2dyZXNzRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9ncmVzc0VsZW1lbnQuc3R5bGUub3BhY2l0eT0wLHNldFRpbWVvdXQodCwxLjUqcil9LGUucHJvdG90eXBlLnVuaW5zdGFsbFByb2dyZXNzRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2dyZXNzRWxlbWVudC5wYXJlbnROb2RlP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnByb2dyZXNzRWxlbWVudCk6dm9pZCAwfSxlLnByb3RvdHlwZS5zdGFydFRyaWNrbGluZz1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLnRyaWNrbGVJbnRlcnZhbD90aGlzLnRyaWNrbGVJbnRlcnZhbDp0aGlzLnRyaWNrbGVJbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLnRyaWNrbGUscil9LGUucHJvdG90eXBlLnN0b3BUcmlja2xpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gY2xlYXJJbnRlcnZhbCh0aGlzLnRyaWNrbGVJbnRlcnZhbCksdGhpcy50cmlja2xlSW50ZXJ2YWw9bnVsbH0sZS5wcm90b3R5cGUudHJpY2tsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFZhbHVlKHRoaXMudmFsdWUrTWF0aC5yYW5kb20oKS8xMDApfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm9ncmVzc0VsZW1lbnQuc3R5bGUud2lkdGg9MTArOTAqdC52YWx1ZStcIiVcIn19KHRoaXMpKX0sZS5wcm90b3R5cGUuY3JlYXRlU3R5bGVzaGVldEVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksdC50eXBlPVwidGV4dC9jc3NcIix0LnRleHRDb250ZW50PXRoaXMuY29uc3RydWN0b3IuZGVmYXVsdENTUyx0fSxlLnByb3RvdHlwZS5jcmVhdGVQcm9ncmVzc0VsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHQuY2xhc3NOYW1lPVwidHVyYm9saW5rcy1wcm9ncmVzcy1iYXJcIix0fSxlfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fTtlLkJyb3dzZXJBZGFwdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihyKXt0aGlzLmNvbnRyb2xsZXI9cix0aGlzLnNob3dQcm9ncmVzc0Jhcj10KHRoaXMuc2hvd1Byb2dyZXNzQmFyLHRoaXMpLHRoaXMucHJvZ3Jlc3NCYXI9bmV3IGUuUHJvZ3Jlc3NCYXJ9dmFyIG4sbyxpO3JldHVybiBpPWUuSHR0cFJlcXVlc3Qsbj1pLk5FVFdPUktfRkFJTFVSRSxvPWkuVElNRU9VVF9GQUlMVVJFLHIucHJvdG90eXBlLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uV2l0aEFjdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbnRyb2xsZXIuc3RhcnRWaXNpdFRvTG9jYXRpb25XaXRoQWN0aW9uKHQsZSl9LHIucHJvdG90eXBlLnZpc2l0U3RhcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc3N1ZVJlcXVlc3QoKSx0LmNoYW5nZUhpc3RvcnkoKSx0LmxvYWRDYWNoZWRTbmFwc2hvdCgpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RTdGFydGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKDApLHQuaGFzQ2FjaGVkU25hcHNob3QoKXx8XCJyZXN0b3JlXCIhPT10LmFjdGlvbj90aGlzLnNob3dQcm9ncmVzc0JhckFmdGVyRGVsYXkoKTp0aGlzLnNob3dQcm9ncmVzc0JhcigpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RQcm9ncmVzc2VkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyLnNldFZhbHVlKHQucHJvZ3Jlc3MpfSxyLnByb3RvdHlwZS52aXNpdFJlcXVlc3RDb21wbGV0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQubG9hZFJlc3BvbnNlKCl9LHIucHJvdG90eXBlLnZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlPWZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2UgbjpjYXNlIG86cmV0dXJuIHRoaXMucmVsb2FkKCk7ZGVmYXVsdDpyZXR1cm4gdC5sb2FkUmVzcG9uc2UoKX19LHIucHJvdG90eXBlLnZpc2l0UmVxdWVzdEZpbmlzaGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhpZGVQcm9ncmVzc0JhcigpfSxyLnByb3RvdHlwZS52aXNpdENvbXBsZXRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5mb2xsb3dSZWRpcmVjdCgpfSxyLnByb3RvdHlwZS5wYWdlSW52YWxpZGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWxvYWQoKX0sci5wcm90b3R5cGUuc2hvd1Byb2dyZXNzQmFyQWZ0ZXJEZWxheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2dyZXNzQmFyVGltZW91dD1zZXRUaW1lb3V0KHRoaXMuc2hvd1Byb2dyZXNzQmFyLHRoaXMuY29udHJvbGxlci5wcm9ncmVzc0JhckRlbGF5KX0sci5wcm90b3R5cGUuc2hvd1Byb2dyZXNzQmFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvZ3Jlc3NCYXIuc2hvdygpfSxyLnByb3RvdHlwZS5oaWRlUHJvZ3Jlc3NCYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9ncmVzc0Jhci5oaWRlKCksY2xlYXJUaW1lb3V0KHRoaXMucHJvZ3Jlc3NCYXJUaW1lb3V0KX0sci5wcm90b3R5cGUucmVsb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0scn0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07ZS5IaXN0b3J5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlKXt0aGlzLmRlbGVnYXRlPWUsdGhpcy5vblBhZ2VMb2FkPXQodGhpcy5vblBhZ2VMb2FkLHRoaXMpLHRoaXMub25Qb3BTdGF0ZT10KHRoaXMub25Qb3BTdGF0ZSx0aGlzKX1yZXR1cm4gci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydGVkP3ZvaWQgMDooYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5vblBvcFN0YXRlLCExKSxhZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMub25QYWdlTG9hZCwhMSksdGhpcy5zdGFydGVkPSEwKX0sci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/KHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLHRoaXMub25Qb3BTdGF0ZSwhMSkscmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzLm9uUGFnZUxvYWQsITEpLHRoaXMuc3RhcnRlZD0hMSk6dm9pZCAwfSxyLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQscil7cmV0dXJuIHQ9ZS5Mb2NhdGlvbi53cmFwKHQpLHRoaXMudXBkYXRlKFwicHVzaFwiLHQscil9LHIucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdD1lLkxvY2F0aW9uLndyYXAodCksdGhpcy51cGRhdGUoXCJyZXBsYWNlXCIsdCxyKX0sci5wcm90b3R5cGUub25Qb3BTdGF0ZT1mdW5jdGlvbih0KXt2YXIgcixuLG8saTtyZXR1cm4gdGhpcy5zaG91bGRIYW5kbGVQb3BTdGF0ZSgpJiYoaT1udWxsIT0obj10LnN0YXRlKT9uLnR1cmJvbGlua3M6dm9pZCAwKT8ocj1lLkxvY2F0aW9uLndyYXAod2luZG93LmxvY2F0aW9uKSxvPWkucmVzdG9yYXRpb25JZGVudGlmaWVyLHRoaXMuZGVsZWdhdGUuaGlzdG9yeVBvcHBlZFRvTG9jYXRpb25XaXRoUmVzdG9yYXRpb25JZGVudGlmaWVyKHIsbykpOnZvaWQgMH0sci5wcm90b3R5cGUub25QYWdlTG9hZD1mdW5jdGlvbih0KXtyZXR1cm4gZS5kZWZlcihmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5wYWdlTG9hZGVkPSEwfX0odGhpcykpfSxyLnByb3RvdHlwZS5zaG91bGRIYW5kbGVQb3BTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhZ2VJc0xvYWRlZCgpfSxyLnByb3RvdHlwZS5wYWdlSXNMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYWdlTG9hZGVkfHxcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfSxyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlLHIpe3ZhciBuO3JldHVybiBuPXt0dXJib2xpbmtzOntyZXN0b3JhdGlvbklkZW50aWZpZXI6cn19LGhpc3RvcnlbdCtcIlN0YXRlXCJdKG4sbnVsbCxlKX0scn0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2UuSGVhZERldGFpbHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlLHIsbixzLGEsdTtmb3IodGhpcy5lbGVtZW50cz17fSxuPTAsYT10Lmxlbmd0aDthPm47bisrKXU9dFtuXSx1Lm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJihzPXUub3V0ZXJIVE1MLHI9bnVsbCE9KGU9dGhpcy5lbGVtZW50cylbc10/ZVtzXTplW3NdPXt0eXBlOmkodSksdHJhY2tlZDpvKHUpLGVsZW1lbnRzOltdfSxyLmVsZW1lbnRzLnB1c2godSkpfXZhciBlLHIsbixvLGk7cmV0dXJuIHQuZnJvbUhlYWRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBuZXcgdGhpcyhudWxsIT0oZT1udWxsIT10P3QuY2hpbGROb2Rlczp2b2lkIDApP2U6W10pfSx0LnByb3RvdHlwZS5oYXNFbGVtZW50V2l0aEtleT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbiB0aGlzLmVsZW1lbnRzfSx0LnByb3RvdHlwZS5nZXRUcmFja2VkRWxlbWVudFNpZ25hdHVyZT1mdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbjtyPXRoaXMuZWxlbWVudHMsbj1bXTtmb3IodCBpbiByKWU9clt0XS50cmFja2VkLGUmJm4ucHVzaCh0KTtyZXR1cm4gbn0uY2FsbCh0aGlzKS5qb2luKFwiXCIpfSx0LnByb3RvdHlwZS5nZXRTY3JpcHRFbGVtZW50c05vdEluRGV0YWlscz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50c01hdGNoaW5nVHlwZU5vdEluRGV0YWlscyhcInNjcmlwdFwiLHQpfSx0LnByb3RvdHlwZS5nZXRTdHlsZXNoZWV0RWxlbWVudHNOb3RJbkRldGFpbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNNYXRjaGluZ1R5cGVOb3RJbkRldGFpbHMoXCJzdHlsZXNoZWV0XCIsdCl9LHQucHJvdG90eXBlLmdldEVsZW1lbnRzTWF0Y2hpbmdUeXBlTm90SW5EZXRhaWxzPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvLGkscyxhO289dGhpcy5lbGVtZW50cyxzPVtdO2ZvcihuIGluIG8paT1vW25dLGE9aS50eXBlLHI9aS5lbGVtZW50cyxhIT09dHx8ZS5oYXNFbGVtZW50V2l0aEtleShuKXx8cy5wdXNoKHJbMF0pO3JldHVybiBzfSx0LnByb3RvdHlwZS5nZXRQcm92aXNpb25hbEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbyxpLHM7cj1bXSxuPXRoaXMuZWxlbWVudHM7Zm9yKGUgaW4gbilvPW5bZV0scz1vLnR5cGUsaT1vLnRyYWNrZWQsdD1vLmVsZW1lbnRzLG51bGwhPXN8fGk/dC5sZW5ndGg+MSYmci5wdXNoLmFwcGx5KHIsdC5zbGljZSgxKSk6ci5wdXNoLmFwcGx5KHIsdCk7cmV0dXJuIHJ9LHQucHJvdG90eXBlLmdldE1ldGFWYWx1ZT1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gbnVsbCE9KGU9dGhpcy5maW5kTWV0YUVsZW1lbnRCeU5hbWUodCkpP2UuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTp2b2lkIDB9LHQucHJvdG90eXBlLmZpbmRNZXRhRWxlbWVudEJ5TmFtZT1mdW5jdGlvbih0KXt2YXIgcixuLG8saTtyPXZvaWQgMCxpPXRoaXMuZWxlbWVudHM7Zm9yKG8gaW4gaSluPWlbb10uZWxlbWVudHMsZShuWzBdLHQpJiYocj1uWzBdKTtyZXR1cm4gcn0saT1mdW5jdGlvbih0KXtyZXR1cm4gcih0KT9cInNjcmlwdFwiOm4odCk/XCJzdHlsZXNoZWV0XCI6dm9pZCAwfSxvPWZ1bmN0aW9uKHQpe3JldHVyblwicmVsb2FkXCI9PT10LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy10cmFja1wiKX0scj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxcInNjcmlwdFwiPT09ZX0sbj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxcInN0eWxlXCI9PT1lfHxcImxpbmtcIj09PWUmJlwic3R5bGVzaGVldFwiPT09dC5nZXRBdHRyaWJ1dGUoXCJyZWxcIil9LGU9ZnVuY3Rpb24odCxlKXt2YXIgcjtyZXR1cm4gcj10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxcIm1ldGFcIj09PXImJnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKT09PWV9LHR9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtlLlNuYXBzaG90PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuaGVhZERldGFpbHM9dCx0aGlzLmJvZHlFbGVtZW50PWV9cmV0dXJuIHQud3JhcD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHRoaXM/dDpcInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLmZyb21IVE1MU3RyaW5nKHQpOnRoaXMuZnJvbUhUTUxFbGVtZW50KHQpfSx0LmZyb21IVE1MU3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodG1sXCIpLGUuaW5uZXJIVE1MPXQsdGhpcy5mcm9tSFRNTEVsZW1lbnQoZSl9LHQuZnJvbUhUTUxFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciByLG4sbyxpO3JldHVybiBvPXQucXVlcnlTZWxlY3RvcihcImhlYWRcIikscj1udWxsIT0oaT10LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpKT9pOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpLG49ZS5IZWFkRGV0YWlscy5mcm9tSGVhZEVsZW1lbnQobyksbmV3IHRoaXMobixyKX0sdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5oZWFkRGV0YWlscyx0aGlzLmJvZHlFbGVtZW50LmNsb25lTm9kZSghMCkpfSx0LnByb3RvdHlwZS5nZXRSb290TG9jYXRpb249ZnVuY3Rpb24oKXt2YXIgdCxyO3JldHVybiByPW51bGwhPSh0PXRoaXMuZ2V0U2V0dGluZyhcInJvb3RcIikpP3Q6XCIvXCIsbmV3IGUuTG9jYXRpb24ocil9LHQucHJvdG90eXBlLmdldENhY2hlQ29udHJvbFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2V0dGluZyhcImNhY2hlLWNvbnRyb2xcIil9LHQucHJvdG90eXBlLmdldEVsZW1lbnRGb3JBbmNob3I9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiB0aGlzLmJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbaWQ9J1wiK3QrXCInXSwgYVtuYW1lPSdcIit0K1wiJ11cIil9Y2F0Y2goZSl7fX0sdC5wcm90b3R5cGUuZ2V0UGVybWFuZW50RWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkXVtkYXRhLXR1cmJvbGlua3MtcGVybWFuZW50XVwiKX0sdC5wcm90b3R5cGUuZ2V0UGVybWFuZW50RWxlbWVudEJ5SWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYm9keUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIit0K1wiW2RhdGEtdHVyYm9saW5rcy1wZXJtYW5lbnRdXCIpfSx0LnByb3RvdHlwZS5nZXRQZXJtYW5lbnRFbGVtZW50c1ByZXNlbnRJblNuYXBzaG90PWZ1bmN0aW9uKHQpe3ZhciBlLHIsbixvLGk7Zm9yKG89dGhpcy5nZXRQZXJtYW5lbnRFbGVtZW50cygpLGk9W10scj0wLG49by5sZW5ndGg7bj5yO3IrKyllPW9bcl0sdC5nZXRQZXJtYW5lbnRFbGVtZW50QnlJZChlLmlkKSYmaS5wdXNoKGUpO3JldHVybiBpfSx0LnByb3RvdHlwZS5maW5kRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbYXV0b2ZvY3VzXVwiKX0sdC5wcm90b3R5cGUuaGFzQW5jaG9yPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10aGlzLmdldEVsZW1lbnRGb3JBbmNob3IodCl9LHQucHJvdG90eXBlLmlzUHJldmlld2FibGU9ZnVuY3Rpb24oKXtyZXR1cm5cIm5vLXByZXZpZXdcIiE9PXRoaXMuZ2V0Q2FjaGVDb250cm9sVmFsdWUoKX0sdC5wcm90b3R5cGUuaXNDYWNoZWFibGU9ZnVuY3Rpb24oKXtyZXR1cm5cIm5vLWNhY2hlXCIhPT10aGlzLmdldENhY2hlQ29udHJvbFZhbHVlKCl9LHQucHJvdG90eXBlLmlzVmlzaXRhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuXCJyZWxvYWRcIiE9PXRoaXMuZ2V0U2V0dGluZyhcInZpc2l0LWNvbnRyb2xcIil9LHQucHJvdG90eXBlLmdldFNldHRpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGVhZERldGFpbHMuZ2V0TWV0YVZhbHVlKFwidHVyYm9saW5rcy1cIit0KX0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciB0PVtdLnNsaWNlO2UuUmVuZGVyZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXZhciByO3JldHVybiBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHIsbixvO3JldHVybiBuPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxlPTM8PWFyZ3VtZW50cy5sZW5ndGg/dC5jYWxsKGFyZ3VtZW50cywyKTpbXSxvPWZ1bmN0aW9uKHQsZSxyKXtyLnByb3RvdHlwZT10LnByb3RvdHlwZTt2YXIgbj1uZXcgcixvPXQuYXBwbHkobixlKTtyZXR1cm4gT2JqZWN0KG8pPT09bz9vOm59KHRoaXMsZSxmdW5jdGlvbigpe30pLG8uZGVsZWdhdGU9bixvLnJlbmRlcihyKSxvfSxlLnByb3RvdHlwZS5yZW5kZXJWaWV3PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlbGVnYXRlLnZpZXdXaWxsUmVuZGVyKHRoaXMubmV3Qm9keSksdCgpLHRoaXMuZGVsZWdhdGUudmlld1JlbmRlcmVkKHRoaXMubmV3Qm9keSl9LGUucHJvdG90eXBlLmludmFsaWRhdGVWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVsZWdhdGUudmlld0ludmFsaWRhdGVkKCl9LGUucHJvdG90eXBlLmNyZWF0ZVNjcmlwdEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuXCJmYWxzZVwiPT09dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvbGlua3MtZXZhbFwiKT90OihlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksZS50ZXh0Q29udGVudD10LnRleHRDb250ZW50LGUuYXN5bmM9ITEscihlLHQpLGUpfSxyPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvLGkscyxhLHU7Zm9yKGk9ZS5hdHRyaWJ1dGVzLGE9W10scj0wLG49aS5sZW5ndGg7bj5yO3IrKylzPWlbcl0sbz1zLm5hbWUsdT1zLnZhbHVlLGEucHVzaCh0LnNldEF0dHJpYnV0ZShvLHUpKTtyZXR1cm4gYX0sZX0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciB0LHIsbj1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciBuIGluIGUpby5jYWxsKGUsbikmJih0W25dPWVbbl0pO3JldHVybiByLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgcix0Ll9fc3VwZXJfXz1lLnByb3RvdHlwZSx0fSxvPXt9Lmhhc093blByb3BlcnR5O2UuU25hcHNob3RSZW5kZXJlcj1mdW5jdGlvbihlKXtmdW5jdGlvbiBvKHQsZSxyKXt0aGlzLmN1cnJlbnRTbmFwc2hvdD10LHRoaXMubmV3U25hcHNob3Q9ZSx0aGlzLmlzUHJldmlldz1yLHRoaXMuY3VycmVudEhlYWREZXRhaWxzPXRoaXMuY3VycmVudFNuYXBzaG90LmhlYWREZXRhaWxzLHRoaXMubmV3SGVhZERldGFpbHM9dGhpcy5uZXdTbmFwc2hvdC5oZWFkRGV0YWlscyx0aGlzLmN1cnJlbnRCb2R5PXRoaXMuY3VycmVudFNuYXBzaG90LmJvZHlFbGVtZW50LHRoaXMubmV3Qm9keT10aGlzLm5ld1NuYXBzaG90LmJvZHlFbGVtZW50fXJldHVybiBuKG8sZSksby5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNob3VsZFJlbmRlcigpPyh0aGlzLm1lcmdlSGVhZCgpLHRoaXMucmVuZGVyVmlldyhmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5yZXBsYWNlQm9keSgpLGUuaXNQcmV2aWV3fHxlLmZvY3VzRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpLHQoKX19KHRoaXMpKSk6dGhpcy5pbnZhbGlkYXRlVmlldygpfSxvLnByb3RvdHlwZS5tZXJnZUhlYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb3B5TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cygpLHRoaXMuY29weU5ld0hlYWRTY3JpcHRFbGVtZW50cygpLHRoaXMucmVtb3ZlQ3VycmVudEhlYWRQcm92aXNpb25hbEVsZW1lbnRzKCksdGhpcy5jb3B5TmV3SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKX0sby5wcm90b3R5cGUucmVwbGFjZUJvZHk9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD10aGlzLnJlbG9jYXRlQ3VycmVudEJvZHlQZXJtYW5lbnRFbGVtZW50cygpLHRoaXMuYWN0aXZhdGVOZXdCb2R5U2NyaXB0RWxlbWVudHMoKSx0aGlzLmFzc2lnbk5ld0JvZHkoKSx0aGlzLnJlcGxhY2VQbGFjZWhvbGRlckVsZW1lbnRzV2l0aENsb25lZFBlcm1hbmVudEVsZW1lbnRzKHQpfSxvLnByb3RvdHlwZS5zaG91bGRSZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdTbmFwc2hvdC5pc1Zpc2l0YWJsZSgpJiZ0aGlzLnRyYWNrZWRFbGVtZW50c0FyZUlkZW50aWNhbCgpfSxvLnByb3RvdHlwZS50cmFja2VkRWxlbWVudHNBcmVJZGVudGljYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50SGVhZERldGFpbHMuZ2V0VHJhY2tlZEVsZW1lbnRTaWduYXR1cmUoKT09PXRoaXMubmV3SGVhZERldGFpbHMuZ2V0VHJhY2tlZEVsZW1lbnRTaWduYXR1cmUoKX0sby5wcm90b3R5cGUuY29weU5ld0hlYWRTdHlsZXNoZWV0RWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvO2ZvcihuPXRoaXMuZ2V0TmV3SGVhZFN0eWxlc2hlZXRFbGVtZW50cygpLG89W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKyl0PW5bZV0sby5wdXNoKGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodCkpO3JldHVybiBvfSxvLnByb3RvdHlwZS5jb3B5TmV3SGVhZFNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbztmb3Iobj10aGlzLmdldE5ld0hlYWRTY3JpcHRFbGVtZW50cygpLG89W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKyl0PW5bZV0sby5wdXNoKGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVTY3JpcHRFbGVtZW50KHQpKSk7cmV0dXJuIG99LG8ucHJvdG90eXBlLnJlbW92ZUN1cnJlbnRIZWFkUHJvdmlzaW9uYWxFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB0LGUscixuLG87Zm9yKG49dGhpcy5nZXRDdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHMoKSxvPVtdLGU9MCxyPW4ubGVuZ3RoO3I+ZTtlKyspdD1uW2VdLG8ucHVzaChkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHQpKTtyZXR1cm4gb30sby5wcm90b3R5cGUuY29weU5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sbztmb3Iobj10aGlzLmdldE5ld0hlYWRQcm92aXNpb25hbEVsZW1lbnRzKCksbz1bXSxlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKXQ9bltlXSxvLnB1c2goZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0KSk7cmV0dXJuIG99LG8ucHJvdG90eXBlLnJlbG9jYXRlQ3VycmVudEJvZHlQZXJtYW5lbnRFbGVtZW50cz1mdW5jdGlvbigpe3ZhciBlLG4sbyxpLHMsYSx1O2ZvcihhPXRoaXMuZ2V0Q3VycmVudEJvZHlQZXJtYW5lbnRFbGVtZW50cygpLHU9W10sZT0wLG49YS5sZW5ndGg7bj5lO2UrKylpPWFbZV0scz10KGkpLG89dGhpcy5uZXdTbmFwc2hvdC5nZXRQZXJtYW5lbnRFbGVtZW50QnlJZChpLmlkKSxyKGkscy5lbGVtZW50KSxyKG8saSksdS5wdXNoKHMpO3JldHVybiB1fSxvLnByb3RvdHlwZS5yZXBsYWNlUGxhY2Vob2xkZXJFbGVtZW50c1dpdGhDbG9uZWRQZXJtYW5lbnRFbGVtZW50cz1mdW5jdGlvbih0KXt2YXIgZSxuLG8saSxzLGEsdTtmb3IodT1bXSxvPTAsaT10Lmxlbmd0aDtpPm87bysrKWE9dFtvXSxuPWEuZWxlbWVudCxzPWEucGVybWFuZW50RWxlbWVudCxlPXMuY2xvbmVOb2RlKCEwKSx1LnB1c2gocihuLGUpKTtyZXR1cm4gdX0sby5wcm90b3R5cGUuYWN0aXZhdGVOZXdCb2R5U2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLG4sbyxpLHM7Zm9yKGk9dGhpcy5nZXROZXdCb2R5U2NyaXB0RWxlbWVudHMoKSxzPVtdLGU9MCxvPWkubGVuZ3RoO28+ZTtlKyspbj1pW2VdLHQ9dGhpcy5jcmVhdGVTY3JpcHRFbGVtZW50KG4pLHMucHVzaChyKG4sdCkpO3JldHVybiBzfSxvLnByb3RvdHlwZS5hc3NpZ25OZXdCb2R5PWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmJvZHk9dGhpcy5uZXdCb2R5fSxvLnByb3RvdHlwZS5mb2N1c0ZpcnN0QXV0b2ZvY3VzYWJsZUVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gbnVsbCE9KHQ9dGhpcy5uZXdTbmFwc2hvdC5maW5kRmlyc3RBdXRvZm9jdXNhYmxlRWxlbWVudCgpKT90LmZvY3VzKCk6dm9pZCAwfSxvLnByb3RvdHlwZS5nZXROZXdIZWFkU3R5bGVzaGVldEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV3SGVhZERldGFpbHMuZ2V0U3R5bGVzaGVldEVsZW1lbnRzTm90SW5EZXRhaWxzKHRoaXMuY3VycmVudEhlYWREZXRhaWxzKX0sby5wcm90b3R5cGUuZ2V0TmV3SGVhZFNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV3SGVhZERldGFpbHMuZ2V0U2NyaXB0RWxlbWVudHNOb3RJbkRldGFpbHModGhpcy5jdXJyZW50SGVhZERldGFpbHMpfSxvLnByb3RvdHlwZS5nZXRDdXJyZW50SGVhZFByb3Zpc2lvbmFsRWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50SGVhZERldGFpbHMuZ2V0UHJvdmlzaW9uYWxFbGVtZW50cygpfSxvLnByb3RvdHlwZS5nZXROZXdIZWFkUHJvdmlzaW9uYWxFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5ld0hlYWREZXRhaWxzLmdldFByb3Zpc2lvbmFsRWxlbWVudHMoKX0sby5wcm90b3R5cGUuZ2V0Q3VycmVudEJvZHlQZXJtYW5lbnRFbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRTbmFwc2hvdC5nZXRQZXJtYW5lbnRFbGVtZW50c1ByZXNlbnRJblNuYXBzaG90KHRoaXMubmV3U25hcHNob3QpfSxvLnByb3RvdHlwZS5nZXROZXdCb2R5U2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXdCb2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIil9LG99KGUuUmVuZGVyZXIpLHQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1ldGFcIiksZS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0dXJib2xpbmtzLXBlcm1hbmVudC1wbGFjZWhvbGRlclwiKSxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIix0LmlkKSx7ZWxlbWVudDplLHBlcm1hbmVudEVsZW1lbnQ6dH19LHI9ZnVuY3Rpb24odCxlKXt2YXIgcjtyZXR1cm4ocj10LnBhcmVudE5vZGUpP3IucmVwbGFjZUNoaWxkKGUsdCk6dm9pZCAwfX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1mb3IodmFyIG8gaW4gZSlyLmNhbGwoZSxvKSYmKHRbb109ZVtvXSk7cmV0dXJuIG4ucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyBuLHQuX19zdXBlcl9fPWUucHJvdG90eXBlLHR9LHI9e30uaGFzT3duUHJvcGVydHk7ZS5FcnJvclJlbmRlcmVyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIodCl7dmFyIGU7ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHRtbFwiKSxlLmlubmVySFRNTD10LHRoaXMubmV3SGVhZD1lLnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpLHRoaXMubmV3Qm9keT1lLnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpfXJldHVybiB0KHIsZSksci5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlbmRlclZpZXcoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUucmVwbGFjZUhlYWRBbmRCb2R5KCksZS5hY3RpdmF0ZUJvZHlTY3JpcHRFbGVtZW50cygpLHQoKX19KHRoaXMpKX0sci5wcm90b3R5cGUucmVwbGFjZUhlYWRBbmRCb2R5PWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gZT1kb2N1bWVudC5oZWFkLHQ9ZG9jdW1lbnQuYm9keSxlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMubmV3SGVhZCxlKSx0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMubmV3Qm9keSx0KX0sci5wcm90b3R5cGUuYWN0aXZhdGVCb2R5U2NyaXB0RWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvLGk7Zm9yKG49dGhpcy5nZXRTY3JpcHRFbGVtZW50cygpLGk9W10sZT0wLHI9bi5sZW5ndGg7cj5lO2UrKylvPW5bZV0sdD10aGlzLmNyZWF0ZVNjcmlwdEVsZW1lbnQobyksaS5wdXNoKG8ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodCxvKSk7cmV0dXJuIGl9LHIucHJvdG90eXBlLmdldFNjcmlwdEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic2NyaXB0XCIpfSxyfShlLlJlbmRlcmVyKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2UuVmlldz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5kZWxlZ2F0ZT10LHRoaXMuaHRtbEVsZW1lbnQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fXJldHVybiB0LnByb3RvdHlwZS5nZXRSb290TG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTbmFwc2hvdCgpLmdldFJvb3RMb2NhdGlvbigpfSx0LnByb3RvdHlwZS5nZXRFbGVtZW50Rm9yQW5jaG9yPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldFNuYXBzaG90KCkuZ2V0RWxlbWVudEZvckFuY2hvcih0KX0sdC5wcm90b3R5cGUuZ2V0U25hcHNob3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5TbmFwc2hvdC5mcm9tSFRNTEVsZW1lbnQodGhpcy5odG1sRWxlbWVudCl9LHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0LGUpe3ZhciByLG4sbztyZXR1cm4gbz10LnNuYXBzaG90LHI9dC5lcnJvcixuPXQuaXNQcmV2aWV3LHRoaXMubWFya0FzUHJldmlldyhuKSxudWxsIT1vP3RoaXMucmVuZGVyU25hcHNob3QobyxuLGUpOnRoaXMucmVuZGVyRXJyb3IocixlKX0sdC5wcm90b3R5cGUubWFya0FzUHJldmlldz1mdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLmh0bWxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy1wcmV2aWV3XCIsXCJcIik6dGhpcy5odG1sRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvbGlua3MtcHJldmlld1wiKX0sdC5wcm90b3R5cGUucmVuZGVyU25hcHNob3Q9ZnVuY3Rpb24odCxyLG4pe3JldHVybiBlLlNuYXBzaG90UmVuZGVyZXIucmVuZGVyKHRoaXMuZGVsZWdhdGUsbix0aGlzLmdldFNuYXBzaG90KCksZS5TbmFwc2hvdC53cmFwKHQpLHIpfSx0LnByb3RvdHlwZS5yZW5kZXJFcnJvcj1mdW5jdGlvbih0LHIpe3JldHVybiBlLkVycm9yUmVuZGVyZXIucmVuZGVyKHRoaXMuZGVsZWdhdGUscix0KX0sdH0oKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX07ZS5TY3JvbGxNYW5hZ2VyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihyKXt0aGlzLmRlbGVnYXRlPXIsdGhpcy5vblNjcm9sbD10KHRoaXMub25TY3JvbGwsdGhpcyksdGhpcy5vblNjcm9sbD1lLnRocm90dGxlKHRoaXMub25TY3JvbGwpfXJldHVybiByLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ/dm9pZCAwOihhZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbCwhMSksdGhpcy5vblNjcm9sbCgpLHRoaXMuc3RhcnRlZD0hMCl9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydGVkPyhyZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbCwhMSksdGhpcy5zdGFydGVkPSExKTp2b2lkIDB9LHIucHJvdG90eXBlLnNjcm9sbFRvRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdC5zY3JvbGxJbnRvVmlldygpfSxyLnByb3RvdHlwZS5zY3JvbGxUb1Bvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlLHI7cmV0dXJuIGU9dC54LHI9dC55LHdpbmRvdy5zY3JvbGxUbyhlLHIpfSxyLnByb3RvdHlwZS5vblNjcm9sbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51cGRhdGVQb3NpdGlvbih7eDp3aW5kb3cucGFnZVhPZmZzZXQseTp3aW5kb3cucGFnZVlPZmZzZXR9KX0sci5wcm90b3R5cGUudXBkYXRlUG9zaXRpb249ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMucG9zaXRpb249dCxudWxsIT0oZT10aGlzLmRlbGVnYXRlKT9lLnNjcm9sbFBvc2l0aW9uQ2hhbmdlZCh0aGlzLnBvc2l0aW9uKTp2b2lkIDB9LHJ9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtlLlNuYXBzaG90Q2FjaGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuc2l6ZT10LHRoaXMua2V5cz1bXSx0aGlzLnNuYXBzaG90cz17fX12YXIgcjtyZXR1cm4gdC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXIodCksZSBpbiB0aGlzLnNuYXBzaG90c30sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlO2lmKHRoaXMuaGFzKHQpKXJldHVybiBlPXRoaXMucmVhZCh0KSx0aGlzLnRvdWNoKHQpLGV9LHQucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLndyaXRlKHQsZSksdGhpcy50b3VjaCh0KSxlfSx0LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXIodCksdGhpcy5zbmFwc2hvdHNbZV19LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG49cih0KSx0aGlzLnNuYXBzaG90c1tuXT1lfSx0LnByb3RvdHlwZS50b3VjaD1mdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiBuPXIodCksZT10aGlzLmtleXMuaW5kZXhPZihuKSxlPi0xJiZ0aGlzLmtleXMuc3BsaWNlKGUsMSksdGhpcy5rZXlzLnVuc2hpZnQobiksdGhpcy50cmltKCl9LHQucHJvdG90eXBlLnRyaW09ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixvO2ZvcihuPXRoaXMua2V5cy5zcGxpY2UodGhpcy5zaXplKSxvPVtdLHQ9MCxyPW4ubGVuZ3RoO3I+dDt0KyspZT1uW3RdLG8ucHVzaChkZWxldGUgdGhpcy5zbmFwc2hvdHNbZV0pO3JldHVybiBvfSxyPWZ1bmN0aW9uKHQpe3JldHVybiBlLkxvY2F0aW9uLndyYXAodCkudG9DYWNoZUtleSgpfSx0fSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fTtlLlZpc2l0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihyLG4sbyl7dGhpcy5jb250cm9sbGVyPXIsdGhpcy5hY3Rpb249byx0aGlzLnBlcmZvcm1TY3JvbGw9dCh0aGlzLnBlcmZvcm1TY3JvbGwsdGhpcyksdGhpcy5pZGVudGlmaWVyPWUudXVpZCgpLHRoaXMubG9jYXRpb249ZS5Mb2NhdGlvbi53cmFwKG4pLHRoaXMuYWRhcHRlcj10aGlzLmNvbnRyb2xsZXIuYWRhcHRlcix0aGlzLnN0YXRlPVwiaW5pdGlhbGl6ZWRcIix0aGlzLnRpbWluZ01ldHJpY3M9e319dmFyIG47cmV0dXJuIHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuXCJpbml0aWFsaXplZFwiPT09dGhpcy5zdGF0ZT8odGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoXCJ2aXNpdFN0YXJ0XCIpLHRoaXMuc3RhdGU9XCJzdGFydGVkXCIsdGhpcy5hZGFwdGVyLnZpc2l0U3RhcnRlZCh0aGlzKSk6dm9pZCAwfSxyLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm5cInN0YXJ0ZWRcIj09PXRoaXMuc3RhdGU/KG51bGwhPSh0PXRoaXMucmVxdWVzdCkmJnQuY2FuY2VsKCksdGhpcy5jYW5jZWxSZW5kZXIoKSx0aGlzLnN0YXRlPVwiY2FuY2VsZWRcIik6dm9pZCAwfSxyLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciB0O3JldHVyblwic3RhcnRlZFwiPT09dGhpcy5zdGF0ZT8odGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoXCJ2aXNpdEVuZFwiKSx0aGlzLnN0YXRlPVwiY29tcGxldGVkXCIsXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0Q29tcGxldGVkJiZ0LnZpc2l0Q29tcGxldGVkKHRoaXMpLHRoaXMuY29udHJvbGxlci52aXNpdENvbXBsZXRlZCh0aGlzKSk6dm9pZCAwfSxyLnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuXCJzdGFydGVkXCI9PT10aGlzLnN0YXRlPyh0aGlzLnN0YXRlPVwiZmFpbGVkXCIsXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0RmFpbGVkP3QudmlzaXRGYWlsZWQodGhpcyk6dm9pZCAwKTp2b2lkIDB9LHIucHJvdG90eXBlLmNoYW5nZUhpc3Rvcnk9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0aGlzLmhpc3RvcnlDaGFuZ2VkP3ZvaWQgMDoodD10aGlzLmxvY2F0aW9uLmlzRXF1YWxUbyh0aGlzLnJlZmVycmVyKT9cInJlcGxhY2VcIjp0aGlzLmFjdGlvbixlPW4odCksdGhpcy5jb250cm9sbGVyW2VdKHRoaXMubG9jYXRpb24sdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpLHRoaXMuaGlzdG9yeUNoYW5nZWQ9ITApfSxyLnByb3RvdHlwZS5pc3N1ZVJlcXVlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaG91bGRJc3N1ZVJlcXVlc3QoKSYmbnVsbD09dGhpcy5yZXF1ZXN0Pyh0aGlzLnByb2dyZXNzPTAsdGhpcy5yZXF1ZXN0PW5ldyBlLkh0dHBSZXF1ZXN0KHRoaXMsdGhpcy5sb2NhdGlvbix0aGlzLnJlZmVycmVyKSx0aGlzLnJlcXVlc3Quc2VuZCgpKTp2b2lkIDB9LHIucHJvdG90eXBlLmdldENhY2hlZFNuYXBzaG90PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuISh0PXRoaXMuY29udHJvbGxlci5nZXRDYWNoZWRTbmFwc2hvdEZvckxvY2F0aW9uKHRoaXMubG9jYXRpb24pKXx8bnVsbCE9dGhpcy5sb2NhdGlvbi5hbmNob3ImJiF0Lmhhc0FuY2hvcih0aGlzLmxvY2F0aW9uLmFuY2hvcil8fFwicmVzdG9yZVwiIT09dGhpcy5hY3Rpb24mJiF0LmlzUHJldmlld2FibGUoKT92b2lkIDA6dH0sci5wcm90b3R5cGUuaGFzQ2FjaGVkU25hcHNob3Q9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5nZXRDYWNoZWRTbmFwc2hvdCgpfSxyLnByb3RvdHlwZS5sb2FkQ2FjaGVkU25hcHNob3Q9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybihlPXRoaXMuZ2V0Q2FjaGVkU25hcHNob3QoKSk/KHQ9dGhpcy5zaG91bGRJc3N1ZVJlcXVlc3QoKSx0aGlzLnJlbmRlcihmdW5jdGlvbigpe3ZhciByO3JldHVybiB0aGlzLmNhY2hlU25hcHNob3QoKSx0aGlzLmNvbnRyb2xsZXIucmVuZGVyKHtzbmFwc2hvdDplLGlzUHJldmlldzp0fSx0aGlzLnBlcmZvcm1TY3JvbGwpLFwiZnVuY3Rpb25cIj09dHlwZW9mKHI9dGhpcy5hZGFwdGVyKS52aXNpdFJlbmRlcmVkJiZyLnZpc2l0UmVuZGVyZWQodGhpcyksdD92b2lkIDA6dGhpcy5jb21wbGV0ZSgpfSkpOnZvaWQgMH0sci5wcm90b3R5cGUubG9hZFJlc3BvbnNlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMucmVzcG9uc2U/dGhpcy5yZW5kZXIoZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0aGlzLmNhY2hlU25hcHNob3QoKSx0aGlzLnJlcXVlc3QuZmFpbGVkPyh0aGlzLmNvbnRyb2xsZXIucmVuZGVyKHtlcnJvcjp0aGlzLnJlc3BvbnNlfSx0aGlzLnBlcmZvcm1TY3JvbGwpLFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9dGhpcy5hZGFwdGVyKS52aXNpdFJlbmRlcmVkJiZ0LnZpc2l0UmVuZGVyZWQodGhpcyksdGhpcy5mYWlsKCkpOih0aGlzLmNvbnRyb2xsZXIucmVuZGVyKHtzbmFwc2hvdDp0aGlzLnJlc3BvbnNlfSx0aGlzLnBlcmZvcm1TY3JvbGwpLFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dGhpcy5hZGFwdGVyKS52aXNpdFJlbmRlcmVkJiZlLnZpc2l0UmVuZGVyZWQodGhpcyksdGhpcy5jb21wbGV0ZSgpKX0pOnZvaWQgMH0sci5wcm90b3R5cGUuZm9sbG93UmVkaXJlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbiYmIXRoaXMuZm9sbG93ZWRSZWRpcmVjdD8odGhpcy5sb2NhdGlvbj10aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uLHRoaXMuY29udHJvbGxlci5yZXBsYWNlSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllcih0aGlzLnJlZGlyZWN0ZWRUb0xvY2F0aW9uLHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKSx0aGlzLmZvbGxvd2VkUmVkaXJlY3Q9ITApOnZvaWQgMH0sci5wcm90b3R5cGUucmVxdWVzdFN0YXJ0ZWQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy5yZWNvcmRUaW1pbmdNZXRyaWMoXCJyZXF1ZXN0U3RhcnRcIiksXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0UmVxdWVzdFN0YXJ0ZWQ/dC52aXNpdFJlcXVlc3RTdGFydGVkKHRoaXMpOnZvaWQgMH0sci5wcm90b3R5cGUucmVxdWVzdFByb2dyZXNzZWQ9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMucHJvZ3Jlc3M9dCxcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXRoaXMuYWRhcHRlcikudmlzaXRSZXF1ZXN0UHJvZ3Jlc3NlZD9lLnZpc2l0UmVxdWVzdFByb2dyZXNzZWQodGhpcyk6dm9pZCAwfSxyLnByb3RvdHlwZS5yZXF1ZXN0Q29tcGxldGVkV2l0aFJlc3BvbnNlPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMucmVzcG9uc2U9dCxudWxsIT1yJiYodGhpcy5yZWRpcmVjdGVkVG9Mb2NhdGlvbj1lLkxvY2F0aW9uLndyYXAocikpLHRoaXMuYWRhcHRlci52aXNpdFJlcXVlc3RDb21wbGV0ZWQodGhpcyl9LHIucHJvdG90eXBlLnJlcXVlc3RGYWlsZWRXaXRoU3RhdHVzQ29kZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnJlc3BvbnNlPWUsdGhpcy5hZGFwdGVyLnZpc2l0UmVxdWVzdEZhaWxlZFdpdGhTdGF0dXNDb2RlKHRoaXMsdCl9LHIucHJvdG90eXBlLnJlcXVlc3RGaW5pc2hlZD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnJlY29yZFRpbWluZ01ldHJpYyhcInJlcXVlc3RFbmRcIiksXCJmdW5jdGlvblwiPT10eXBlb2YodD10aGlzLmFkYXB0ZXIpLnZpc2l0UmVxdWVzdEZpbmlzaGVkP3QudmlzaXRSZXF1ZXN0RmluaXNoZWQodGhpcyk6dm9pZCAwfSxyLnByb3RvdHlwZS5wZXJmb3JtU2Nyb2xsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsZWQ/dm9pZCAwOihcInJlc3RvcmVcIj09PXRoaXMuYWN0aW9uP3RoaXMuc2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uKCl8fHRoaXMuc2Nyb2xsVG9Ub3AoKTp0aGlzLnNjcm9sbFRvQW5jaG9yKCl8fHRoaXMuc2Nyb2xsVG9Ub3AoKSx0aGlzLnNjcm9sbGVkPSEwKX0sci5wcm90b3R5cGUuc2Nyb2xsVG9SZXN0b3JlZFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gdD1udWxsIT0oZT10aGlzLnJlc3RvcmF0aW9uRGF0YSk/ZS5zY3JvbGxQb3NpdGlvbjp2b2lkIDAsbnVsbCE9dD8odGhpcy5jb250cm9sbGVyLnNjcm9sbFRvUG9zaXRpb24odCksITApOnZvaWQgMH0sci5wcm90b3R5cGUuc2Nyb2xsVG9BbmNob3I9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5sb2NhdGlvbi5hbmNob3I/KHRoaXMuY29udHJvbGxlci5zY3JvbGxUb0FuY2hvcih0aGlzLmxvY2F0aW9uLmFuY2hvciksITApOnZvaWQgMH0sci5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250cm9sbGVyLnNjcm9sbFRvUG9zaXRpb24oe3g6MCx5OjB9KX0sci5wcm90b3R5cGUucmVjb3JkVGltaW5nTWV0cmljPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnRpbWluZ01ldHJpY3MpW3RdP2VbdF06ZVt0XT0obmV3IERhdGUpLmdldFRpbWUoKX0sci5wcm90b3R5cGUuZ2V0VGltaW5nTWV0cmljcz1mdW5jdGlvbigpe3JldHVybiBlLmNvcHlPYmplY3QodGhpcy50aW1pbmdNZXRyaWNzKX0sbj1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZVwicmVwbGFjZVwiOnJldHVyblwicmVwbGFjZUhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXJcIjtjYXNlXCJhZHZhbmNlXCI6Y2FzZVwicmVzdG9yZVwiOnJldHVyblwicHVzaEhpc3RvcnlXaXRoTG9jYXRpb25BbmRSZXN0b3JhdGlvbklkZW50aWZpZXJcIn19LHIucHJvdG90eXBlLnNob3VsZElzc3VlUmVxdWVzdD1mdW5jdGlvbigpe3JldHVyblwicmVzdG9yZVwiPT09dGhpcy5hY3Rpb24/IXRoaXMuaGFzQ2FjaGVkU25hcHNob3QoKTohMH0sci5wcm90b3R5cGUuY2FjaGVTbmFwc2hvdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNuYXBzaG90Q2FjaGVkP3ZvaWQgMDoodGhpcy5jb250cm9sbGVyLmNhY2hlU25hcHNob3QoKSx0aGlzLnNuYXBzaG90Q2FjaGVkPSEwKX0sci5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNhbmNlbFJlbmRlcigpLHRoaXMuZnJhbWU9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmZyYW1lPW51bGwsdC5jYWxsKGUpfX0odGhpcykpfSxyLnByb3RvdHlwZS5jYW5jZWxSZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcmFtZT9jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lKTp2b2lkIDB9LHJ9KCl9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19O2UuQ29udHJvbGxlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXt0aGlzLmNsaWNrQnViYmxlZD10KHRoaXMuY2xpY2tCdWJibGVkLHRoaXMpLHRoaXMuY2xpY2tDYXB0dXJlZD10KHRoaXMuY2xpY2tDYXB0dXJlZCx0aGlzKSx0aGlzLnBhZ2VMb2FkZWQ9dCh0aGlzLnBhZ2VMb2FkZWQsdGhpcyksdGhpcy5oaXN0b3J5PW5ldyBlLkhpc3RvcnkodGhpcyksdGhpcy52aWV3PW5ldyBlLlZpZXcodGhpcyksdGhpcy5zY3JvbGxNYW5hZ2VyPW5ldyBlLlNjcm9sbE1hbmFnZXIodGhpcyksdGhpcy5yZXN0b3JhdGlvbkRhdGE9e30sdGhpcy5jbGVhckNhY2hlKCksdGhpcy5zZXRQcm9ncmVzc0JhckRlbGF5KDUwMCl9cmV0dXJuIHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIGUuc3VwcG9ydGVkJiYhdGhpcy5zdGFydGVkPyhhZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmNsaWNrQ2FwdHVyZWQsITApLGFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5wYWdlTG9hZGVkLCExKSx0aGlzLnNjcm9sbE1hbmFnZXIuc3RhcnQoKSx0aGlzLnN0YXJ0SGlzdG9yeSgpLHRoaXMuc3RhcnRlZD0hMCx0aGlzLmVuYWJsZWQ9ITApOnZvaWQgMH0sci5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWQ9ITF9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydGVkPyhyZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmNsaWNrQ2FwdHVyZWQsITApLHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5wYWdlTG9hZGVkLCExKSx0aGlzLnNjcm9sbE1hbmFnZXIuc3RvcCgpLHRoaXMuc3RvcEhpc3RvcnkoKSx0aGlzLnN0YXJ0ZWQ9ITEpOnZvaWQgMH0sci5wcm90b3R5cGUuY2xlYXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhY2hlPW5ldyBlLlNuYXBzaG90Q2FjaGUoMTApfSxyLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbih0LHIpe3ZhciBuLG87cmV0dXJuIG51bGw9PXImJihyPXt9KSx0PWUuTG9jYXRpb24ud3JhcCh0KSx0aGlzLmFwcGxpY2F0aW9uQWxsb3dzVmlzaXRpbmdMb2NhdGlvbih0KT90aGlzLmxvY2F0aW9uSXNWaXNpdGFibGUodCk/KG49bnVsbCE9KG89ci5hY3Rpb24pP286XCJhZHZhbmNlXCIsdGhpcy5hZGFwdGVyLnZpc2l0UHJvcG9zZWRUb0xvY2F0aW9uV2l0aEFjdGlvbih0LG4pKTp3aW5kb3cubG9jYXRpb249dDp2b2lkIDB9LHIucHJvdG90eXBlLnN0YXJ0VmlzaXRUb0xvY2F0aW9uV2l0aEFjdGlvbj1mdW5jdGlvbih0LHIsbil7dmFyIG87cmV0dXJuIGUuc3VwcG9ydGVkPyhvPXRoaXMuZ2V0UmVzdG9yYXRpb25EYXRhRm9ySWRlbnRpZmllcihuKSx0aGlzLnN0YXJ0VmlzaXQodCxyLHtyZXN0b3JhdGlvbkRhdGE6b30pKTp3aW5kb3cubG9jYXRpb249dH0sci5wcm90b3R5cGUuc2V0UHJvZ3Jlc3NCYXJEZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9ncmVzc0JhckRlbGF5PXR9LHIucHJvdG90eXBlLnN0YXJ0SGlzdG9yeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9uPWUuTG9jYXRpb24ud3JhcCh3aW5kb3cubG9jYXRpb24pLHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyPWUudXVpZCgpLHRoaXMuaGlzdG9yeS5zdGFydCgpLHRoaXMuaGlzdG9yeS5yZXBsYWNlKHRoaXMubG9jYXRpb24sdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpfSxyLnByb3RvdHlwZS5zdG9wSGlzdG9yeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpc3Rvcnkuc3RvcCgpfSxyLnByb3RvdHlwZS5wdXNoSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllcj1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcj1yLHRoaXMubG9jYXRpb249ZS5Mb2NhdGlvbi53cmFwKHQpLHRoaXMuaGlzdG9yeS5wdXNoKHRoaXMubG9jYXRpb24sdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpfSxyLnByb3RvdHlwZS5yZXBsYWNlSGlzdG9yeVdpdGhMb2NhdGlvbkFuZFJlc3RvcmF0aW9uSWRlbnRpZmllcj1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLnJlc3RvcmF0aW9uSWRlbnRpZmllcj1yLHRoaXMubG9jYXRpb249ZS5Mb2NhdGlvbi53cmFwKHQpLHRoaXMuaGlzdG9yeS5yZXBsYWNlKHRoaXMubG9jYXRpb24sdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpfSxyLnByb3RvdHlwZS5oaXN0b3J5UG9wcGVkVG9Mb2NhdGlvbldpdGhSZXN0b3JhdGlvbklkZW50aWZpZXI9ZnVuY3Rpb24odCxyKXt2YXIgbjtyZXR1cm4gdGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXI9cix0aGlzLmVuYWJsZWQ/KG49dGhpcy5nZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyKHRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyKSx0aGlzLnN0YXJ0VmlzaXQodCxcInJlc3RvcmVcIix7cmVzdG9yYXRpb25JZGVudGlmaWVyOnRoaXMucmVzdG9yYXRpb25JZGVudGlmaWVyLHJlc3RvcmF0aW9uRGF0YTpuLGhpc3RvcnlDaGFuZ2VkOiEwfSksdGhpcy5sb2NhdGlvbj1lLkxvY2F0aW9uLndyYXAodCkpOnRoaXMuYWRhcHRlci5wYWdlSW52YWxpZGF0ZWQoKX0sci5wcm90b3R5cGUuZ2V0Q2FjaGVkU25hcHNob3RGb3JMb2NhdGlvbj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gbnVsbCE9KGU9dGhpcy5jYWNoZS5nZXQodCkpP2UuY2xvbmUoKTp2b2lkIDB9LHIucHJvdG90eXBlLnNob3VsZENhY2hlU25hcHNob3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldFNuYXBzaG90KCkuaXNDYWNoZWFibGUoKTtcbn0sci5wcm90b3R5cGUuY2FjaGVTbmFwc2hvdD1mdW5jdGlvbigpe3ZhciB0LHI7cmV0dXJuIHRoaXMuc2hvdWxkQ2FjaGVTbmFwc2hvdCgpPyh0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlQ2FjaGluZ1NuYXBzaG90KCkscj10aGlzLnZpZXcuZ2V0U25hcHNob3QoKSx0PXRoaXMubGFzdFJlbmRlcmVkTG9jYXRpb24sZS5kZWZlcihmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5jYWNoZS5wdXQodCxyLmNsb25lKCkpfX0odGhpcykpKTp2b2lkIDB9LHIucHJvdG90eXBlLnNjcm9sbFRvQW5jaG9yPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybihlPXRoaXMudmlldy5nZXRFbGVtZW50Rm9yQW5jaG9yKHQpKT90aGlzLnNjcm9sbFRvRWxlbWVudChlKTp0aGlzLnNjcm9sbFRvUG9zaXRpb24oe3g6MCx5OjB9KX0sci5wcm90b3R5cGUuc2Nyb2xsVG9FbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNjcm9sbE1hbmFnZXIuc2Nyb2xsVG9FbGVtZW50KHQpfSxyLnByb3RvdHlwZS5zY3JvbGxUb1Bvc2l0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNjcm9sbE1hbmFnZXIuc2Nyb2xsVG9Qb3NpdGlvbih0KX0sci5wcm90b3R5cGUuc2Nyb2xsUG9zaXRpb25DaGFuZ2VkPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXRoaXMuZ2V0Q3VycmVudFJlc3RvcmF0aW9uRGF0YSgpLGUuc2Nyb2xsUG9zaXRpb249dH0sci5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudmlldy5yZW5kZXIodCxlKX0sci5wcm90b3R5cGUudmlld0ludmFsaWRhdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRhcHRlci5wYWdlSW52YWxpZGF0ZWQoKX0sci5wcm90b3R5cGUudmlld1dpbGxSZW5kZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVSZW5kZXIodCl9LHIucHJvdG90eXBlLnZpZXdSZW5kZXJlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3RSZW5kZXJlZExvY2F0aW9uPXRoaXMuY3VycmVudFZpc2l0LmxvY2F0aW9uLHRoaXMubm90aWZ5QXBwbGljYXRpb25BZnRlclJlbmRlcigpfSxyLnByb3RvdHlwZS5wYWdlTG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFzdFJlbmRlcmVkTG9jYXRpb249dGhpcy5sb2NhdGlvbix0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJQYWdlTG9hZCgpfSxyLnByb3RvdHlwZS5jbGlja0NhcHR1cmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuY2xpY2tCdWJibGVkLCExKSxhZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmNsaWNrQnViYmxlZCwhMSl9LHIucHJvdG90eXBlLmNsaWNrQnViYmxlZD1mdW5jdGlvbih0KXt2YXIgZSxyLG47cmV0dXJuIHRoaXMuZW5hYmxlZCYmdGhpcy5jbGlja0V2ZW50SXNTaWduaWZpY2FudCh0KSYmKHI9dGhpcy5nZXRWaXNpdGFibGVMaW5rRm9yTm9kZSh0LnRhcmdldCkpJiYobj10aGlzLmdldFZpc2l0YWJsZUxvY2F0aW9uRm9yTGluayhyKSkmJnRoaXMuYXBwbGljYXRpb25BbGxvd3NGb2xsb3dpbmdMaW5rVG9Mb2NhdGlvbihyLG4pPyh0LnByZXZlbnREZWZhdWx0KCksZT10aGlzLmdldEFjdGlvbkZvckxpbmsociksdGhpcy52aXNpdChuLHthY3Rpb246ZX0pKTp2b2lkIDB9LHIucHJvdG90eXBlLmFwcGxpY2F0aW9uQWxsb3dzRm9sbG93aW5nTGlua1RvTG9jYXRpb249ZnVuY3Rpb24odCxlKXt2YXIgcjtyZXR1cm4gcj10aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJDbGlja2luZ0xpbmtUb0xvY2F0aW9uKHQsZSksIXIuZGVmYXVsdFByZXZlbnRlZH0sci5wcm90b3R5cGUuYXBwbGljYXRpb25BbGxvd3NWaXNpdGluZ0xvY2F0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXRoaXMubm90aWZ5QXBwbGljYXRpb25CZWZvcmVWaXNpdGluZ0xvY2F0aW9uKHQpLCFlLmRlZmF1bHRQcmV2ZW50ZWR9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJDbGlja2luZ0xpbmtUb0xvY2F0aW9uPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUuZGlzcGF0Y2goXCJ0dXJib2xpbmtzOmNsaWNrXCIse3RhcmdldDp0LGRhdGE6e3VybDpyLmFic29sdXRlVVJMfSxjYW5jZWxhYmxlOiEwfSl9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQmVmb3JlVmlzaXRpbmdMb2NhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gZS5kaXNwYXRjaChcInR1cmJvbGlua3M6YmVmb3JlLXZpc2l0XCIse2RhdGE6e3VybDp0LmFic29sdXRlVVJMfSxjYW5jZWxhYmxlOiEwfSl9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJWaXNpdGluZ0xvY2F0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBlLmRpc3BhdGNoKFwidHVyYm9saW5rczp2aXNpdFwiLHtkYXRhOnt1cmw6dC5hYnNvbHV0ZVVSTH19KX0sci5wcm90b3R5cGUubm90aWZ5QXBwbGljYXRpb25CZWZvcmVDYWNoaW5nU25hcHNob3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5kaXNwYXRjaChcInR1cmJvbGlua3M6YmVmb3JlLWNhY2hlXCIpfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkJlZm9yZVJlbmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5kaXNwYXRjaChcInR1cmJvbGlua3M6YmVmb3JlLXJlbmRlclwiLHtkYXRhOntuZXdCb2R5OnR9fSl9LHIucHJvdG90eXBlLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJSZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gZS5kaXNwYXRjaChcInR1cmJvbGlua3M6cmVuZGVyXCIpfSxyLnByb3RvdHlwZS5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyUGFnZUxvYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQmJih0PXt9KSxlLmRpc3BhdGNoKFwidHVyYm9saW5rczpsb2FkXCIse2RhdGE6e3VybDp0aGlzLmxvY2F0aW9uLmFic29sdXRlVVJMLHRpbWluZzp0fX0pfSxyLnByb3RvdHlwZS5zdGFydFZpc2l0PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbjtyZXR1cm4gbnVsbCE9KG49dGhpcy5jdXJyZW50VmlzaXQpJiZuLmNhbmNlbCgpLHRoaXMuY3VycmVudFZpc2l0PXRoaXMuY3JlYXRlVmlzaXQodCxlLHIpLHRoaXMuY3VycmVudFZpc2l0LnN0YXJ0KCksdGhpcy5ub3RpZnlBcHBsaWNhdGlvbkFmdGVyVmlzaXRpbmdMb2NhdGlvbih0KX0sci5wcm90b3R5cGUuY3JlYXRlVmlzaXQ9ZnVuY3Rpb24odCxyLG4pe3ZhciBvLGkscyxhLHU7cmV0dXJuIGk9bnVsbCE9bj9uOnt9LGE9aS5yZXN0b3JhdGlvbklkZW50aWZpZXIscz1pLnJlc3RvcmF0aW9uRGF0YSxvPWkuaGlzdG9yeUNoYW5nZWQsdT1uZXcgZS5WaXNpdCh0aGlzLHQsciksdS5yZXN0b3JhdGlvbklkZW50aWZpZXI9bnVsbCE9YT9hOmUudXVpZCgpLHUucmVzdG9yYXRpb25EYXRhPWUuY29weU9iamVjdChzKSx1Lmhpc3RvcnlDaGFuZ2VkPW8sdS5yZWZlcnJlcj10aGlzLmxvY2F0aW9uLHV9LHIucHJvdG90eXBlLnZpc2l0Q29tcGxldGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vdGlmeUFwcGxpY2F0aW9uQWZ0ZXJQYWdlTG9hZCh0LmdldFRpbWluZ01ldHJpY3MoKSl9LHIucHJvdG90eXBlLmNsaWNrRXZlbnRJc1NpZ25pZmljYW50PWZ1bmN0aW9uKHQpe3JldHVybiEodC5kZWZhdWx0UHJldmVudGVkfHx0LnRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZXx8dC53aGljaD4xfHx0LmFsdEtleXx8dC5jdHJsS2V5fHx0Lm1ldGFLZXl8fHQuc2hpZnRLZXkpfSxyLnByb3RvdHlwZS5nZXRWaXNpdGFibGVMaW5rRm9yTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub2RlSXNWaXNpdGFibGUodCk/ZS5jbG9zZXN0KHQsXCJhW2hyZWZdOm5vdChbdGFyZ2V0XSk6bm90KFtkb3dubG9hZF0pXCIpOnZvaWQgMH0sci5wcm90b3R5cGUuZ2V0VmlzaXRhYmxlTG9jYXRpb25Gb3JMaW5rPWZ1bmN0aW9uKHQpe3ZhciByO3JldHVybiByPW5ldyBlLkxvY2F0aW9uKHQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSksdGhpcy5sb2NhdGlvbklzVmlzaXRhYmxlKHIpP3I6dm9pZCAwfSxyLnByb3RvdHlwZS5nZXRBY3Rpb25Gb3JMaW5rPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBudWxsIT0oZT10LmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rcy1hY3Rpb25cIikpP2U6XCJhZHZhbmNlXCJ9LHIucHJvdG90eXBlLm5vZGVJc1Zpc2l0YWJsZT1mdW5jdGlvbih0KXt2YXIgcjtyZXR1cm4ocj1lLmNsb3Nlc3QodCxcIltkYXRhLXR1cmJvbGlua3NdXCIpKT9cImZhbHNlXCIhPT1yLmdldEF0dHJpYnV0ZShcImRhdGEtdHVyYm9saW5rc1wiKTohMH0sci5wcm90b3R5cGUubG9jYXRpb25Jc1Zpc2l0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc1ByZWZpeGVkQnkodGhpcy52aWV3LmdldFJvb3RMb2NhdGlvbigpKSYmdC5pc0hUTUwoKX0sci5wcm90b3R5cGUuZ2V0Q3VycmVudFJlc3RvcmF0aW9uRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJlc3RvcmF0aW9uRGF0YUZvcklkZW50aWZpZXIodGhpcy5yZXN0b3JhdGlvbklkZW50aWZpZXIpfSxyLnByb3RvdHlwZS5nZXRSZXN0b3JhdGlvbkRhdGFGb3JJZGVudGlmaWVyPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnJlc3RvcmF0aW9uRGF0YSlbdF0/ZVt0XTplW3RdPXt9fSxyfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7IWZ1bmN0aW9uKCl7dmFyIHQsZTtpZigodD1lPWRvY3VtZW50LmN1cnJlbnRTY3JpcHQpJiYhZS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXR1cmJvbGlua3Mtc3VwcHJlc3Mtd2FybmluZ1wiKSlmb3IoO3Q9dC5wYXJlbnROb2RlOylpZih0PT09ZG9jdW1lbnQuYm9keSlyZXR1cm4gY29uc29sZS53YXJuKFwiWW91IGFyZSBsb2FkaW5nIFR1cmJvbGlua3MgZnJvbSBhIDxzY3JpcHQ+IGVsZW1lbnQgaW5zaWRlIHRoZSA8Ym9keT4gZWxlbWVudC4gVGhpcyBpcyBwcm9iYWJseSBub3Qgd2hhdCB5b3UgbWVhbnQgdG8gZG8hXFxuXFxuTG9hZCB5b3VyIGFwcGxpY2F0aW9uXFx1MjAxOXMgSmF2YVNjcmlwdCBidW5kbGUgaW5zaWRlIHRoZSA8aGVhZD4gZWxlbWVudCBpbnN0ZWFkLiA8c2NyaXB0PiBlbGVtZW50cyBpbiA8Ym9keT4gYXJlIGV2YWx1YXRlZCB3aXRoIGVhY2ggcGFnZSBjaGFuZ2UuXFxuXFxuRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL3R1cmJvbGlua3MvdHVyYm9saW5rcyN3b3JraW5nLXdpdGgtc2NyaXB0LWVsZW1lbnRzXFxuXFxuXFx1MjAxNFxcdTIwMTRcXG5TdXBwcmVzcyB0aGlzIHdhcm5pbmcgYnkgYWRkaW5nIGEgYGRhdGEtdHVyYm9saW5rcy1zdXBwcmVzcy13YXJuaW5nYCBhdHRyaWJ1dGUgdG86ICVzXCIsZS5vdXRlckhUTUwpfSgpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7dmFyIHQscixuO2Uuc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcigpPyhudWxsPT1lLmNvbnRyb2xsZXImJihlLmNvbnRyb2xsZXI9dCgpKSxlLmNvbnRyb2xsZXIuc3RhcnQoKSk6dm9pZCAwfSxyPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXdpbmRvdy5UdXJib2xpbmtzJiYod2luZG93LlR1cmJvbGlua3M9ZSksbigpfSx0PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHQ9bmV3IGUuQ29udHJvbGxlcix0LmFkYXB0ZXI9bmV3IGUuQnJvd3NlckFkYXB0ZXIodCksdH0sbj1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuVHVyYm9saW5rcz09PWV9LG4oKSYmZS5zdGFydCgpfS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzKSxcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKGUpfSkuY2FsbCh0aGlzKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/turbolinks/dist/turbolinks.js\n");

/***/ })

/******/ });